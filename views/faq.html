<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ - Reelcareer</title>
    <meta name="description" content="Find answers to common questions about our services, job searching tips, and more in our FAQ section.">

    <!-- CSS Styles -->
    <style>
        body {
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .faq-item {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            background-color: #fff;
            margin-bottom: 10px;
            transition: transform 0.3s ease-in-out;
        }
        .faq-item:hover {
            transform: scale(1.02);
        }
        .faq-question {
            cursor: pointer;
            font-weight: bold;
            color: #007bff;
        }
        .faq-answer {
            display: none;
            margin-top: 10px;
        }
        .ask-question-section {
            margin-top: 30px;
        }
        .feedback {
            margin-top: 20px;
            font-size: 0.9em;
        }
        @media (max-width: 576px) {
            .faq-item {
                padding: 15px;
            }
        }
    </style>

    <!-- Scripts -->
    <script defer src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

   <!-- Bootstrap CSS -->
   <script src="../public/js/scripts.js"></script>
   <script src="../public/js/loadScripts.js"></script>
   <!-- Custom CSS -->
   <link rel="stylesheet" href="../public/css/styles.css">

</head>


<body>
    <script src="../public/js/bodyload.js"></script>
    
    <nav></nav>

    <main>
        <div class="faq-container">
            <h1>Frequently Asked Questions</h1>

            <input type="text" id="searchInput" class="form-control mb-4" placeholder="Search FAQs..." aria-label="Search FAQs">

            <div id="faqList" class="list-group">
                <!-- FAQ items will be dynamically loaded here -->
            </div>

            <div class="ask-question-section">
                <h3>Have a question?</h3>
                <p id="authMessage" class="text-danger" style="display: none;">You must be logged in to ask a question.</p>

                <form id="askQuestionForm" style="display: none;" class="mt-3">
                    <textarea id="questionInput" class="form-control" rows="4" placeholder="Type your question..." required></textarea>
                    <button type="submit" class="btn btn-primary mt-2">Submit Question</button>
                </form>

                <button id="askQuestionBtn" class="btn btn-secondary mt-3" style="display: none;">Ask a Question</button>
            </div>

            <button id="liveChatButton" class="btn btn-primary mt-4">Live Chat</button>
        </div>
    </main>

    <!-- Footer -->
    <footer id="dynamic-footer"></footer>

    <!-- Firebase configuration/ Login & Out -->
    <script type="module" src="../public/js/main.js"></script>

    <script type="module">
        import { db } from '../public/js/main.js'; // Adjust the path based on your structure
        import { collection, getDocs } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', async () => {
            const faqList = document.getElementById('faqList');
            const isLoggedIn = false;  // Replace with actual auth check logic

            faqList.innerHTML = ''; // Clear any existing content

            // Fetch FAQs from Firestore
            const faqs = [];
            const faqQuery = collection(db, "FAQs");
            const querySnapshot = await getDocs(faqQuery);

            querySnapshot.forEach((doc) => {
                const { question, answer } = doc.data();
                faqs.push({ question, answer });
            });

            // Load FAQs dynamically
            loadFAQs(faqs);

            // Check if the user is logged in
            toggleAuthState(isLoggedIn);

            // Search functionality
            document.getElementById('searchInput').addEventListener('keyup', function () {
                const searchTerm = this.value.toLowerCase();
                const faqItems = document.querySelectorAll('.faq-item');
                faqItems.forEach(item => {
                    const question = item.querySelector('.faq-question').textContent.toLowerCase();
                    item.style.display = question.includes(searchTerm) ? '' : 'none';
                });
            });

            // Live chat button
            document.getElementById('liveChatButton').addEventListener('click', () => {
                alert("Chat feature coming soon!");
            });

            // Toggle FAQ answer
            faqList.addEventListener('click', function (e) {
                if (e.target && e.target.classList.contains('faq-question')) {
                    const answerDiv = e.target.nextElementSibling;
                    answerDiv.style.display = answerDiv.style.display === 'block' ? 'none' : 'block';
                }
            });

            // Ask question form submission
            document.getElementById('askQuestionForm').addEventListener('submit', function (e) {
                e.preventDefault();
                const questionInput = document.getElementById('questionInput').value;
                console.log("Question submitted:", questionInput);
                // Reset the form
                document.getElementById('questionInput').value = '';
                alert("Your question has been submitted for review.");
            });

            // Toggle form display on button click
            document.getElementById('askQuestionBtn').addEventListener('click', () => {
                document.getElementById('askQuestionForm').style.display = 'block';
                document.getElementById('authMessage').style.display = 'none';
                document.getElementById('askQuestionBtn').style.display = 'none';
            });
        });

        // Function to load FAQs dynamically
        function loadFAQs(faqs) {
            const faqList = document.getElementById('faqList');
            faqs.forEach((faq, index) => {
                const faqItem = document.createElement('div');
                faqItem.className = 'faq-item';
                faqItem.innerHTML = `
                    <div class="faq-question">${faq.question}</div>
                    <div class="faq-answer">${faq.answer}</div>
                `;
                faqList.appendChild(faqItem);
            });
        }

        // Function to toggle authentication state
        function toggleAuthState(isLoggedIn) {
            if (isLoggedIn) {
                document.getElementById('askQuestionForm').style.display = 'block';
            } else {
                document.getElementById('authMessage').style.display = 'block';
                document.getElementById('askQuestionBtn').style.display = 'block';
            }
        }
    </script>
</body>
</html>
