<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Reel Account</title>
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Your ReelCareer Account">
    <meta property="og:description" content="Manage your ReelCareer account. View your balance, request payouts, check transactions, and update your membership information.">
    <meta property="og:image" content="https://reelcareer.co/images/8pic_rc.png">
    <meta property="og:url" content="https://reelcareer.co/account">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Your ReelCareer Account">
    <meta name="twitter:description" content="Manage your ReelCareer account. View your balance, request payouts, check transactions, and update your membership information.">
    <meta name="twitter:image" content="https://reelcareer.co/images/8pic_rc.png">
    <meta name="twitter:url" content="https://reelcareer.co/account">

    <!-- General Meta Tags -->
    <meta name="description" content="Access your ReelCareer account dashboard. Track your balance, manage membership, view transactions, and request payouts.">
    <meta name="keywords" content="account management, payout request, membership, balance, transactions, ReelCareer">
    <meta name="author" content="ReelCareer">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#ffffff">

    <!-- Canonical Tag for SEO -->
    <link rel="canonical" href="https://reelcareer.co/account">

    <!-- Standard Favicon -->
    <link rel="icon" type="image/x-icon" href="https://reelcareer.co/images/favicons/favicon.ico">

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "url": "https://reelcareer.co/account",
      "name": "Your ReelCareer Account",
      "description": "Manage your ReelCareer account. View your balance, request payouts, check transactions, and update your membership information.",
      "author": {
        "@type": "Organization",
        "name": "ReelCareer",
        "url": "https://reelcareer.co/"
      },
      "publisher": {
        "@type": "Organization",
        "name": "ReelCareer",
        "url": "https://reelcareer.co/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://reelcareer.co/images/8pic_rc.png",
          "width": 200,
          "height": 60
        }
      },
      "image": {
        "@type": "ImageObject",
        "url": "https://reelcareer.co/images/8pic_rc.png",
        "width": 1200,
        "height": 630
      }
    }
    </script>

    <title>Your ReelCareer Account | ReelCareer</title>
</head>


<!-- Main Script Loader -->
<script src="https://reelcareer.co/scripts/js/loader.js"></script>
<style>
  main {

    

header {
    text-align: center;
    padding: 10px 0;
}

header h1 {
    font-size: 2rem;
    color: #333;
    margin-bottom: 5px;
}

header p {
    font-size: 1rem;
    color: #666;
}

#main-analytics {
    margin: 20px 0;
    padding: 15px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    width: 100%;
}

#main-analytics h2 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #444;
}

.stats {
    display: flex;
    justify-content: space-around;
    gap: 20px;
    flex-direction: row;
    flex-wrap: wrap;
    align-content: space-around;
}

.stats div {
    text-align: center;
    padding: 10px;
    border-radius: 8px;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    width: 45%;
}
#total-reels {
    text-align: center;
    font-size: 2rem;
    font-weight: 600;
}

#total-reels-div h3 {
    text-align: center;

}
.stats h3 {
    font-size: 1.2rem;
}

.stats p {
    font-size: 1.8rem;
    font-weight: bold;
    color: #222;
}

#video-reels {
    margin-top: 30px;
    width: 100%;
    display: block;
}

#video-reels h2 {
    font-size: 1.6rem;
    color: #444;
    margin-bottom: 15px;
}

table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    overflow: hidden;
}

thead th {
    padding: 15px;
    background: #0056b3;
    color: #fff;
    text-align: left;
    font-size: 1rem;
}

tbody tr {
    border-bottom: 1px solid #ddd;
}

tbody td {
    padding: 12px;
    font-size: 0.95rem;
    color: #555;
}

tbody tr:nth-child(even) {
    background: #f4f4f4;
}

tbody td:last-child {
    display: flex;
    gap: 10px;
}

button.edit, button.delete {
    padding: 5px 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button.edit {
    background-color: #28a745;
    color: #fff;
}

button.delete {
    background-color: #dc3545;
    color: #fff;
}

button.edit:hover {
    background-color: #218838;
}

button.delete:hover {
    background-color: #c82333;
}

@media (max-width: 768px) {
    .stats {
        flex-direction: column;
        gap: 10px;
    }

    table {
        font-size: 0.9rem;
    }

    tbody td {
        padding: 8px;
    }

    .stats div {

    width: auto;
}
}

    .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.7);
}

.edit-btn {
    background-color: #24e9fb;

}

.analytics-btn {
    background-color: #2c952a;

}

.delete-btn {
    background-color: #a01f1f;

}


.modal-content {
    background-color: #fefefe;
    margin: 10% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
    border-radius: 8px;
    display: none;
}

.close {
    color: #ff1111;
    font-size: 28px;
    font-weight: bold;
    display: block;
    float: none;
    opacity: 1;
    width: auto;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}

button {
    padding: 10px 20px;
    font-size: 16px;
}

.reel-groups {
    background-color: #dcdcdc85;
    border-radius: 8px;
    margin: .5rem;
    padding: 1rem;
    display: grid;

    
}
.reel-groups label {
    display: inline-block;
    margin-bottom: .5rem;
    color: #86bcda;
    font-family: sans-serif;
    font-size: 1rem;
    font-weight: 400;
}



#editReelForm {
input[type="text"],
input[type="checkbox"],
input[type="text"],
 input[type="url"],
 select, 
  textarea {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: #f1f3f5;
    color: #000;
    transition: border 0.3s ease;
}

}
.reel-groups-bools {
    margin: 5% auto;
    display: flex;
    border: 1px solid #888;
    border-radius: 8px;
    align-content: stretch;
    justify-content: space-around;
    align-items: stretch;
    justify-items: stretch;
    grid-column-gap: 3rem;
    flex-direction: row;
    flex-wrap: wrap;
    padding: 1.5rem;
}

#editReelForm {

/* Modern checkbox styling */
input[type="checkbox"] {
    -webkit-appearance: none; /* Remove default checkbox */
    -moz-appearance: none;
    appearance: none;
    width: 1.5rem; /* Adjust size for modern look */
    height: 1.5rem;
    margin: 0 10px 0 0;
    border: 2px solid #ddd; /* Border for custom design */
    border-radius: 4px; /* Rounded corners */
    background-color: #f1f3f5;
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #000;

}

input[type="checkbox"]:checked {
    background-color: #007bff; /* Active color */
    border-color: #007bff;
}

input[type="checkbox"]:checked::after {
    content: '';
    position: absolute;
    top: 4px; /* Adjust positioning of checkmark */
    left: 4px;
    width: 6px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg); /* Create a checkmark */
}

input[type="checkbox"]:hover {
    border-color: #0056b3; /* Hover effect */
}

}
    .reel-groups-bools label {
 
    border-radius: 8px;
    }
}    





#analytics-container {
  width: 100%;
}

#analytics {
    display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 1rem;

}
.modal-content h3 {
    font-size: 1.75rem;
    color: #83bad9;
    text-shadow: -1px 1px 0px #9e9a9a;
    font-weight: 800;
}

.analytics-item {
  padding: 1rem;
  border: 1px solid #ddd;
  border-radius: 8px;
  background: #f9f9f9;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.analytics-label {
  display: block;
  font-size: 0.9rem;
  color: #6c757d;
}

.analytics-value {
  font-size: 1.5rem;
  font-weight: bold;
  color: #333;
}


.category-btn {
    margin: .2rem;
}

 
.tag  {
    background-color: #8a8a8a;
    color: rgb(255 255 255);
    border: none;
    padding: 5px 10px;
    font-size: 1.5rem;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s;
    display: flex;
    margin: .5rem;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    align-content: stretch;
}





.tags {
    color: rgb(255 255 255);
    border: none;
    padding: 5px 10px;
    font-size: 1.5rem;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s;
    display: table-caption;
    margin: .5rem;
}


.tag-primary {
    background-color: #8fbdec;

}

#advanceAnalytics {
    display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 1rem;

}
#advanceAnalyticsContaier {
        margin-top: 1rem;
}




.videoElements {
    display: block;
    margin: auto;
}





.videoElements {
    display: block;
    margin: auto;
}







  </style>
  
</head>
<body>

  <!-- Navigation Bar -->
  <nav id="Main-Nav_bar" class="navbar navbar-expand-lg main-navbar-light shadow-sm sticky-top" role="navigation">
    <div class="container d-flex align-items-center justify-content-between">
      <!-- Logo -->
      <a class="navbar-brand embossed" id="MAIN-LOGO-Reel-Career" href="https://reelcareer.co/" aria-label="Go to home page">
        ReelCareer
      </a>

      <!-- Always-visible Icons -->
      <ul class="navbar-nav d-flex flex-row justify-content-center flex-grow-1" id="iconBar">
        
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/job-listings" aria-label="Go to job listings page">
          <i class="fa fa-briefcase"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/reels" aria-label="Go to reels page">
          <i class="fa fa-video"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/membership" aria-label="Go to membership page">
          <i class="fa fa-user"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/views/blogs" aria-label="Go to blogs page">
          <i class="fa fa-pencil-alt"></i>
        </a>
      </li>
      </ul>

      <!-- Auth Section -->
      <div id="authSection" class="d-flex align-items-center"><button class="btn btn-primary" id="loginButton">Login / Create Account</button></div>
    </div>
  </nav>



   <!-- Breadcrumb Section -->

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
      <li id="lastBreadcrumb_home" class="breadcrumb-item"><a href="https://reelcareer.co/">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Video Reel Account</li>
  </ol>
</nav>

    <!-- Main Content Section -->
    <main id="main-content">

            <header>
                <h1>Your Video Reels</h1>
                <p>Manage and track your video resume performance.</p>
            </header>


            <section id="main-analytics">
                <h2>Reel Stats</h2>

                <div id="total-reels-div">
                    <h3>Total Reels</h3>
                    <p id="total-reels">0</p>
                </div>
                <div class="stats">
                    <div>
                        <h3>Total Views</h3>
                        <p id="total-views">0</p>
                    </div>
                    <div>
                        <h3>Total Unique Views</h3>
                        <p id="total-uniqueViews">0</p>
                    </div>
                    <div>
                        <h3>Total Likes</h3>
                        <p id="total-likes">0</p>
                 </div>
                    <div>
                        <h3>Total Shares</h3>
                        <p id="total-shares">0</p>
                    </div>
                    <div>
                        <h3>Total Gifts</h3>
                        <p id="total-gifts">0</p>
                    </div>
                    <div>
                        <h3>Total Comments</h3>
                        <p id="total-comments">0</p>
                    </div>

                    <div>
                        <h3>Total Shortlisted</h3>
                        <p id="total-shortList">0</p>
                    </div>
                    <div>
                        <h3>Total Saved</h3>
                        <p id="total-saved">0</p>
                    </div>
                    <div>
                        <h3>Total Loves</h3>
                        <p id="total-loves">0</p>
                    </div>
                    <div>
                        <h3>Total Watch Time</h3>
                        <p id="total-watchTime">0</p>
                    </div>
                    <div>
                        <h3>Total Engagements</h3>
                        <p id="total-engagegments">0</p>
                    </div>
                    <div>
                        <h3>Total Reach</h3>
                        <p id="total-reach">0</p>
                    </div>
                </div>
            </section>
            
            
            <section id="video-reels">
                <h2>Your Reels</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Video</th>
                            <th>Title</th>
                            <th>Status</th>
                            <th>Views</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="reel-list">
                        <!-- Reels will be dynamically loaded here -->
                    </tbody>
                </table>
            </section>

<!-- Edit Modal -->
<div id="main-modal-container" class="modal">
    <div id="main-modal-close-btn" class="close">Close</div>


<div id="edit-container" class="modal-content">
    <h3>Edit</h3>
    <div id="videoReelArea-edit"></div>

<form id="editReelForm">

    <section id="reel-main-data">

        <div class="reel-groups">
            <label for="videoResumeTitle">Title <small class="text-muted">(Provide a descriptive title for your video resume)</small></label>
            <input type="text" id="videoResumeTitle" name="title" aria-label="Video Resume Title" placeholder="Enter title for your video resume" />
        </div>
    
        <div class="reel-groups">
            <label for="reelID">Reel ID <small class="text-muted">(Auto-generated unique identifier)</small></label>
            <input type="text" id="reelID" name="reelID" aria-label="Reel ID" disabled />
        </div>
    
        <div class="reel-groups" hidden>
            <label for="videoResumeFileName">File Name <small class="text-muted">(Uploaded file name)</small></label>
            <input type="text" id="videoResumeFileName" name="videoResumeFileName" aria-label="File Name" disabled />
        </div>
    
        <div class="reel-groups">
            <label for="fileType">File Type <small class="text-muted">(Format of the uploaded file)</small></label>
            <input type="text" id="fileType" name="fileType" aria-label="File Type" disabled />
        </div>
    
        <div class="reel-groups">
            <label for="createdAt">Created At <small class="text-muted">(Date of creation)</small></label>
            <input type="text" id="createdAt" name="createdAt" aria-label="Creation Date" disabled />
        </div>
    
        <div class="reel-groups">
            <label for="reelURL">Reel URL <small class="text-muted">(Direct link to your video reel)</small></label>
            <input type="url" id="reelURL" name="reelURL" aria-label="Reel URL" disabled />
        </div>
    
        <div class="reel-groups">
            <label for="duration">Duration <small class="text-muted">(Length of the video)</small></label>
            <input type="text" id="duration" name="duration" aria-label="Duration" disabled />
        </div>
    
        <div class="reel-groups">
            <label for="isBoostedPost">
                Boosted Post <small id="boostedCostInfo">(Cost: 1 Boosted Credit)</small>
            </label>
            <input type="checkbox" id="isBoostedPost" aria-labelledby="boostedCostInfo" />
        </div>
    
        <div class="reel-groups">
            <label for="isSponsoredPost">
                Sponsored Post <small id="sponsoredCostInfo">(Cost: $5)</small>
            </label>
            <input type="checkbox" id="isSponsoredPost" aria-labelledby="sponsoredCostInfo" />
        </div>
    </section>
    
    <section id="reel-changeable-data">
        <div class="reel-groups">
            <label for="isPublic">
                Public <small class="text-muted">(Check to make it public)</small>
            </label>
            <input type="checkbox" id="isPublic" aria-label="Make Reel Public" checked />
        </div>
    
        <div class="reel-groups">
            <label for="videoResumeCaptions">Captions <small class="text-muted">(Optional subtitles for your video)</small></label>
            <textarea id="videoResumeCaptions" name="videoResumeCaptions" rows="3" aria-label="Captions" placeholder="Add captions..."></textarea>
        </div>
    
        <div class="reel-groups">
            <label for="tagsSET-main">
                Tags <small class="text-muted">(Add a tag and press Enter)</small>
            </label>
            <div id="tagsContainerSET-main">
                <input type="text" id="tagsSET-main" class="form-control" aria-label="Tags Input" placeholder="(e.g., JavaScript, Management)">
            </div>
        </div>
    
        <div class="reel-groups">
            <label for="status">Status <small class="text-muted">(Select the current state of your reel)</small></label>
            <select id="status" name="status" aria-label="Reel Status">
                <option value="posted">Posted</option>
                <option value="draft">Draft</option>
                <option value="archived">Archived</option>
                <option value="review" disabled>Review</option>
            </select>
        </div>
    
        <div class="reel-groups">
            <label for="location">Location <small class="text-muted">(Where this reel is based)</small></label>
            <input type="text" id="location" name="location" aria-label="Location" placeholder="Enter location" />
        </div>
    
        <div class="reel-groups">
            <label for="thumbnailUpload">Thumbnail <small class="text-muted">(Upload or link a thumbnail image)</small></label>
            <div id="thumbnailPreviewContainer" style="cursor: pointer;" aria-label="Thumbnail Preview">
                <img id="thumbnailPreview" src="https://reelcareer.co/images/sq_logo_n_BG_sm.png" alt="Thumbnail Preview" style="width: 150px; height: 150px; border: 1px solid #ccc;" />
            </div>
            <input type="file" id="thumbnailUpload" name="thumbnailUpload" accept="image/*" style="display: none;" aria-label="Upload Thumbnail" />
            <input type="hidden" id="thumbnailURL" name="thumbnailURL" />
        </div>
    
        <div class="reel-groups">
            <label for="relatedURL">Related URL <small class="text-muted">(Link to related content)</small></label>
            <input type="url" id="relatedURL" name="relatedURL" aria-label="Related URL" placeholder="Enter related URL" />
        </div>
    
        <div id="endingCardArea" class="reel-groups">
            <label for="endingCard">Ending Card <small class="text-muted">(Final message or credit)</small></label>
            <input type="text" id="endingCard" name="endingCard" aria-label="Ending Card" placeholder="Enter ending card information" />
        </div>
    
        <div class="reel-groups">
            <label for="relatedReels">Related Reels <small class="text-muted">(List of associated reels)</small></label>
            <div id="relatedReelsListContainer">
                <div id="relatedReelsList" aria-label="Related Reels List"></div>
            </div>
        </div>
    
        <div id="relatedProductsArea" class="reel-groups">
            <label for="relatedProducts">Related Products <small class="text-muted">(Attach products linked to this reel)</small></label>
            <button id="addProductButton" type="button" class="btn btn-secondary" aria-label="Add Product">Add Product</button>
            <div id="productListContainer" aria-label="Product List"></div>
        </div>
    
        <div class="reel-groups">
            <label for="tagsSET-reelCategories">
                Categories <small class="text-muted">(Add up to 3 Categories)</small>
            </label>

            <div id="categories-container"> 
                <button class="category-btn" data-category="Web Development">Web Development</button>
                <button class="category-btn" data-category="Graphic Design">Graphic Design</button>
                <button class="category-btn" data-category="Digital Marketing">Digital Marketing</button>
                <button class="category-btn" data-category="Public Speaking">Public Speaking</button>
                <button class="category-btn" data-category="Fitness Training">Fitness Training</button>
                <button class="category-btn" data-category="Financial Analysis">Financial Analysis</button>
                <button class="category-btn" data-category="Illustration">Illustration</button>
                <button class="category-btn" data-category="Video Editing">Video Editing</button>
                <button class="category-btn" data-category="Sports Coaching">Sports Coaching</button>
                <button class="category-btn" data-category="Photography">Photography</button>
                <button class="category-btn" data-category="Entertainment">Entertainment</button>
                <button class="category-btn" data-category="Sports">Sports</button>
                <button class="category-btn" data-category="Travel">Travel</button>
              </div>
              
                            
            <div id="tagsContainerSET-reelCategories">
                <input type="text" id="tagsSET-reelCategories" class="form-control" aria-label="Category Tags" placeholder="(e.g., Design, Travel)">
            </div>
        </div>
    
        <div class="reel-groups">
            <label for="reelResume">Resume <small class="text-muted">(Provide a link or upload your resume)</small></label>
            <input type="text" id="reelResume" name="reelResume" aria-label="Reel Resume" placeholder="Link or upload resume" />
        </div>
    </section>
    
    <div class="reel-groups-bools">
        <label><input type="checkbox" id="notificationsBool" aria-label="Enable Notifications" /> Enable Notifications <small class="text-muted">(Receive updates about this reel)</small></label>
        <label><input type="checkbox" id="commentsBool" checked aria-label="Allow Comments" /> Allow Comments <small class="text-muted">(Enable viewers to comment)</small></label>
        <label><input type="checkbox" id="giftsBool" aria-label="Enable Gifts" /> Enable Gifts <small class="text-muted">(Allow viewers to send gifts)</small></label>
        <label><input type="checkbox" id="viewsBool" checked aria-label="Show Views" /> Show Views <small class="text-muted">(Display the number of views)</small></label>
        <label><input type="checkbox" id="likesBool" checked aria-label="Show Likes" /> Show Likes <small class="text-muted">(Display the number of likes)</small></label>
        <label><input type="checkbox" id="lovesBool" checked aria-label="Show Loves" /> Show Loves <small class="text-muted">(Display the number of loves)</small></label>
    </div>

    <button type="button" id="saveChangesBtn">Save Changes</button>


</form>
</div>



<div id="analytics-container" class="modal-content">
    <h3>Analytics</h3>
    <div id="videoReelArea-analytics"></div>

    <div id="analytics">

    <div class="analytics-item">
      <span class="analytics-label">Views</span>
      <span id="reel-views" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
        <span class="analytics-label">Unique Views</span>
        <span id="reel-uniqueViews" class="analytics-value">0</span>
      </div>
    <div class="analytics-item">
      <span class="analytics-label">Likes</span>
      <span id="reel-likes" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Shares</span>
      <span id="reel-shares" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Gifts</span>
      <span id="reel-gifts" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Comments</span>
      <span id="reel-comments" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Shortlisted</span>
      <span id="reel-shortList" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Saved</span>
      <span id="reel-saved" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Loves</span>
      <span id="reel-loves" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Watch Time</span>
      <span id="reel-watchTime" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Engagements</span>
      <span id="reel-engagements" class="analytics-value">0</span>
    </div>
    <div class="analytics-item">
      <span class="analytics-label">Reach</span>
      <span id="reel-reach" class="analytics-value">0</span>
    </div>
</div>

    <div id="advanceAnalyticsContaier">
        <h3>Advanced Video Analytics</h3>




    <div id="advanceAnalytics"></div></div>
  </div>
  


</div>




      </main>
      
      <script>



</script>


   <!-- Footer -->
   <footer id="dynamic-footer">
    <div class="footerMainContainer text-center">
    <p class="footerSocialMedia"></p>
    <nav class="footerNavContainer">
    
    <div class="footerNavItems">
    <h5>General</h5>
    <a href="/" title="ReelCareer - #1 Job Board - Find a job today">ReelCareer</a><a href="/views/about" title="About ReelCareer - Who We Are and Our Mission">About ReelCareer</a><a href="/views/contact" title="Contact ReelCareer - Get in Touch for Support and Inquiries">Contact Us</a><a href="/job-listings" title="Job Listings - Search and Apply for Job Openings">Job Listings</a><a href="/membership" title="Membership - Unlock Premium Features and Job Opportunities">Membership</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Legal</h5>
    <a href="/views/privacy" title="Privacy Policy - How We Protect Your Data">Privacy Policy</a><a href="/views/terms" title="Terms of Use - Website User Agreement and Guidelines">Terms of Use</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Content</h5>
    <a href="/views/blogs" title="ReelCareer Blog - Career Advice, News, and Insights">Blogs</a><a href="/views/news" title="ReelCareer News - Latest Updates and Industry Trends">News</a><a href="/views/Personality-&-Trait-Tests" title="Personality & Trait Tests - Discover Your Strengths and Work Style">Personality & Trait Tests</a><a href="/reels" title="Video Reels - Showcase Your Resume with a Personal Touch">Video Reels</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Support</h5>
    <a href="/views/faq" title="Frequently Asked Questions - Get Answers to Common Queries">FAQs</a><a href="/bot" title="Chat Bot - Get Instant Assistance with Your Job Search">Chat Bot</a><a href="/support" title="Support - Get Help with Your Job Search and Account">Support</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Marketing</h5>
    <a href="/views/referral" title="Join the ReelCareer Affiliate Program and Earn Rewards">Affiliate Program</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Admin</h5>
    <a href="/backend/dashboard" title="Admin Dashboard - Manage Users, Jobs, and Content">Admin</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Features</h5>
    <a href="/jobs/city" title="City Jobs - Find Career Opportunities by Location">City Jobs</a><a href="/jobs/state" title="State Jobs - Explore Job Listings by State">State Jobs</a><a href="/jobs/locations" title="Job Locations - Browse Jobs in Your Area">Job Locations</a>
    </div>
    </nav>
    <p class="footerCopyWrite">© 2024 ReelCareer</p>
    
    </div>
    <button id="backToTop" title="Go to top">↑</button>
    
    </footer>
    
    
    
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"></script> <!-- For fetching IP -->


    

        <!-- Include Firebase SDK as a module -->
<script type="module">
    import {
        db, getStorage, ref, uploadBytes, getDownloadURL, limit,
  doc, arrayUnion, RecaptchaVerifier, increment, getDoc, arrayRemove, signInWithPhoneNumber,
  query, updateDoc, setDoc, addDoc, signInAnonymously, orderBy, onAuthStateChanged,
  uploadBytesResumable, signInWithPopup, FacebookAuthProvider, GoogleAuthProvider, startAfter,
  OAuthProvider, signOut, deleteDoc, getFirestore, serverTimestamp,
  createUserWithEmailAndPassword, signInWithEmailAndPassword, deleteObject,
  where, getDocs, storage, getAuth, collection, auth, analytics,
  googleProvider,onSnapshot , linkWithCredential, EmailAuthProvider ,
  getUserId // Export the function
    } from 'https://reelcareer.co/scripts/js/load/module.js';

    
        // Listen for authentication state changes to get the user ID
        let userID = '';
        let pageID = '';
        let pageName = '';
        document.addEventListener('DOMContentLoaded', async () => {
    try {
        const userID = await getUserId(); // Ensure user ID is fetched
        if (!userID) {
            console.warn('No user ID found. Redirecting to login...');
            window.location.href = '/login';
            return;
        }

        // Load user video reels
        loadVideoReels(userID);

        // Fetch analytics data
        loadAnalytics(userID);
    } catch (error) {
        console.error("Error loading account page:", error);
    }
});

async function loadVideoReels(userID) {

    console.log("userID  ",userID);

    const reelList = document.getElementById('reel-list');
    reelList.innerHTML = ''; // Clear existing content

    //userID
    const reelsQuery = query(
  collection(db, "VideoResumes"),
  where("createdByID", "==", userID),
  where("isDeleted", "==", false)
);
    const querySnapshot = await getDocs(reelsQuery);

    querySnapshot.forEach(doc => {
        const reel = doc.data();

        let videoResumeURL = `https://reelcareer.co/reels/?r=${doc.id}`;
        const row = `
            <tr>
                <td><a href="${videoResumeURL}" target="_blank">View Video</a></td>
                <td>${reel.videoResumeTitle || 'N/A'}</td>
                <td>${reel.status}</td>
                <td>${reel.views}</td>
                <td>
                    <button class="btn edit-btn" data-id="${doc.id}">Edit</button>
                    <button class="btn analytics-btn" data-id="${doc.id}">Analytics</button>
                    <button class="btn delete-btn" data-id="${doc.id}">Delete</button>
                </td>
            </tr>
        `;
        reelList.innerHTML += row;
    });

    // Attach event listeners for edit and delete buttons
    document.querySelectorAll('.edit-btn').forEach(btn => 
    btn.addEventListener('click', (event) => handleReels('edit', event))
);

document.querySelectorAll('.analytics-btn').forEach(btn => 
    btn.addEventListener('click', (event) => handleReels('analytics', event))
);

document.querySelectorAll('.delete-btn').forEach(btn => btn.addEventListener('click', handleDelete));
}
// Helper function to format time
function formatWatchTime(seconds) {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = seconds % 60;

  const parts = [];
  if (hours > 0) parts.push(`${hours}h`);
  if (minutes > 0) parts.push(`${minutes}m`);
  if (secs > 0 || parts.length === 0) parts.push(`${secs}s`);  // Include seconds even if 0, unless higher units exist

  return parts.join(' ');
}


async function loadAnalytics(userID) {
    const reelsQuery = query(collection(db, "VideoResumes"), where("createdByID", "==", userID));
    const querySnapshot = await getDocs(reelsQuery);

    let totalViews = 0, totalLikes = 0, totalUniqueViews = 0, totalShares = 0, totalGifts = 0, totalComments = 0, totalReported = 0, totalShortList = 0, totalSaved = 0, totalLoves = 0, totalWatchTime = 0, totalEngagements = 0, totalReach = 0;

    querySnapshot.forEach(doc => {
        const reel = doc.data();
        totalViews += reel.views || 0;
        totalUniqueViews += reel.uniqueViews || 0;
        totalLikes += reel.likes || 0;
        totalShares += reel.shares || 0;
        totalGifts += (reel.gifts ? reel.gifts.length : 0);  // Assuming gifts is an array
        totalComments += reel.comments || 0;
        totalShortList += reel.shortList || 0;
        totalSaved += reel.saved || 0;
        totalLoves += reel.loves || 0;
        totalWatchTime += reel.watchTime || 0;  // Assuming watchTime is stored
        totalEngagements += reel.engagements || 0;
        totalReach += reel.reach || 0;
    });
    
    document.getElementById('total-reels').textContent = querySnapshot.size || 0;  // `size` is preferred for Firestore snapshots
    document.getElementById('total-uniqueViews').textContent = totalUniqueViews;
    document.getElementById('total-views').textContent = totalViews;
    document.getElementById('total-likes').textContent = totalLikes;
    document.getElementById('total-shares').textContent = totalShares;
    document.getElementById('total-gifts').textContent = totalGifts;
    document.getElementById('total-comments').textContent = totalComments;
    document.getElementById('total-shortList').textContent = totalShortList;
    document.getElementById('total-saved').textContent = totalSaved;
    document.getElementById('total-loves').textContent = totalLoves;
    document.getElementById('total-watchTime').textContent = formatWatchTime(totalWatchTime);
    document.getElementById('total-engagegments').textContent = totalEngagements;
    document.getElementById('total-reach').textContent = totalReach;
}










let relatedReelsArray = [];
let relatedProductsArray = [];

let reelID = '';


function updateRelatedProductsDisplay(reelData, relatedProductsArray) {
    const addProductButton = document.getElementById('addProductButton');
    const productListContainer = document.getElementById('productListContainer');

    // Function to render the product list in DOM
    const renderProductList = () => {
        productListContainer.innerHTML = '';  // Clear the list before re-rendering
        relatedProductsArray.forEach((product, index) => {
            const productDiv = document.createElement('div');
            productDiv.classList.add('product-entry');
            productDiv.id = `product-${index}`;
            productDiv.innerHTML = `
                <div>
                    <label for="productName-${index}">Product Name:</label>
                    <input type="text" id="productName-${index}" placeholder="Product Name" value="${product.name}" required>
                </div>
                <div>
                    <label for="productCost-${index}">Cost:</label>
                    <input type="text" id="productCost-${index}" placeholder="Product Cost" value="${product.cost}" required>
                </div>
                <div>
                    <label for="productLink-${index}">Link:</label>
                    <input type="url" id="productLink-${index}" placeholder="Product URL" value="${product.link}" required>
                </div>
                <div>
                    <label for="productImage-${index}">Image URL:</label>
                    <input type="url" id="productImage-${index}" placeholder="Product Image URL" value="${product.image || ''}" required>
                    <div id="imagePreview-${index}" class="image-preview">
                        ${product.image ? `<img src="${product.image}" alt="Product Image" style="max-width: 100px;">` : ''}
                    </div>
                </div>
                <button type="button" class="btn btn-danger remove-product-btn" data-index="${index}">Remove</button>
            `;

            // Append the new product div to the container
            productListContainer.appendChild(productDiv);

            // Add event listener for the remove button
            const removeButton = productDiv.querySelector('.remove-product-btn');
            removeButton.addEventListener('click', (e) => {
                e.preventDefault();
                relatedProductsArray.splice(index, 1);  // Remove the product from the array
                renderProductList();  // Re-render the list
            });

            // Add event listeners to inputs to update array and DOM when values change
            const nameInput = productDiv.querySelector(`#productName-${index}`);
            const costInput = productDiv.querySelector(`#productCost-${index}`);
            const linkInput = productDiv.querySelector(`#productLink-${index}`);
            const imageInput = productDiv.querySelector(`#productImage-${index}`);
            const imagePreview = productDiv.querySelector(`#imagePreview-${index}`);

            nameInput.addEventListener('input', () => {
                relatedProductsArray[index].name = nameInput.value;
            });
            costInput.addEventListener('input', () => {
                relatedProductsArray[index].cost = costInput.value;
            });
            linkInput.addEventListener('input', () => {
                relatedProductsArray[index].link = linkInput.value;
            });
            imageInput.addEventListener('input', () => {
                relatedProductsArray[index].image = imageInput.value;
                if (imageInput.value) {
                    imagePreview.innerHTML = `<img src="${imageInput.value}" alt="Product Image" style="max-width: 100px;">`;
                } else {
                    imagePreview.innerHTML = '';
                }
            });
        });
    };

    // Render the initial list
    renderProductList();

    // Add event listener to the "Add Product" button
    addProductButton.addEventListener('click', () => {
        if (relatedProductsArray.length >= 4) {
            alert('You can only add up to 4 products.');
            return;
        }

        // Add a new product object to the array
        relatedProductsArray.push({ name: '', cost: '', link: '', image: '' });

        // Re-render the product list with the updated array
        renderProductList();
    });
}

function updateRelatedReelsDisplay(reelData, relatedReelsArray) {
    const relatedReelsList = document.getElementById('relatedReelsList');

    // Clear the list before rendering
    relatedReelsList.innerHTML = '';

    // Check if reelData and relatedReels are valid arrays
    if (!reelData.relatedReels || !Array.isArray(reelData.relatedReels) || reelData.relatedReels.length === 0) {
        relatedReelsList.innerHTML = '<li>No related Reels found.</li>';
    } else {
        reelData.relatedReels.forEach(videoData => {
            const card = document.createElement('div');
            card.id = `video-${videoData.reelID}`;
            card.classList.add("profileVideoCard");
            card.innerHTML = `
                <div class="vidioCard_thumbnail">
                    <video 
                      src="${videoData.videoResumeURL}" 
                      class="card-img-top video-player" 
                      controls
                      id="video-${videoData.reelID}">
                    </video>
                    <button class="btn btn-primary btn-block add-remove-btn" id="add-video-btn-${videoData.reelID}">
                        Add Related Video
                    </button>
                    <button class="btn btn-danger btn-block remove-video-btn" id="remove-video-btn-${videoData.reelID}">
                        Remove Related Video
                    </button>
                </div>
            `;

            relatedReelsList.appendChild(card);

            // Add button functionality to toggle related video
            const addButton = document.getElementById(`add-video-btn-${videoData.reelID}`);
            const removeButton = document.getElementById(`remove-video-btn-${videoData.reelID}`);

            addButton.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent form submission
                const reelID = videoData.reelID;

                const index = relatedReelsArray.findIndex(reel => reel.reelID === reelID);
                if (index !== -1) {
                    relatedReelsArray.splice(index, 1); // Remove if already added
                    addButton.innerHTML = "Add Related Video";
                } else {
                    relatedReelsArray.push({
                        reelID: videoData.reelID,
                        reelTitle: videoData.videoResumeTitle,
                        videoUrl: videoData.videoResumeURL,
                        reelURL: videoData.reelURL,
                        reelTags: videoData.tags,
                        reelcreatedDate: new Date(videoData.createdAt)
                    });
                    addButton.innerHTML = "Remove Related Video";
                }
            });

            // Remove button functionality to delete from the DOM and array
            removeButton.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent form submission
                const reelID = videoData.reelID;

                const index = relatedReelsArray.findIndex(reel => reel.reelID === reelID);
                if (index !== -1) {
                    relatedReelsArray.splice(index, 1); // Remove from array
                }
                relatedReelsList.removeChild(card); // Remove from DOM
            });
        });
    }
}
// Function to disable/enable buttons and input based on comma count
function checkCommaCount(e) {
  //  e.preventDefault(); // Prevent form submission

  const input = document.getElementById('input_tagsContainerSET-reelCategories');
  const categoryButtons = document.querySelectorAll('.category-btn');
  const commaCount = (input.value.match(/,/g) || []).length;

  if (commaCount >= 2) {
    // Disable buttons and prevent more characters in input
    categoryButtons.forEach(button => button.disabled = true);
    input.disabled = true;
  } else {
    // Enable buttons and allow input if commas are less than 2
    categoryButtons.forEach(button => button.disabled = false);
    input.disabled = false;
  }
}

// Event listener for category button clicks
document.querySelectorAll('.category-btn').forEach(button => {
  button.addEventListener('click', function(e) {
    e.preventDefault(); // Prevent form submission

    const category = this.getAttribute('data-category');
    const input = document.getElementById('input_tagsContainerSET-reelCategories');
    
    // Add the category to the input field (with a comma)
    input.value += (input.value ? ', ' : '') + category;

    // Trigger the "keyup" event (simulate enter)
    const event = new KeyboardEvent('keyup', {
      bubbles: true,
      cancelable: true,
      keyCode: 13
    });
    event.preventDefault(); // Prevent form submission

    input.dispatchEvent(event);
    event.preventDefault(); // Prevent form submission

    // After adding the category, check for the comma count
    checkCommaCount();
  });
});



async function checkMembershipAndBalance(checkType, checkedBool, isChecking) {
 
 // Assume userData contains membership type and balance information
 const userData = await getUserData(); // Assume this function retrieves user data from your database

 const membershipType = userData.membershipType; // 'basic', 'premium', etc.
 const userBalance = userData.balance; // User's balance to check against

 // Set the prices for boosted and sponsored posts
 const boostedPostCost = 10; // Example cost for a boosted post
 const sponsoredPostCost = 20; // Example cost for a sponsored post

 // Check if the user has sufficient balance and membership for boosted and sponsored posts
 let message = '';

 if(checkedBool){
     if (checkType == "BoostedPost" && (membershipType == 'free' ||  userBalance < boostedPostCost)) {
     message += 'You do not have sufficient membership or balance for a boosted post.\n';
 }

 if (checkType == "SponsoredPost" && (membershipType == 'free' || membershipType == 'basic' &&  userBalance < sponsoredPostCost)) {
     message += 'You do not have sufficient membership or balance for a sponsored post.\n';
 }
 if (checkType == "RelatedProducts" && membershipType == 'free' || membershipType == 'basic') {
     message += 'You do not have sufficient membership to add Related Products.\n';
 }

 if (checkType == "EndingCard" && membershipType == 'free') {
     message += 'You do not have sufficient membership to add Ending Card.\n';
 }

 if(isChecking && message){

    return false; // Stop further actions (e.g., form submission) if not eligible

 }else{
 // Show a message or prevent submission if any post is not possible
 if (message) {
     alert(message);
     return false; // Stop further actions (e.g., form submission) if not eligible
 }


 }


}


 // Allow further actions if the user is eligible
 return true;
}
function populateVideoReels(videoSrc) {
  // Create the video element with provided videoSrc
  const videoElement = document.createElement('video');
  videoElement.src = videoSrc;
  videoElement.controls = true;
  videoElement.width = 360; // Set width as needed
  videoElement.height = 640; // Set height as needed
  videoElement.className = 'videoElements';

  // Clear and populate videoReelArea-analytics
  const analyticsArea = document.getElementById('videoReelArea-analytics');
  analyticsArea.innerHTML = '';  // Clear previous content
  analyticsArea.appendChild(videoElement.cloneNode(true));  // Clone to preserve properties

  // Clear and populate videoReelArea-edit
  const editArea = document.getElementById('videoReelArea-edit');
  editArea.innerHTML = '';  // Clear previous content
  editArea.appendChild(videoElement.cloneNode(true));  // Clone to use the same video properties
}

function toggleContainers(action) {
  const analyticsContainer = document.getElementById('analytics-container');
  const editContainer = document.getElementById('edit-container');

  if (action === 'edit') {
    // Hide analytics container and show edit container
    analyticsContainer.style.display = 'none';
    editContainer.style.display = 'block';
    // Implement edit functionality here
  } else if (action === 'analytics') {
    // Hide edit container and show analytics container
    editContainer.style.display = 'none';
    analyticsContainer.style.display = 'block';
    // Implement analytics functionality here
  }
}

  // Function to format video duration to HH:MM:SS
  function formatDuration(duration) {
    const seconds = Math.floor(duration % 60);
    const minutes = Math.floor((duration / 60) % 60);
    const hours = Math.floor(duration / 3600);
  
    return [
      hours > 0 ? hours.toString().padStart(2, "0") : "00",
      minutes.toString().padStart(2, "0"),
      seconds.toString().padStart(2, "0")
    ]
      .filter((part) => part !== "00") // Remove leading zeros if hours are zero
      .join(":");
  }









// Wait for the document to be fully loaded before initializing
document.addEventListener("DOMContentLoaded", () => {
    setTimeout(() => {
        const generalTags = createTagInputSystem({
            tagsContainerId: "tagsContainerSET-main",
            badgeClass: "tag-primary" // Custom badge class for general tags
        });

        const generalTags_reelCategories = createTagInputSystem({
            tagsContainerId: "tagsContainerSET-reelCategories",
            badgeClass: "tag-primary" // Custom badge class for general tags
        });

        console.log("generalTags", generalTags);
    }, 1000); // 1-second delay
});








async function handleReels(action, event) {
    reelID = event.target.dataset.id;

    const reelRef = doc(db, "VideoResumes", reelID);
    const reelSnap = await getDoc(reelRef);

    if (reelSnap.exists()) {
        const reelData = reelSnap.data();
        

        

toggleContainers(action);




// Populate fields with reel data
document.getElementById('videoResumeTitle').value = reelData.videoResumeTitle || '';
document.getElementById('videoResumeFileName').value = reelData.videoResumeFileName || '';
document.getElementById('reelID').value = reelID || '';
document.getElementById('fileType').value = reelData.fileType || '';
document.getElementById('createdAt').value = reelData.createdAt ? reelData.createdAt.toDate().toLocaleDateString() : '';
document.getElementById('reelURL').value = reelData.reelURL || `https://reelcareer.co/reels/?r=${reelID}`;
document.getElementById('duration').value = reelData.duration ? formatWatchTime(Math.round(reelData.duration)) : '0';
document.getElementById('videoResumeCaptions').value = reelData.videoResumeCaptions || '';
document.getElementById('tagsSET-main').value = reelData.tags ? reelData.tags.join(', ') : '';
document.getElementById('tagsSET-reelCategories').value = reelData.reelCategories ? reelData.reelCategories.join(', ') : '';
document.getElementById('status').value = reelData.status || 'Posted';
document.getElementById('reelResume').value = reelData.reelResume || '';
document.getElementById('thumbnailURL').value = reelData.thumbnailURL || '';
document.getElementById('endingCard').value = reelData.endingCard || '';
document.getElementById('relatedURL').value = reelData.relatedURL || '';
document.getElementById('location').value = reelData.location || '';

// Set boolean checkboxes

document.getElementById('notificationsBool').checked = reelData.notifcationsBool || false;
document.getElementById('commentsBool').checked = reelData.commentsBool || true;
document.getElementById('giftsBool').checked = reelData.giftsBool || false;
document.getElementById('viewsBool').checked = reelData.viewsBool || true;
document.getElementById('likesBool').checked = reelData.likesBool || true;
document.getElementById('lovesBool').checked = reelData.lovesBool || true;
document.getElementById('isPublic').checked = reelData.isPublic || true;
document.getElementById('isBoostedPost').checked = reelData.isBoostedPost || false;
document.getElementById('isSponsoredPost').checked = reelData.isSponsoredPost || false;


populateVideoReels(reelData.videoResumeURL);








// Populate related reels and related products arrays
relatedReelsArray = reelData.relatedReels || [];
relatedProductsArray = reelData.relatedProducts || [];

// Update related products and related reels displays if necessary
updateRelatedProductsDisplay(reelData, relatedProductsArray);
updateRelatedReelsDisplay(reelData, relatedReelsArray);








        document.getElementById('tagsSET-main').value = reelData.tags || "";

        const tagsContainer = document.getElementById('tagsContainerSET-main');
        const tagElement_main = document.getElementById(`tagsList_tagsContainerSET-main`); 

        if(tagElement_main.innerHTML == ''&& reelData.tags){
            tagElement_main.innerText = '';

            reelData.tags.forEach(tag => {
         
                tagElement_main.className = 'tags';
                tagElement_main.innerHTML += `<span class="badge tag-primary mr-1">
                ${tag}<button class="ml-1 btn btn-sm">x</button></span>`;
          tagsContainer.appendChild(tagElement_main);
        });
        }


  
        

        document.getElementById('tagsSET-reelCategories').value = reelData.reelCategories || "";

const tagsContainer_reelCategories = document.getElementById('tagsContainerSET-reelCategories');
const tagElement_reelCategories = document.getElementById(`tagsList_tagsContainerSET-reelCategories`);          

if(tagElement_reelCategories.innerHTML == '' && reelData.reelCategories){
    tagElement_reelCategories.innerText = '';
    const tagsInputElement = document.getElementById('input_tagsContainerSET-reelCategories');

    
    tagsInputElement.value = reelData.reelCategories; // For fallback compatibility if it's a regular input field

    reelData.reelCategories.forEach(tag => {
        
        tagElement_reelCategories.className = 'tags';
tagElement_reelCategories.innerHTML += `<span class="badge tag-primary mr-1">
        ${tag}<button class="ml-1 btn btn-sm">x</button></span>`;
  tagsContainer_reelCategories.appendChild(tagElement_reelCategories);
});
        
}
//console.log("generalTags_reelCategories  ",generalTags_reelCategories);

// Event listener for input changes to check comma count dynamically
document.getElementById('input_tagsContainerSET-reelCategories').addEventListener('input', function() {
  checkCommaCount();
});
document.getElementById('clearTagsButton_tagsContainerSET-reelCategories').addEventListener('click', function() {
    const tagsInputElement = document.getElementById('input_tagsContainerSET-reelCategories');
    tagsInputElement.value = ''; // For fallback compatibility if it's a regular input field
});

let updatedRelatedProductsBool = false;


const isEligible_RelatedProductsBool = await checkMembershipAndBalance("RelatedProducts", updatedRelatedProductsBool, true);
if (isEligible_RelatedProductsBool) {
    // Proceed with the form submission or other logic
    console.log('User is eligible for the selected posts');

     updatedRelatedProductsBool = relatedProductsArray.length > 0 ? true : false;

}else{
    document.getElementById('relatedProductsArea').style.display = "none";
    updatedRelatedProductsBool = false;
}



let updatedEndingCardBool = false;

const updatedEndingCard = document.getElementById('endingCard').value;

const isEligible_updatedEndingCardBool = await checkMembershipAndBalance("EndingCard", updatedEndingCardBool, true);
if (isEligible_updatedEndingCardBool) {
    // Proceed with the form submission or other logic
    console.log('User is eligible for the selected posts');
     updatedEndingCardBool = updatedEndingCard ? true : false;

}else{
    document.getElementById('endingCardArea').style.display = "none";
    updatedEndingCardBool = false;
}



document.getElementById('reel-views').textContent = reelData.views || 0;
document.getElementById('reel-likes').textContent = reelData.likes || 0;
document.getElementById('reel-shares').textContent = reelData.shares || 0;
document.getElementById('reel-gifts').textContent = reelData.gifts.length || 0;
document.getElementById('reel-comments').textContent = reelData.comments || 0;
document.getElementById('reel-shortList').textContent = reelData.shortList || 0;
document.getElementById('reel-saved').textContent = reelData.saved || 0;
document.getElementById('reel-loves').textContent = reelData.loves || 0;

document.getElementById('reel-watchTime').textContent = formatWatchTime(reelData.watchTime || 0);
document.getElementById('reel-engagements').textContent = reelData.engagements || 0;
document.getElementById('reel-reach').textContent = reelData.reach || 0;
document.getElementById('reel-uniqueViews').textContent = reelData.uniqueViews || 0;



// Helper function to format percentage safely
function calculatePercentage(part, total) {
  if (isNaN(part) || isNaN(total) || total === 0) {
    return '0%'; // Return '0%' if part or total is NaN or total is 0
  }
  return ((part / total) * 100).toFixed(2) + '%';
}


// Populate advanced analytics
const advancedAnalyticsDiv = document.getElementById('advanceAnalytics');
advancedAnalyticsDiv.innerHTML = `
  <div class="analytics-item">
    <strong>Total Views:</strong> ${reelData.views || 0}  
    <span class="small-text">(${calculatePercentage(reelData.uniqueViews, reelData.views)} unique)</span>
  </div>
  <div class="analytics-item">
    <strong>Engagement Rate:</strong> ${calculatePercentage(reelData.engagements, reelData.reach)} 
  </div>
  <div class="analytics-item">
    <strong>Likes to Views:</strong> ${calculatePercentage(reelData.likes, reelData.views)} 
  </div>
  <div class="analytics-item">
    <strong>Shares to Views:</strong> ${calculatePercentage(reelData.shares, reelData.views)} 
  </div>
  <div class="analytics-item">
    <strong>Comments per 1,000 Views:</strong> ${(reelData.comments / (reelData.views / 1000 || 1)).toFixed(2)}
  </div>
  <div class="analytics-item">
    <strong>Gift Engagement:</strong> ${reelData.gifts.length || 0} gifts received 
  </div>
  <div class="analytics-item">
    <strong>Average Watch Time:</strong> ${formatWatchTime(Math.floor((reelData.watchTime || 0) / (reelData.views || 1)))} per view
  </div>
  <div class="analytics-item">
    <strong>Saves:</strong> ${reelData.saved || 0} <span class="small-text">(${calculatePercentage(reelData.saved, reelData.views)} save rate)</span>
  </div>
  <div class="analytics-item">
    <strong>Shortlists:</strong> ${reelData.shortList || 0}
  </div>
  <div class="analytics-item">
    <strong>Love Reactions:</strong> ${reelData.loves || 0}
  </div>
`;



        const modal = document.getElementById('main-modal-container');
        const closeBtn = document.getElementById('main-modal-close-btn');
        
        // Show the modal
        modal.style.display = 'block';

        // Close modal on 'x' button click
        closeBtn.onclick = () => {
            modal.style.display = 'none';
        };










        // Save changes button
        document.getElementById('saveChangesBtn').onclick = async () => {
     
    const tagsInput_main = document.getElementById('tagsSET-main').value.trim();
    const updatedTags = tagsInput_main ? tagsInput_main.split(",").map(item => item.toLowerCase().trim()) : [];
   
  
    const tagsInput_reelCategories = document.getElementById('input_tagsContainerSET-reelCategories').value.trim();
    const updatedReelCategories = tagsInput_reelCategories ? tagsInput_reelCategories.split(",").map(item => item.toLowerCase().trim()) : [];
    console.log("tagsInput_reelCategories  ",tagsInput_reelCategories);

    const updatedTitle = document.getElementById('videoResumeTitle').value;
    const updatedCaptions = document.getElementById('videoResumeCaptions').value;

    const updatedStatus = document.getElementById('status').value;
    const updatedReelResume = document.getElementById('reelResume').value;
    const updatedThumbnailURL = document.getElementById('thumbnailURL').value;



const updatedRelatedURL = document.getElementById('relatedURL').value;
const updatedLocation = document.getElementById('location').value;

// Set booleans based on whether values exist
const updatedRelatedURLBool = updatedRelatedURL ? true : false;
const updatedLocationBool = updatedLocation ? true : false;



 

    const updatedNotificationsBool = document.getElementById('notificationsBool').checked;

    const updatedCommentsBool = document.getElementById('commentsBool').checked;
    const updatedGiftsBool = document.getElementById('giftsBool').checked;
    const updatedViewsBool = document.getElementById('viewsBool').checked;
    const updatedLikesBool = document.getElementById('likesBool').checked;
    const updatedLovesBool = document.getElementById('lovesBool').checked;
    const updatedIsPublic = document.getElementById('isPublic').checked;





   // Get the checked status of the post types
   const updatedIsBoostedPost = document.getElementById('isBoostedPost').checked;

   const isEligible_updatedIsBoostedPost = await checkMembershipAndBalance("BoostedPost", updatedIsBoostedPost );
    if (isEligible_updatedIsBoostedPost) {
        // Proceed with the form submission or other logic
        console.log('User is eligible for the selected posts');
    }else{
        updatedIsBoostedPost = false;
        return;
    }

    const updatedIsSponsoredPost = document.getElementById('isSponsoredPost').checked;

    const isEligible_updatedIsSponsoredPost = await checkMembershipAndBalance("SponsoredPost", updatedIsSponsoredPost);
    if (isEligible_updatedIsSponsoredPost) {
        // Proceed with the form submission or other logic
        console.log('User is eligible for the selected posts');
    }else{
        updatedIsSponsoredPost = false;
        return;
    }
    


    let updatedRelatedProductsBool = false;


const isEligible_RelatedProductsBool = await checkMembershipAndBalance("RelatedProducts", updatedRelatedProductsBool, true);
if (isEligible_RelatedProductsBool) {
    // Proceed with the form submission or other logic
    console.log('User is eligible for the selected posts');

     updatedRelatedProductsBool = relatedProductsArray.length > 0 ? true : false;

if(updatedRelatedProductsBool){
  //  relatedProductsArray.push({ name: '', cost: '', link: '' });

}

}else{
    updatedRelatedProductsBool = false;
    return;
}



let updatedEndingCardBool = false;

let updatedEndingCard = document.getElementById('endingCard').value;

const isEligible_updatedEndingCardBool = await checkMembershipAndBalance("EndingCard", updatedEndingCardBool, true);
if (isEligible_updatedEndingCardBool) {
    // Proceed with the form submission or other logic
    console.log('User is eligible for the selected posts');
     updatedEndingCardBool = updatedEndingCard ? true : false;

     if(updatedEndingCardBool){
         updatedEndingCard = document.getElementById('endingCard').value;

}
}else{
    updatedEndingCardBool = false;
    return;
}





    try {
                await updateDoc(reelRef, {
                    videoResumeTitle: updatedTitle,
                    videoResumeCaptions: updatedCaptions,
                    tags: updatedTags,
            status: updatedStatus,
            location: updatedLocation,
            thumbnailURL: updatedThumbnailURL,
            reelResume: updatedReelResume,
            endingCard: updatedEndingCard,
            relatedURLBool: updatedRelatedURLBool,
            relatedProductsBool: updatedRelatedProductsBool,
            endingCardBool: updatedEndingCardBool,

            relatedURL: updatedRelatedURL,
            relatedReels: relatedReelsArray,
            reelCategories: updatedReelCategories,
            relatedProducts: relatedProductsArray,
            notifcationsBool: updatedNotificationsBool,
            commentsBool: updatedCommentsBool,
            locationBool: updatedLocationBool,
            giftsBool: updatedGiftsBool,
            viewsBool: updatedViewsBool,
            likesBool: updatedLikesBool,
            lovesBool: updatedLovesBool,
            isPublic: updatedIsPublic,
            isBoostedPost: updatedIsBoostedPost,
            isSponsoredPost: updatedIsSponsoredPost,
            timestamp: serverTimestamp() // Update timestamp
        });
        showToast('Reel updated successfully.');
                modal.style.display = 'none';
                const reelList = document.getElementById('reel-list');
    reelList.innerHTML = ''; // Clear existing content

                loadVideoReels(await getUserId()); // Refresh the reel list
            } catch (error) {
                console.error('Error updating reel:', error);
                showToast('Failed to update the reel. Please try again.');
            }
        };

        // Close modal when clicking outside content
        window.onclick = event => {
            if (event.target == modal) {
                modal.style.display = 'none';

            }
        };
    } else {
        showToast('Video reel not found.');
    }
}













const thumbnailUpload = document.getElementById('thumbnailUpload');
const thumbnailPreview = document.getElementById('thumbnailPreview');
const thumbnailURLInput = document.getElementById('thumbnailURL');
const thumbnailPreviewContainer = document.getElementById('thumbnailPreviewContainer');

// Trigger file input when clicking the preview image
thumbnailPreviewContainer.addEventListener('click', () => {
    thumbnailUpload.click();
});

// Handle file selection and upload
thumbnailUpload.addEventListener('change', async (event) => {
    const file = event.target.files[0];
    if (file && reelID) {
        const reader = new FileReader();
        reader.onload = function (e) {
            thumbnailPreview.src = e.target.result; // Set preview image source
        };
        reader.readAsDataURL(file); // Read file as data URL

        try {
            const fileName = `users/${userID}/reels/${reelID}/thumbnail/${Date.now()}_${file.name}`; // Unique file name for storage
            const storageRef = ref(storage, fileName);
            await uploadBytes(storageRef, file); // Upload file to Firebase
            const downloadURL = await getDownloadURL(storageRef); // Get the download URL
            
            thumbnailURLInput.value = downloadURL; // Store the URL in the hidden input
            alert('Thumbnail uploaded successfully.');
        } catch (error) {
            console.error('Error uploading thumbnail:', error);
            alert('Failed to upload thumbnail. Please try again.');
        }
    }
});




async function handleDelete(event) {
    const reelID = event.target.dataset.id;

    if (confirm('Are you sure you want to delete this video reel?')) {
        const reelRef = doc(db, "VideoResumes", reelID);
// Assuming reelRef is a reference to the document you want to update
await updateDoc(reelRef, { 
  isDeleted: true,
  status: "deleted"
});
        showToast('Video reel marked as deleted.');
        const reelList = document.getElementById('reel-list');
    reelList.innerHTML = ''; // Clear existing content

        loadVideoReels(await getUserId());
    }
}

</script>


    </body>
    
    
    
    </html>
      