<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Reel Account</title>
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Your ReelCareer Account">
    <meta property="og:description" content="Manage your ReelCareer account. View your balance, request payouts, check transactions, and update your membership information.">
    <meta property="og:image" content="https://reelcareer.co/images/8pic_rc.png">
    <meta property="og:url" content="https://reelcareer.co/account">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Your ReelCareer Account">
    <meta name="twitter:description" content="Manage your ReelCareer account. View your balance, request payouts, check transactions, and update your membership information.">
    <meta name="twitter:image" content="https://reelcareer.co/images/8pic_rc.png">
    <meta name="twitter:url" content="https://reelcareer.co/account">

    <!-- General Meta Tags -->
    <meta name="description" content="Access your ReelCareer account dashboard. Track your balance, manage membership, view transactions, and request payouts.">
    <meta name="keywords" content="account management, payout request, membership, balance, transactions, ReelCareer">
    <meta name="author" content="ReelCareer">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#ffffff">

    <!-- Canonical Tag for SEO -->
    <link rel="canonical" href="https://reelcareer.co/account">

    <!-- Standard Favicon -->
    <link rel="icon" type="image/x-icon" href="https://reelcareer.co/images/favicons/favicon.ico">

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "url": "https://reelcareer.co/account",
      "name": "Your ReelCareer Account",
      "description": "Manage your ReelCareer account. View your balance, request payouts, check transactions, and update your membership information.",
      "author": {
        "@type": "Organization",
        "name": "ReelCareer",
        "url": "https://reelcareer.co/"
      },
      "publisher": {
        "@type": "Organization",
        "name": "ReelCareer",
        "url": "https://reelcareer.co/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://reelcareer.co/images/8pic_rc.png",
          "width": 200,
          "height": 60
        }
      },
      "image": {
        "@type": "ImageObject",
        "url": "https://reelcareer.co/images/8pic_rc.png",
        "width": 1200,
        "height": 630
      }
    }
    </script>

    <title>Your ReelCareer Account | ReelCareer</title>
</head>


<!-- Main Script Loader -->
<script src="https://reelcareer.co/scripts/js/loader.js"></script>
<style>
  main {
    #account-page {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 1100px;
    margin: 0 auto;
}

header {
    text-align: center;
    padding: 10px 0;
}

header h1 {
    font-size: 2rem;
    color: #333;
    margin-bottom: 5px;
}

header p {
    font-size: 1rem;
    color: #666;
}

#analytics {
    margin: 20px 0;
    padding: 15px;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

#analytics h2 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #444;
}

.stats {
    display: flex;
    justify-content: space-around;
    gap: 20px;
}

.stats div {
    text-align: center;
    padding: 10px;
    border-radius: 8px;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.stats h3 {
    font-size: 1.2rem;
    color: #555;
}

.stats p {
    font-size: 1.8rem;
    font-weight: bold;
    color: #222;
}

#video-reels {
    margin-top: 30px;
}

#video-reels h2 {
    font-size: 1.6rem;
    color: #444;
    margin-bottom: 15px;
}

table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    overflow: hidden;
}

thead th {
    padding: 15px;
    background: #0056b3;
    color: #fff;
    text-align: left;
    font-size: 1rem;
}

tbody tr {
    border-bottom: 1px solid #ddd;
}

tbody td {
    padding: 12px;
    font-size: 0.95rem;
    color: #555;
}

tbody tr:nth-child(even) {
    background: #f4f4f4;
}

tbody td:last-child {
    display: flex;
    gap: 10px;
}

button.edit, button.delete {
    padding: 5px 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button.edit {
    background-color: #28a745;
    color: #fff;
}

button.delete {
    background-color: #dc3545;
    color: #fff;
}

button.edit:hover {
    background-color: #218838;
}

button.delete:hover {
    background-color: #c82333;
}

@media (max-width: 768px) {
    .stats {
        flex-direction: column;
        gap: 10px;
    }

    table {
        font-size: 0.9rem;
    }

    tbody td {
        padding: 8px;
    }
}

    .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.7);
}

.modal-content {
    background-color: #fefefe;
    margin: 10% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
    border-radius: 8px;
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}

button {
    padding: 10px 20px;
    font-size: 16px;
}

    
    
}    
  </style>
  
</head>
<body>

  <!-- Navigation Bar -->
  <nav id="Main-Nav_bar" class="navbar navbar-expand-lg main-navbar-light shadow-sm sticky-top" role="navigation">
    <div class="container d-flex align-items-center justify-content-between">
      <!-- Logo -->
      <a class="navbar-brand embossed" id="MAIN-LOGO-Reel-Career" href="https://reelcareer.co/" aria-label="Go to home page">
        ReelCareer
      </a>

      <!-- Always-visible Icons -->
      <ul class="navbar-nav d-flex flex-row justify-content-center flex-grow-1" id="iconBar">
        
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/job-listings" aria-label="Go to job listings page">
          <i class="fa fa-briefcase"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/reels" aria-label="Go to reels page">
          <i class="fa fa-video"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/views/membership" aria-label="Go to membership page">
          <i class="fa fa-user"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/views/blogs" aria-label="Go to blogs page">
          <i class="fa fa-pencil-alt"></i>
        </a>
      </li>
      </ul>

      <!-- Auth Section -->
      <div id="authSection" class="d-flex align-items-center"><button class="btn btn-primary" id="loginButton">Login / Create Account</button></div>
    </div>
  </nav>



   <!-- Breadcrumb Section -->

<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
      <li id="lastBreadcrumb_home" class="breadcrumb-item"><a href="https://reelcareer.co/">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Video Reel Account</li>
  </ol>
</nav>

    <!-- Main Content Section -->
    <main id="main-content">

        <div id="account-page">
            <header>
                <h1>Your Video Reels</h1>
                <p>Manage and track your video resume performance.</p>
            </header>
            <section id="analytics">
                <h2>Analytics</h2>
                <div class="stats">
                    <div>
                        <h3>Total Views</h3>
                        <p id="total-views">0</p>
                    </div>
                    <div>
                        <h3>Total Likes</h3>
                        <p id="total-likes">0</p>
                    </div>
                    <div>
                        <h3>Total Shares</h3>
                        <p id="total-shares">0</p>
                    </div>
                </div>
            </section>
            <section id="video-reels">
                <h2>Your Reels</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Video</th>
                            <th>Tags</th>
                            <th>Status</th>
                            <th>Views</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="reel-list">
                        <!-- Reels will be dynamically loaded here -->
                    </tbody>
                </table>
            </section>
        </div>

<!-- Edit Modal -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Edit Video Reel</h2>
        <form id="editReelForm">
            <label for="videoResumeCaptions">Captions</label>
            <textarea id="videoResumeCaptions" name="videoResumeCaptions" rows="3"></textarea>

            <label for="tags">Tags (comma-separated)</label>
            <input type="text" id="tags" name="tags" />

            <label for="status">Status</label>
            <select id="status" name="status">
                <option value="posted">Posted</option>
                <option value="draft">Draft</option>
                <option value="archived">Archived</option>
            </select>

            <button type="button" id="saveChangesBtn">Save Changes</button>
        </form>
    </div>
</div>


      </main>
      
      <script>



</script>


   <!-- Footer -->
   <footer id="dynamic-footer">
    <div class="footerMainContainer text-center">
    <p class="footerSocialMedia"></p>
    <nav class="footerNavContainer">
    
    <div class="footerNavItems">
    <h5>General</h5>
    <a href="/" title="ReelCareer - #1 Job Board - Find a job today">ReelCareer</a><a href="/views/about" title="About ReelCareer - Who We Are and Our Mission">About ReelCareer</a><a href="/views/contact" title="Contact ReelCareer - Get in Touch for Support and Inquiries">Contact Us</a><a href="/job-listings" title="Job Listings - Search and Apply for Job Openings">Job Listings</a><a href="/membership" title="Membership - Unlock Premium Features and Job Opportunities">Membership</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Legal</h5>
    <a href="/views/privacy" title="Privacy Policy - How We Protect Your Data">Privacy Policy</a><a href="/views/terms" title="Terms of Use - Website User Agreement and Guidelines">Terms of Use</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Content</h5>
    <a href="/views/blogs" title="ReelCareer Blog - Career Advice, News, and Insights">Blogs</a><a href="/views/news" title="ReelCareer News - Latest Updates and Industry Trends">News</a><a href="/views/Personality-&-Trait-Tests" title="Personality & Trait Tests - Discover Your Strengths and Work Style">Personality & Trait Tests</a><a href="/reels" title="Video Reels - Showcase Your Resume with a Personal Touch">Video Reels</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Support</h5>
    <a href="/views/faq" title="Frequently Asked Questions - Get Answers to Common Queries">FAQs</a><a href="/bot" title="Chat Bot - Get Instant Assistance with Your Job Search">Chat Bot</a><a href="/support" title="Support - Get Help with Your Job Search and Account">Support</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Marketing</h5>
    <a href="/views/referral" title="Join the ReelCareer Affiliate Program and Earn Rewards">Affiliate Program</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Admin</h5>
    <a href="/backend/dashboard" title="Admin Dashboard - Manage Users, Jobs, and Content">Admin</a>
    </div>
    
    <div class="footerNavItems">
    <h5>Features</h5>
    <a href="/jobs/city" title="City Jobs - Find Career Opportunities by Location">City Jobs</a><a href="/jobs/state" title="State Jobs - Explore Job Listings by State">State Jobs</a><a href="/jobs/locations" title="Job Locations - Browse Jobs in Your Area">Job Locations</a>
    </div>
    </nav>
    <p class="footerCopyWrite">© 2024 ReelCareer</p>
    
    </div>
    <button id="backToTop" title="Go to top">↑</button>
    
    </footer>
    
    
    
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"></script> <!-- For fetching IP -->


    

        <!-- Include Firebase SDK as a module -->
<script type="module">
    import {
        db, getStorage, ref, uploadBytes, getDownloadURL, limit,
  doc, arrayUnion, RecaptchaVerifier, increment, getDoc, arrayRemove, signInWithPhoneNumber,
  query, updateDoc, setDoc, addDoc, signInAnonymously, orderBy, onAuthStateChanged,
  uploadBytesResumable, signInWithPopup, FacebookAuthProvider, GoogleAuthProvider, startAfter,
  OAuthProvider, signOut, deleteDoc, getFirestore, serverTimestamp,
  createUserWithEmailAndPassword, signInWithEmailAndPassword, deleteObject,
  where, getDocs, storage, getAuth, collection, auth, analytics,
  googleProvider,onSnapshot , linkWithCredential, EmailAuthProvider ,
  getUserId // Export the function
    } from 'https://reelcareer.co/scripts/js/load/module.js';

    
        // Listen for authentication state changes to get the user ID
        let userID = '';
        let pageID = '';
        let pageName = '';
        document.addEventListener('DOMContentLoaded', async () => {
    try {
        const userID = await getUserId(); // Ensure user ID is fetched
        if (!userID) {
            console.warn('No user ID found. Redirecting to login...');
            window.location.href = '/login';
            return;
        }

        // Load user video reels
        loadVideoReels(userID);

        // Fetch analytics data
        loadAnalytics(userID);
    } catch (error) {
        console.error("Error loading account page:", error);
    }
});

async function loadVideoReels(userID) {

    console.log("userID  ",userID);

    const reelList = document.getElementById('reel-list');
    reelList.innerHTML = ''; // Clear existing content

    //userID
    const reelsQuery = query(collection(db, "VideoResumes"), where("createdByID", "==", userID));
    const querySnapshot = await getDocs(reelsQuery);

    querySnapshot.forEach(doc => {
        const reel = doc.data();
        const row = `
            <tr>
                <td><a href="${reel.videoResumeURL}" target="_blank">View Video</a></td>
                <td>${reel.tags.join(', ') || 'N/A'}</td>
                <td>${reel.status}</td>
                <td>${reel.views}</td>
                <td>
                    <button class="btn edit-btn" data-id="${doc.id}">Edit</button>
                    <button class="btn delete-btn" data-id="${doc.id}">Delete</button>
                </td>
            </tr>
        `;
        reelList.innerHTML += row;
    });

    // Attach event listeners for edit and delete buttons
    document.querySelectorAll('.edit-btn').forEach(btn => btn.addEventListener('click', handleEdit));
    document.querySelectorAll('.delete-btn').forEach(btn => btn.addEventListener('click', handleDelete));
}

async function loadAnalytics(userID) {
    const reelsQuery = query(collection(db, "VideoResumes"), where("createdByID", "==", userID));
    const querySnapshot = await getDocs(reelsQuery);

    let totalViews = 0, totalLikes = 0, totalShares = 0;

    querySnapshot.forEach(doc => {
        const reel = doc.data();
        totalViews += reel.views || 0;
        totalLikes += reel.likes || 0;
        totalShares += reel.shares || 0;
    });

    document.getElementById('total-views').textContent = totalViews;
    document.getElementById('total-likes').textContent = totalLikes;
    document.getElementById('total-shares').textContent = totalShares;
}

async function handleEdit(event) {
    const reelID = event.target.dataset.id;

    const reelRef = doc(db, "VideoResumes", reelID);
    const reelSnap = await getDoc(reelRef);

    if (reelSnap.exists()) {
        const reelData = reelSnap.data();
        
        // Populate modal with reel data
        document.getElementById('videoResumeCaptions').value = reelData.videoResumeCaptions || '';
        document.getElementById('tags').value = reelData.tags ? reelData.tags.join(', ') : '';
        document.getElementById('status').value = reelData.status || 'posted';

        const modal = document.getElementById('editModal');
        const closeBtn = document.querySelector('.close');
        
        // Show the modal
        modal.style.display = 'block';

        // Close modal on 'x' button click
        closeBtn.onclick = () => {
            modal.style.display = 'none';
        };

        // Save changes button
        document.getElementById('saveChangesBtn').onclick = async () => {
            const updatedCaptions = document.getElementById('videoResumeCaptions').value;
            const updatedTags = document.getElementById('tags').value.split(',').map(tag => tag.trim());
            const updatedStatus = document.getElementById('status').value;

            try {
                await updateDoc(reelRef, {
                    videoResumeCaptions: updatedCaptions,
                    tags: updatedTags,
                    status: updatedStatus
                });
                alert('Reel updated successfully.');
                modal.style.display = 'none';
                loadVideoReels(await getUserId()); // Refresh the reel list
            } catch (error) {
                console.error('Error updating reel:', error);
                alert('Failed to update the reel. Please try again.');
            }
        };

        // Close modal when clicking outside content
        window.onclick = event => {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        };
    } else {
        alert('Video reel not found.');
    }
}


async function handleDelete(event) {
    const reelID = event.target.dataset.id;

    if (confirm('Are you sure you want to delete this video reel?')) {
        const reelRef = doc(db, "VideoResumes", reelID);
        await updateDoc(reelRef, { isDeleted: true }); // Soft delete
        alert('Video reel marked as deleted.');
        loadVideoReels(await getUserId());
    }
}

</script>


    </body>
    
    
    
    </html>
      