<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <title>Content Management</title>


<!-- Quill CSS -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<!-- Quill JS -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>


      <!-- Custom CSS -->
      <style>
  
  

        #contentList {
            display: none; /* Initially hidden */
            max-height: 400px; /* Set a max-height to make it scrollable */
            overflow-y: auto;
            margin-top: 20px;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        /* Scroll-to-top button */
        #scrollTopBtn {
            display: none; /* Initially hidden */
            position: fixed;
            bottom: 40px;
            right: 40px;
            z-index: 99;
            font-size: 18px;
            border: none;
            outline: none;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }

        #scrollTopBtn:hover {
            background-color: #0056b3;
        }

        .toggle-btn {
            background-color: #28a745;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .toggle-btn:hover {
            background-color: #218838;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
    </style>  
<script src="../public/js/scripts.js"></script>
<script src="../public/js/loadScripts.js"></script>

</head>


<body>
    <script src="../public/js/bodyload.js"></script>
    
    <nav2 class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Reelcareer Admin</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="dashboard.html">Dashboard</a></li>
                <li class="nav-item"><a class="nav-link" href="user-management.html">User Management</a></li>
                <li class="nav-item"><a class="nav-link" href="job-management.html">Job Management</a></li>
                <li class="nav-item"><a class="nav-link" href="application-management.html">Application Management</a></li>
                <li class="nav-item"><a class="nav-link" href="content-management.html">Content Management</a></li>
                <li class="nav-item"><a class="nav-link" href="settings.html">Settings</a></li>
                <li class="nav-item"><a class="nav-link" href="analytics.html">Analytics</a></li>
                <li class="nav-item"><a class="nav-link" href="chatbot.html">Chatbot</a></li>
                <li class="nav-item"><a class="nav-link" href="support.html">Support</a></li>
            </ul>
        </div>
    </nav2>

    <div class="container mt-4">
        <h1>Content Management</h1>
    
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    
    <!-- Toggle Buttons for Content Types -->
    <div class="btn-group mb-3" role="group">
        <button type="button" class="btn btn-secondary" onclick="toggleSection('newsSection')">Manage News Articles</button>
        <button type="button" class="btn btn-secondary" onclick="toggleSection('blogSection')">Manage Blog Posts</button>
        <button type="button" class="btn btn-secondary" onclick="toggleSection('faqsSection')">Manage FAQs</button>
    </div>
    
        <!-- News Article Form -->
        <div id="newsSection" class="content-section" style="display:none;">
            <h2>Manage News Articles <i class="fas fa-question-circle" data-toggle="tooltip" title="Add and manage news articles here."></i></h2>
            <form id="newsForm">
                <div class="form-group">
                    <label for="newsTitle">Title <i class="fas fa-question-circle" data-toggle="tooltip" title="Enter the title of the news article."></i></label>
                    <input type="text" class="form-control" id="newsTitle" required>
                </div>
                <div class="form-group">
                    <label for="newsContent">Content <i class="fas fa-question-circle" data-toggle="tooltip" title="Write the content of the news article."></i></label>
                    <!-- Replace the textarea with a div for Quill -->
                    <div id="newsEditor" style="height: 200px;"></div>
                    <input type="hidden" id="newsContent" name="newsContent" required>
                </div>
                <div class="form-group">
                    <label for="newsSource">Source <i class="fas fa-question-circle" data-toggle="tooltip" title="Enter the source of the news article with URL."></i></label>
                    <input type="text" class="form-control" id="newsSource" placeholder="Title" required>
                    <input type="url" class="form-control mt-2" id="newsUrl" placeholder="URL" required>
                </div>
                <div class="form-group">
                    <label for="newsImage">Upload Image <i class="fas fa-question-circle" data-toggle="tooltip" title="Upload an image for the news article."></i></label>
                    <input type="file" class="form-control" id="newsImage" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label for="newsPostDate">Post Date <i class="fas fa-question-circle" data-toggle="tooltip" title="Select the date when the news article will be posted."></i></label>
                    <input type="date" class="form-control" id="newsPostDate" required>
                </div>
                <div class="form-group">
                    <label for="newsActivate">Activate <i class="fas fa-question-circle" data-toggle="tooltip" title="Choose whether to activate this article."></i></label>
                    <select class="form-control" id="newsActivate">
                        <option value="true">Yes</option>
                        <option value="false">No</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="newsPostedBy">Posted By <i class="fas fa-question-circle" data-toggle="tooltip" title="Select the person posting the article."></i></label>
                    <select class="form-control" id="newsPostedBy" required>
                        <option value="" disabled selected>Select a person</option>
                        <option value="Web Dev">Web Dev</option>
                        <option value="Mod Team">Mod Team</option>
                        <option value="ReelCareer">ReelCareer</option>
                        <option value="Help Desk">Help Desk</option>
                        <!-- Add more options as needed -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="newsPostedById">Posted By ID <i class="fas fa-question-circle" data-toggle="tooltip" title="Select the ID of the person posting the article."></i></label>
                    <select class="form-control" id="newsPostedById" required>
                        <option value="" disabled selected>Select an ID</option>
                        <option value="0000">ID 1</option>
                        <option value="1111">ID 2</option>
                        <option value="2222">ID 3</option>
                        <option value="3333">ID 4</option>
                        <!-- Add more options as needed -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="newsTags">Tags (comma-separated):</label>
    <input type="text" id="newsTags" placeholder="Enter tags">
    </div>      
                <div class="form-group">
                    <label for="newsCategory">Category <i class="fas fa-question-circle" data-toggle="tooltip" title="Select a category for the news article."></i></label>
                    <select class="form-control" id="newsCategory" required>
                        <option value="" disabled selected>Select a category</option>
                        <option value="Job Postings">Job Postings</option>
                        <option value="Career Advice">Career Advice</option>
                        <option value="Industry News">Industry News</option>
                        <option value="Event Updates">Event Updates</option>
                        <option value="Success Stories">Success Stories</option>
                        <option value="Company News">Company News</option>
                        <option value="JobMarket Trends">Job Market Trends</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="newsImageCaption">Image Caption <i class="fas fa-question-circle" data-toggle="tooltip" title="Enter a caption for the associated image."></i></label>
                    <input type="text" class="form-control" id="newsImageCaption">
                </div>
                <button type="submit" class="btn btn-primary">Save News Article</button>
                <button type="reset" class="btn btn-secondary">Reset</button>
            </form>
        </div>
    
        <!-- Blog Post Form -->
        <div id="blogSection" class="content-section" style="display:none;">
            <h2>Manage Blog Posts <i class="fas fa-question-circle" data-toggle="tooltip" title="Add and manage blog posts here."></i></h2>
            <form id="blogForm">
                <div class="form-group">
                    <label for="blogTitle">Title <i class="fas fa-question-circle" data-toggle="tooltip" title="Enter the title of the blog post."></i></label>
                    <input type="text" class="form-control" id="blogTitle" required>
                </div>
                <div class="form-group">
                    <label for="blogContent">Content <i class="fas fa-question-circle" data-toggle="tooltip" title="Write the content of the blog post."></i></label>
                    <!-- Replace the textarea with a div for Quill -->
                    <div id="blogEditor" style="height: 200px;"></div>
                    <input type="hidden" id="blogContent" name="blogContent" required>
                </div>
                <div class="form-group">
                    <label for="blogImage">Upload Image <i class="fas fa-question-circle" data-toggle="tooltip" title="Upload an image for the blog post."></i></label>
                    <input type="file" class="form-control" id="blogImage" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label for="blogPostDate">Post Date <i class="fas fa-question-circle" data-toggle="tooltip" title="Select the date when the blog post will be published."></i></label>
                    <input type="date" class="form-control" id="blogPostDate" required>
                </div>
                <div class="form-group">
                    <label for="blogActivate">Activate <i class="fas fa-question-circle" data-toggle="tooltip" title="Choose whether to activate this post."></i></label>
                    <select class="form-control" id="blogActivate">
                        <option value="true">Yes</option>
                        <option value="false">No</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="blogPostedBy">Posted By <i class="fas fa-question-circle" data-toggle="tooltip" title="Select the person posting the blog."></i></label>
                    <select class="form-control" id="blogPostedBy">
                        <option value="" disabled selected>Select an admin</option>
                        <option value="Web Dev">Web Dev</option>
                        <option value="Mod Team">Mod Team</option>
                        <option value="ReelCareer">ReelCareer</option>
                        <option value="Team Job Seeker">Team Job Seeker</option>
                        <option value="Team Promos">Team Promos</option>
                        <option value="Team Recruiter">Team Recruiter</option>
                        <option value="Help Desk">Help Desk</option>
                        <!-- Add more options as needed -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="blogPostedById">Posted By ID <i class="fas fa-question-circle" data-toggle="tooltip" title="Select the ID of the person posting the blog."></i></label>
                    <select class="form-control" id="blogPostedById">
                        <option value="" disabled selected>Select an ID</option>
                        <option value="0000">ID 1</option>
                        <option value="1111">ID 2</option>
                        <option value="2222">ID 3</option>
                        <option value="3333">ID 4</option>
                        <!-- Add more options as needed -->
                    </select>
                </div>
                          <div class="form-group">
                    <label for="blogCategory">Category <i class="fas fa-question-circle" data-toggle="tooltip" title="Select a category for the blog post."></i></label>
                    <select class="form-control" id="blogCategory" required>
                        <option value="" disabled selected>Select a category</option>
                        <option value="Career Advice">Career Advice</option>
                        <option value="Interview Tips">Interview Tips</option>
                        <option value="Resume Writing">Resume Writing</option>
                        <option value="JobSearch Strategies">Job Search Strategies</option>
                    </select>
                </div>
                <div class="form-group">
                <label for="blogTags">Tags (comma-separated):</label>
<input type="text" id="blogTags" placeholder="Enter tags">
</div>
                <div class="form-group">
                    <label for="blogImageCaption">Image Caption <i class="fas fa-question-circle" data-toggle="tooltip" title="Enter a caption for the associated image."></i></label>
                    <input type="text" class="form-control" id="blogImageCaption">
                </div>
                <button type="submit" class="btn btn-primary">Save Blog Post</button>
                <button type="reset" class="btn btn-secondary">Reset</button>
            </form>
        </div>


    <!-- FAQs Section -->
    <div id="faqsSection" class="content-section" style="display:none;">
        <h2>Manage FAQs <i class="fas fa-question-circle" data-toggle="tooltip" title="Add and manage FAQs here."></i></h2>
        <form id="faqsForm">
            <div class="form-group">
                <label for="faqQuestion">Question <i class="fas fa-question-circle" data-toggle="tooltip" title="Enter the question for the FAQ."></i></label>
                <input type="text" class="form-control" id="faqQuestion" required>
            </div>
            <div class="form-group">
                <label for="faqAnswer">Answer <i class="fas fa-question-circle" data-toggle="tooltip" title="Provide the answer to the FAQ."></i></label>
                <textarea class="form-control" id="faqAnswer" rows="5" required></textarea>
            </div>
            <div class="form-group">
                <label for="newsTags">Tags (comma-separated):</label>
                <input type="text" id="newsTags" placeholder="Enter tags">                
                </div>
            <div class="form-group">
                <label for="faqCategory">Category <i class="fas fa-question-circle" data-toggle="tooltip" title="Select a category for the FAQ."></i></label>
                <select class="form-control" id="faqCategory" required>
                    <option value="" disabled selected>Select a category</option>
                    <option value="General">General</option>
                    <option value="Technical">Technical</option>
                    <option value="Billing">Billing</option>
                    <option value="Account">Account</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Save FAQ</button>
            <button type="reset" class="btn btn-secondary">Reset</button>
        </form>
    </div>


<!-- Modal for Creating New Post -->
<div id="newPostModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 id="newPostModalTitle" class="modal-title">Create New Post</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="eventForm">
                    <div class="form-group">
                        <label for="postType">Post Type</label>
                        <select id="postType" class="form-control">
                            <option value="blog">Blog</option>
                            <option value="news">News</option>
                            <option value="event">Event</option>
                        </select>
                    </div>


                    <div class="form-group">
                        <label for="postTitle">Title</label>
                        <input type="text" class="form-control" id="postTitle" placeholder="Enter title">
                    </div>
                    <div class="form-group">
                        <label for="eventContent">Content <i class="fas fa-question-circle" data-toggle="tooltip" title="Write the content of the blog post."></i></label>
                        <!-- Replace the textarea with a div for Quill -->
                        <div id="eventEditor" style="height: 200px;"></div>
                        <input type="hidden" id="eventContent" name="eventContent" required>
                    </div>
                    <div class="form-group">
                        <label for="eventImage">Upload Image <i class="fas fa-question-circle" data-toggle="tooltip" title="Upload an image for the news article."></i></label>
                        <input type="file" class="form-control" id="eventImage" accept="image/*" required>
                    </div>
                    <div class="form-group">
                        <label for="eventPostDate">Post Date <i class="fas fa-question-circle" data-toggle="tooltip" title="Select the date when the blog post will be published."></i></label>
                        <input type="date" class="form-control" id="eventPostDate" required>
                    </div>
                    <div class="form-group">
                        <label for="eventTags">Tags (comma-separated):</label>
        <input type="text" id="eventTags" placeholder="Enter tags">
        </div>
                    <input type="hidden" id="newPostModalDate">
                    <button type="submit" class="btn btn-primary">Create Post</button>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    /* Calendar Day Styles */
.calendar-day {
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}
.calendar-day:hover {
    background-color: #f0f8ff;
    transform: scale(1.05);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Post Type Colors */
.blog {
    background-color: #ffeb3b;
}
.news {
    background-color: #4caf50;
}
.event {
    background-color: #f44336;
}

/* Modal Styles */
.modal .modal-header {
    background-color: #007bff;
    color: white;
}

.modal .modal-body {
    background-color: #f8f9fa;
}

/* Form Customization */
#newPostForm .form-control {
    border-radius: 4px;
    box-shadow: none;
    transition: box-shadow 0.2s;
}

#newPostForm .form-control:focus {
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    border-color: #007bff;
}
</style>

<div id="calendar"></div>

    
<div id="viewContent">
        <div class="form-group">
            <label for="searchContent">Search Content</label>
            <input type="text" class="form-control" id="searchContent" placeholder="Search articles, blogs, FAQs..." onkeyup="filterContent()">
        </div>





        <div class="container mt-5">
            <h2>Existing Content</h2>
            <button id="toggleContentBtn" class="toggle-btn">Show Content</button>
    
            <!-- Scrollable content list -->
            <div id="contentList">
                <!-- Dynamically filled content will go here -->
                <ul class="list-group">
                    <li class="list-group-item">Content Item 1</li>
                    <li class="list-group-item">Content Item 2</li>
                    <li class="list-group-item">Content Item 3</li>
                    <li class="list-group-item">Content Item 4</li>
                    <li class="list-group-item">Content Item 5</li>
                    <li class="list-group-item">Content Item 6</li>
                    <li class="list-group-item">Content Item 7</li>
                    <li class="list-group-item">Content Item 8</li>
                    <li class="list-group-item">Content Item 9</li>
                    <li class="list-group-item">Content Item 10</li>
                </ul>
            </div>
    
            <!-- Scroll to Top Button -->
            <button id="scrollTopBtn" title="Scroll to top">
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>


    </div>
    
</div>


   
            <div class="modal-body" id="modalContentBody">
                <img id="modalImage" src="" alt="Content Image" class="img-fluid mb-3" style="display:none;">
                <hr>
                <div class="form-group">
                    <label for="modalTextContent">Content <i class="fas fa-question-circle" data-toggle="tooltip" title="Update post."></i></label>
                    <!-- Replace the textarea with a div for Quill -->
                    <div id="updateEditor" style="height: 200px;"></div>
                    <input type="hidden" id="modalTextContent" name="modalTextContent" required>
                </div>


            </div>



            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" id="deleteArticle">Delete</button>
                <button type="button" class="btn btn-primary" id="updateArticle">Update</button>
            </div>
            
        </div>
    </div>
</div>



<!-- HTML: Calendar Modal -->
<div id="calendarModal" class="modal">
    <div class="modal-content">
        <h4>Select Post Type</h4>
        <p>Do you want to add a News, Blog, or Post?</p>
        <button id="addNewsBtn" class="btn">News</button>
        <button id="addBlogBtn" class="btn">Blog</button>
        <button id="addPostBtn" class="btn">Event</button>
    </div>
</div>

<!-- HTML: Hidden Date Inputs for Blog and News -->
<input type="hidden" id="newsPostDate">
<input type="hidden" id="blogPostDate">







<!-- Modal for displaying content -->
<div class="modal fade hide" id="contentModal" tabindex="-1" role="dialog" aria-labelledby="contentModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="contentModalLabel"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            
            <div class="modal-body" id="modalContentBody">
                <img id="modalImage" src="" alt="Content Image" class="img-fluid mb-3" style="display:none;">
                <hr>
                <div class="form-group">
                    <label for="modalTextContent">Content <i class="fas fa-question-circle" data-toggle="tooltip" title="Update post."></i></label>
                    <!-- Replace the textarea with a div for Quill -->
                    <div id="updateEditor" style="height: 200px;"></div>
                    <input type="hidden" id="modalTextContent" name="modalTextContent" required>
                </div>


            </div>



            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" id="deleteArticle">Delete</button>
                <button type="button" class="btn btn-primary" id="updateArticle">Update</button>
            </div>
            
        </div>
    </div>
</div>



    <!-- Footer -->
    <footer id="dynamic-footer"></footer>
    <script>





     // Toggle content visibility
     const toggleBtn = document.getElementById('toggleContentBtn');
        const contentList = document.getElementById('contentList');
        let isVisible = false;

        toggleBtn.addEventListener('click', () => {
            isVisible = !isVisible;
            if (isVisible) {
                contentList.style.display = 'block';
                toggleBtn.textContent = 'Hide Content';
            } else {
                contentList.style.display = 'none';
                toggleBtn.textContent = 'Show Content';
            }
        });

        // Scroll to top button functionality
        const scrollTopBtn = document.getElementById('scrollTopBtn');

        // Show button when scrolling down 100px
        window.onscroll = function () {
            if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                scrollTopBtn.style.display = 'block';
            } else {
                scrollTopBtn.style.display = 'none';
            }
        };

        // Scroll to top when the button is clicked
        scrollTopBtn.addEventListener('click', () => {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        });


        // Initialize Quill editors for news and blog sections
        const newsEditor = new Quill('#newsEditor', {
    theme: 'snow',
    modules: {
        toolbar: [
            [{ 'header': [1, 2, 3, false] }],          // Header sizes for structure
            ['bold', 'italic', 'underline', 'strike'], // Basic formatting options
            [{ 'list': 'ordered' }, { 'list': 'bullet' }], // Ordered and unordered lists
            ['link', 'image', 'video'],                 // Insert link, image, and video
            [{ 'color': [] }, { 'background': [] }],    // Text and background colors
            ['blockquote', 'code-block'],                // Quote and code block options
            ['clean']                                    // Clear formatting option
        ]
    }
});

const blogEditor = new Quill('#blogEditor', {
    theme: 'snow',
    modules: {
        toolbar: [
            [{ 'header': [1, 2, 3, false] }],          // Header sizes for structure
            ['bold', 'italic', 'underline', 'strike'], // Basic formatting options
            [{ 'list': 'ordered' }, { 'list': 'bullet' }], // Ordered and unordered lists
            ['link', 'image', 'video'],                 // Insert link, image, and video
            [{ 'color': [] }, { 'background': [] }],    // Text and background colors
            ['blockquote', 'code-block'],                // Quote and code block options
            ['clean']                                    // Clear formatting option
        ]
    }
});


const eventEditor = new Quill('#eventEditor', {
    theme: 'snow',
    modules: {
        toolbar: [
            [{ 'header': [1, 2, 3, false] }],          // Header sizes for structure
            ['bold', 'italic', 'underline', 'strike'], // Basic formatting options
            [{ 'list': 'ordered' }, { 'list': 'bullet' }], // Ordered and unordered lists
            ['link', 'image', 'video'],                 // Insert link, image, and video
            [{ 'color': [] }, { 'background': [] }],    // Text and background colors
            ['blockquote', 'code-block'],                // Quote and code block options
            ['clean']                                    // Clear formatting option
        ]
    }
});




        // Save content from Quill editor to hidden input before form submission
        $('#newsForm').on('submit', function() {
            $('#newsContent').val(newsEditor.root.innerHTML); // Set the content
        });

        $('#blogForm').on('submit', function() {
            $('#blogContent').val(blogEditor.root.innerHTML); // Set the content
        });
        $('#eventForm').on('submit', function() {
            $('#eventContent').val(eventEditor.root.innerHTML); // Set the content
        });


        function filterContent() {
    const input = document.getElementById('searchContent');
    const filter = input.value.toLowerCase();
    const contentDiv = document.getElementById('contentList');
    const contentItems = contentDiv.getElementsByTagName('div');

    for (let i = 0; i < contentItems.length; i++) {
        const title = contentItems[i].getElementsByTagName('h5')[0];
        if (title) {
            const txtValue = title.textContent || title.innerText;
            contentItems[i].style.display = txtValue.toLowerCase().includes(filter) ? "" : "none";
        }
    }
}


$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});

        // Toggle sections visibility
        function toggleSection(sectionId) {
            $('.content-section').hide(); // Hide all sections
            $('#' + sectionId).show();    // Show selected section
        }
    </script>

    <!-- Firebase configuration/ Login & Out -->
    <script type="module" src="../public/js/main.js"></script>

<!-- Bootstrap JS and dependencies -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script type="module">
     import { db, storage, analytics, app, auth  } from '../public/js/main.js'; // Adjust the path based on your structure
     import { deleteDoc, doc, updateDoc, query, where, orderBy, limit,  collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";
     import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-storage.js"; // Import required functions

      



            // Function to upload image to Firebase Storage

function uploadImage(file) { 
    return new Promise((resolve, reject) => {
        const storageRef = ref(storage, 'images/' + file.name); // Use ref() instead of storage.ref()
        const task = uploadBytes(storageRef, file); // Use uploadBytes to upload the file

        task.then(snapshot => {
            console.log('Upload successful!');

            // Get the download URL
            getDownloadURL(snapshot.ref).then(downloadURL => {
                resolve(downloadURL);
            }).catch(err => {
                reject(err);
            });
        }).catch(err => {
            reject(err);
        });
    });
}
            // Handle form submission for news articles
           // Handle form submission for news
document.getElementById('newsForm').addEventListener('submit', async function(event) {
    event.preventDefault();
    const file = document.getElementById('newsImage').files[0];
    try {
        const imageUrl = await uploadImage(file);
     // Get a reference to the 'FAQs' collection
     const NewsCollection = collection(db, 'News');

// Add a new document to the 'FAQs' collection
await addDoc(NewsCollection, {
    title: document.getElementById('newsTitle').value,
    content: document.getElementById('newsContent').value,
    postDate: document.getElementById('newsPostDate').value,
    activate: document.getElementById('newsActivate').value === 'true',
    postedBy: document.getElementById('newsPostedBy').value,
    postedById: document.getElementById('newsPostedById').value,
    category: document.getElementById('newsCategory').value,
    imageUrl: imageUrl,
    imageCaption: document.getElementById('newsImageCaption').value,
    likes: 0,
    loves: 0,
    helpful: 0,
    viewCount: 0,
    tags: document.getElementById('newsTags').value.split(',').map(tag => tag.trim()) // Process tags as an array
});

        alert('News article saved successfully!');
        document.getElementById('newsForm').reset();
    } catch (error) {
        console.error('Error adding document: ', error);
    }
});

// Handle form submission for blog posts
document.getElementById('blogForm').addEventListener('submit', async function(event) {
    event.preventDefault();
    const file = document.getElementById('blogImage').files[0];
    try {
        const imageUrl = await uploadImage(file);
        // Get a reference to the 'FAQs' collection
        const blogCollection = collection(db, 'Blogs');

        // Add a new document to the 'FAQs' collection
        await addDoc(blogCollection, {
    title: document.getElementById('blogTitle').value,
    content: document.getElementById('blogContent').value,
    postDate: document.getElementById('blogPostDate').value,
    activate: document.getElementById('blogActivate').value === 'true',
    postedBy: document.getElementById('blogPostedBy').value,
    postedById: document.getElementById('blogPostedById').value,
    category: document.getElementById('blogCategory').value,
    imageUrl: imageUrl,
    imageCaption: document.getElementById('blogImageCaption').value,
    likes: 0,
    loves: 0,
    helpful: 0,
    viewCount: 0,
    tags: document.getElementById('blogTags').value.split(',').map(tag => tag.trim()) // Process tags as array
});

        alert('Blog post saved successfully!');
        document.getElementById('blogForm').reset();
    } catch (error) {
        console.error('Error adding document: ', error);
    }
});

// Handle form submission for FAQs
document.getElementById('faqsForm').addEventListener('submit', async function(event) {
    event.preventDefault();
    try {
        // Get a reference to the 'FAQs' collection
        const faqsCollection = collection(db, 'FAQs');

        // Add a new document to the 'FAQs' collection
        await addDoc(faqsCollection, {
    question: document.getElementById('faqQuestion').value,
    answer: document.getElementById('faqAnswer').value,
    category: document.getElementById('faqCategory').value,
    helpful: 0,
    activate: true,
    tags: document.getElementById('faqTags').value.split(',').map(tag => tag.trim()) // Process tags as an array
});

        alert('FAQ saved successfully!');
         document.getElementById('faqsForm').reset(); // Uncomment if you want to reset the form
    } catch (error) {
        console.error('Error adding document: ', error);
    }
});

document.addEventListener('DOMContentLoaded', function() {
    // Get the forms
    const newsForm = document.getElementById('newsForm');
    const blogForm = document.getElementById('blogForm');
    const faqForm = document.getElementById('faqsForm');
    const eventForm = document.getElementById('eventForm');

    // Function to reset form fields, excluding date input
    function resetFormFields(form) {
        form.querySelectorAll('input, textarea').forEach(function(input) {
            if (input.type !== 'date') {
                input.value = ''; // Clear input
            } else {
                input.value = new Date().toISOString().split('T')[0]; // Reset date to today
            }
        });
    }

    // Add event listener for the news form reset
    eventForm.addEventListener('reset', function() {
        resetFormFields(eventForm);
    });
        // Add event listener for the news form reset
    newsForm.addEventListener('reset', function() {
        resetFormFields(newsForm);
    });

    // Add event listener for the blog form reset
    blogForm.addEventListener('reset', function() {
        resetFormFields(blogForm);
    });

    // Add event listener for the FAQ form reset
    faqForm.addEventListener('reset', function() {
        resetFormFields(faqForm);
    });
});

        // Load existing content
      
 // Remove existing event listeners before adding new ones
 function clearAndAddEventListeners(date) {
    // Remove existing event listeners from calendar days
    document.querySelectorAll('.calendar-day').forEach(dayElement => {
        const newElement = dayElement.cloneNode(true); // Clone element to remove listeners
        dayElement.parentNode.replaceChild(newElement, dayElement); // Replace with a clean copy
    });

    // Re-add event listeners to calendar days
    document.querySelectorAll('.calendar-day').forEach(dayElement => {
        dayElement.addEventListener('click', function () {
            const selectedDate = this.dataset.date;
            showPostTypeModal(selectedDate);
        });
    });

    // Remove existing event listeners from buttons
    const newsBtn = document.getElementById('addNewsBtn');
    const blogBtn = document.getElementById('addBlogBtn');
    const postBtn = document.getElementById('addPostBtn');

    newsBtn.replaceWith(newsBtn.cloneNode(true)); // Remove listeners
    blogBtn.replaceWith(blogBtn.cloneNode(true)); // Remove listeners
    postBtn.replaceWith(postBtn.cloneNode(true)); // Remove listeners

   }



async function loadContent() {
    const contentList = document.getElementById('contentList');
    contentList.innerHTML = ''; // Clear existing content
console.log("????????????????????//");
    try {
        // Fetch and Render News, Blogs, and FAQs
        await loadAndRenderContent('News', 'News');
        await loadAndRenderContent('Blogs', 'Blog');
        await loadAndRenderContent('FAQs', 'FAQ');
        await loadAndRenderContent('Events', 'Event');

    } catch (error) {
        console.error("Error loading content: ", error);
    }
}

async function loadAndRenderContent(collectionName, label) {
    const contentList = document.getElementById('contentList');
    
    try {
        const snapshot = await getDocs(collection(db, collectionName));
        snapshot.forEach(doc => {
            const data = doc.data();
            const docId = doc.id; // This is the document ID

            const title = collectionName === 'FAQs' ? data.question : data.title;
            const content = collectionName === 'FAQs' ? data.answer : data.content;
            

            let posts = {id: docId, type: collectionName, date: data.postDate
            , title: title, content: content };

            renderCalendar(posts);

            // Use DOM methods to create and append elements
            const contentItem = document.createElement('div');
            const titleElement = document.createElement('h5');
            titleElement.classList.add('clickable');
            titleElement.setAttribute('data-title', title);
            titleElement.setAttribute('data-content', content);
            titleElement.textContent = `${title} (${label})`;

            // Add click event listener instead of inline onclick
            titleElement.addEventListener('click', () => showContentModal(titleElement, collectionName,docId ));

            const contentElement = document.createElement('p');
            contentElement.textContent = content;

            // Append elements
            contentItem.appendChild(titleElement);
           // contentItem.appendChild(contentElement);
            contentItem.appendChild(document.createElement('hr'));
            contentList.appendChild(contentItem);
        });

    } catch (error) {
        console.error(`Error loading ${collectionName}: `, error);
    }
}


function renderCalendar(posts) {
    const calendar = document.getElementById('calendar');
    calendar.innerHTML = ''; // Clear current calendar

    const days = ['2024-10-18', '2024-10-19', '2024-10-20']; // Example days

    days.forEach(day => {
        const dayElement = document.createElement('div');
        dayElement.classList.add('calendar-day');
        dayElement.dataset.date = day;
        dayElement.innerText = day;

        // Ensure posts is an array and filter posts by the date
        if (Array.isArray(posts)) {
            const dayPosts = posts.filter(post => post.date === day);
            
            if (dayPosts.length > 0) {
                dayElement.classList.add(dayPosts[0].type); // Assign type as class
                dayElement.dataset.postId = dayPosts[0].id; // Store post ID
    
                dayElement.addEventListener('click', () => {
                    showContentModal(dayPosts[0]); // Show the first post
                });
            } else {
                // If no posts for this date, allow user to create a new one
                dayElement.addEventListener('click', () => {
                    showNewPostModal(day);
                });
            }
        }
        
        calendar.appendChild(dayElement);
    });


    // Call the clearAndAddEventListeners function after rendering the days
    clearAndAddEventListeners(days); // Pass the days for button events
}



// Handle Post Creation
document.getElementById('eventForm').addEventListener('submit', async function (event) {
    event.preventDefault();

    const file = document.getElementById('eventImage').files[0];
    const quillContent = quill.getContents(); // Get content from Quill editor
    document.getElementById('eventContent').value = quillContent; // Assign it to hidden input

    try {
        const imageUrl = await uploadImage(file);

        // Add a new document to the 'Events' collection
        await addDoc(collection(db, 'Events'), {
            type: document.getElementById('postType').value,
            postDate: document.getElementById('eventPostDate').value,
            title: document.getElementById('postTitle').value,
            content: document.getElementById('eventContent').value,
            imageUrl: imageUrl,
            viewCount: 0,
            activate: true,
            tags: document.getElementById('eventTags').value.split(',').map(tag => tag.trim())
        });

        alert('Event saved successfully!');
        document.getElementById('eventForm').reset(); // Reset the form after submission
        renderCalendar(posts); // Re-render calendar with the new post
        $('#newPostModal').modal('hide'); // Close the modal

    } catch (error) {
        console.error('Error adding document: ', error);
    }
});





// JavaScript: Add Event Listener for Calendar Days
document.querySelectorAll('.calendar-day').forEach(dayElement => {
    dayElement.addEventListener('click', function () {
        const selectedDate = this.dataset.date;
        showPostTypeModal(selectedDate);
    });
});

// Function to Show Post Type Modal and Handle Selection
function showPostTypeModal(date) {
    // Open the modal
    document.getElementById('calendarModal').style.display = 'block';

    // Add event listeners to the buttons
    document.getElementById('addNewsBtn').addEventListener('click', function () {
        closeCalendarModal();
        toggleSection('newsSection');
        document.getElementById('newsPostDate').value = date;  // Insert date into input
    });

    document.getElementById('addBlogBtn').addEventListener('click', function () {
        closeCalendarModal();
        toggleSection('blogSection');
        document.getElementById('blogPostDate').value = date;  // Insert date into input
    });

    document.getElementById('addPostBtn').addEventListener('click', function () {
        closeCalendarModal();
        toggleSection('newPostModal');
        document.getElementById('eventPostDate').value = date;  // Insert date into input

    });
}

// Function to Close Calendar Modal
function closeCalendarModal() {
    document.getElementById('calendarModal').style.display = 'none';
}








// Modal for Creating New Post
function showNewPostModal(date) {
    document.getElementById('eventPostDate').value = date;
    $('#newPostModal').modal('show');
}


document.addEventListener('DOMContentLoaded', function() {
    loadContent();
    console.log("?????c    loadContent()????????????//");

    // Add event listeners to modal buttons once
    const date = ""; // Set default date or handle it dynamically
    document.getElementById('addNewsBtn').addEventListener('click', function () {
        closeCalendarModal();
        toggleSection('newsSection');
        document.getElementById('newsPostDate').value = date;  // Use dynamic date
    });

    document.getElementById('addBlogBtn').addEventListener('click', function () {
        closeCalendarModal();
        toggleSection('blogSection');
        document.getElementById('blogPostDate').value = date;  // Use dynamic date
    });

    document.getElementById('addPostBtn').addEventListener('click', function () {
        closeCalendarModal();
        toggleSection('newPostModal');
        document.getElementById('eventPostDate').value = date;  // Use dynamic date
    });
});




// Initialize Quill editor once globally
const  updateEditor  = new Quill('#updateEditor', {
    theme: 'snow',
    modules: {
        toolbar: [
            [{ 'header': [1, 2, 3, false] }],
            ['bold', 'italic', 'underline', 'strike'],
            [{ 'list': 'ordered' }, { 'list': 'bullet' }],
            ['link', 'image', 'video'],
            [{ 'color': [] }, { 'background': [] }],
            ['blockquote', 'code-block'],
            ['clean']
        ]
    }
});



/*
// Modal for Viewing Post Content
function showContentModal(post) {
    document.getElementById('modalTitle').innerText = post.title;
    document.getElementById('modalContent').innerText = post.content;
    
    $('#contentModal').modal('show');
}
*/
function showContentModal(element, collectionName, docId) {  
    const title = $(element).data('title');
    const content = $(element).data('content');
    const imageUrl = $(element).data('imageUrl'); // Assuming data-image attribute holds the image URL

    // Set the modal title
    $('#contentModalLabel').text(title);

    // Set the content of the editor using dangerouslyPasteHTML
    
    updateEditor.clipboard.dangerouslyPasteHTML(content); // Use this to paste HTML directly
    console.log("???updateEditor??????????????//   ",content);
   
    //$('#modalTextContent').val(updateEditor.root.innerHTML); // Set the content

    // Set the image if available
    if (imageUrl) {
        $('#modalImage').attr('src', imageUrl).show();
    } else {
        $('#modalImage').hide(); // Hide the image if not available
    }

    // Store docId for update and delete actions
    $('#modalTextContent').data('docId', docId);
    $('#modalTextContent').data('collectionName', collectionName);

    // Show the modal
    $('#contentModal').modal('show');

    
    async function updateArticle() {
    const docId = $('#modalTextContent').data('docId');
    const collectionName = $('#modalTextContent').data('collectionName');

    // Get the updated content from Quill
    const updatedContent = updateEditor.root.innerHTML; // Get the content from Quill editor

    try {
        await updateDoc(doc(db, collectionName, docId), {
            content: updatedContent,
            // You can update more fields as needed
        });
        alert('Article updated successfully!');
        $('#contentModal').modal('hide');
        // Optionally reload the content or update the display
    } catch (error) {
        console.error("Error updating document: ", error);
        alert('Error updating article. Please try again.');
    }
}

async function deleteArticle() {
    const docId = $('#modalTextContent').data('docId');
    const collectionName = $('#modalTextContent').data('collectionName');

    if (confirm('Are you sure you want to delete this article? This action cannot be undone.')) {
        try {
            await deleteDoc(doc(db, collectionName, docId));
            alert('Article deleted successfully!');
            $('#contentModal').modal('hide');
            // Optionally reload the content or update the display
        } catch (error) {
            console.error("Error deleting document: ", error);
            alert('Error deleting article. Please try again.');
        }
    }
}


const deleteArticleBtn = document.getElementById('deleteArticle');
const updateArticleBtn = document.getElementById('updateArticle');

deleteArticleBtn.addEventListener('click', function() {
    deleteArticle();
    });

    updateArticleBtn.addEventListener('click', function() {
        updateArticle();
    });
}


    </script>

    <script>

    </script>

    <!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<!-- jQuery (Must be included before Bootstrap JS) -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    
<!-- Popper.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>

<!-- Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

</body>
</html>
