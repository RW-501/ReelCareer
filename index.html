<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ReelCareer helps job seekers find their dream job with an extensive list of job postings, news, and tips. Start your career journey today.">
    <meta name="keywords" content="jobs, job search, career, job listings, remote jobs, full-time jobs, part-time jobs, job opportunities">
    <meta name="author" content="ReelCareer">
    <meta name="robots" content="index, follow">
    <meta name="language" content="en">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="ReelCareer - Find Your Dream Job">
    <meta property="og:description" content="Explore job listings and career opportunities. Start your journey with ReelCareer today.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.reelcareer.co">
    <meta property="og:image" content="/ReelCareer/images/sq_logo_n_BG.png">
    <meta property="og:site_name" content="ReelCareer">
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ReelCareer">
    <meta name="twitter:title" content="ReelCareer - Find Your Dream Job">
    <meta name="twitter:description" content="Browse thousands of job opportunities. Get hired with ReelCareer.">
    <meta name="twitter:image" content="/ReelCareer/images/sq_logo_n_BG_tie_reel.png">

    <!-- Standard Favicon -->
<link rel="icon" type="image/x-icon" href="/ReelCareer/images/favicons/favicon.ico">

<!-- 32x32 Favicon -->
<link rel="icon" type="image/png" sizes="32x32" href="/ReelCareer/images/favicons/favicon-32x32.png">

<!-- 16x16 Favicon -->
<link rel="icon" type="image/png" sizes="16x16" href="/ReelCareer/images/favicons/favicon-16x16.png">

<!-- Apple Touch Icon -->
<link rel="apple-touch-icon" sizes="180x180" href="/ReelCareer/images/favicons/apple-touch-icon.png">

<!-- Android Favicon (192x192) -->
<link rel="icon" type="image/png" sizes="192x192" href="/ReelCareer/images/favicons/android-chrome-192x192.png">

<!-- Chrome Favicon (512x512) -->
<link rel="icon" type="image/png" sizes="512x512" href="/ReelCareer/images/favicons/android-chrome-512x512.png">

    <!-- Schema.org for Job Listings -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "JobPosting",
      "title": "Software Developer",
      "description": "We are looking for a full-time software developer...",
      "hiringOrganization": {
        "@type": "Organization",
        "name": "ReelCareer",
        "sameAs": "https://www.reelcareer.co"
      },
      "jobLocation": {
        "@type": "Place",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "1234 Career St.",
          "addressLocality": "Dallas",
          "addressRegion": "TX",
          "postalCode": "75001",
          "addressCountry": "US"
        }
      },
      "datePosted": "2024-10-03",
      "employmentType": "Full-time",
      "validThrough": "2024-12-31T23:59:59"
    }
    </script>

    <!-- Schema.org for Organization -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "ReelCareer",
      "url": "https://www.reelcareer.co",
      "logo": "https://www.reelcareer.co/images/favicon.png",
      "sameAs": [
        "https://www.facebook.com/ReelCareer",
        "https://www.linkedin.com/company/reelcareer",
        "https://twitter.com/ReelCareer"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-800-555-5555",
        "contactType": "Customer Support",
        "areaServed": "US",
        "availableLanguage": ["English"]
      }
    }
    </script>

    <!-- Schema.org for Breadcrumbs -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://www.reelcareer.co/"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "Job Listings",
        "item": "https://www.reelcareer.co/job-listings"
      }]
    }
    </script>

    <title>ReelCareer - Find Your Dream Job</title>

      <!-- Bootstrap CSS -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
 
    <!-- Custom CSS -->
    <link rel="stylesheet" href="public/css/styles.css">
    <script src="public/js/scripts.js"></script>
    <style>
        .custom-load-more-btn {
    border-radius: 8px;
    background-color: #3498db;
    font-size: 16px;
    padding: 12px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

.custom-load-more-btn:hover {
    background-color: #2980b9;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

    </style>
</head>


<body>


    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="#">ReelCareer</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="views/job-listings.html">Job Listings</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="views/company-pages.html">Company Pages</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="views/job-seeker.html">Job Seeker</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="views/recruiter-dashboard.html">Recruiter Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="views/news.html">News Page</a>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-primary" onclick="location.href='views/auth.html'">Login / Create Account</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="jumbotron jumbotron-fluid text-center text-white bg-primary mb-0" style="padding-top: 6rem;">
        <div class="container">
            <h1 class="display-4">Find Your Dream Job</h1>
            <p class="lead">Search job listings, apply, and take your career to the next level.</p>
            <form id="jobSearchForm" class="form-inline justify-content-center mt-4">
                <div class="form-group position-relative" style="width: auto;">
                    <input 
                        type="text" 
                        class="form-control mr-2 mb-2" 
                        placeholder="Keywords (e.g., Developer)" 
                        aria-label="Keywords" 
                        id="keywordInput"
                        required
                        oninput="autoSuggest(this.value)"
                        autocomplete="off">
                </div>

                <input id="locationInput" type="text" class="form-control mr-2 mb-2" placeholder="Location (e.g., City)" aria-label="Location" >
                <select id="jobTypeInput" class="form-control mr-2 mb-2" aria-label="Job Type" >
                    <option value="">Job Type</option>
                    <option value="full-time">Full-time</option>
                    <option value="part-time">Part-time</option>
                    <option value="contract">Contract</option>
                    <option value="remote">Remote</option>
                    <option value="hybrid">Hybrid</option>
                </select>
                <div class="form-group">
                    <input 
                        type="text" 
                        class="form-control mr-2 mb-2" 
                        placeholder="Salary Range (e.g., $50,000)" 
                        onkeydown="restrictKeys(event)" 
                        aria-label="Salary Range"
                        id="salaryInput"
                        oninput="formatSalary(this)"
                    >
                </div>
                                <button type="submit" class="btn btn-light mb-2">Search Jobs</button>
            </form>
        </div>
    </div>
   
    <!-- Featured Jobs Section -->
    <div class="container mt-5">
        <h2 class="text-center mb-4">Featured Jobs</h2>
        <div class="row" id="jobListings">
            <!-- Job cards will be dynamically inserted here -->
        </div>
        <div id="loadingIndicator" class="text-center mt-4" style="display:none;">
            <p>Loading job listings...</p>
        </div>
        <div id="errorIndicator" class="text-center mt-4" style="display:none;">
            <p>Error fetching job listings. Please try again later.</p>
        </div>
    </div>

    <!-- Dynamic News Section -->
    <div class="container mt-5">
        <h2 class="text-center mb-4">Latest Career News</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="card mb-4">
                    <img class="card-img-top" src="/ReelCareer/images/rc_text_sm.png" alt="Article 1">
                    <div class="card-body">
                        <h5 class="card-title">Industry Trends in 2024</h5>
                        <p class="card-text">Stay ahead in your career with the latest industry trends and news.</p>
                        <a href="#" class="btn btn-primary">Read More</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4">
                    <img class="card-img-top" src="/ReelCareer/images/rc_text_sm.png" alt="Article 2">
                    <div class="card-body">
                        <h5 class="card-title">How to Stand Out as a Job Seeker</h5>
                        <p class="card-text">Learn the best strategies for getting noticed by top recruiters.</p>
                        <a href="#" class="btn btn-primary">Read More</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-4">
                    <img class="card-img-top" src="/ReelCareer/images/rc_text_sm.png" alt="Article 3">
                    <div class="card-body">
                        <h5 class="card-title">Top Remote Work Opportunities</h5>
                        <p class="card-text">Discover the top remote jobs and what employers are looking for.</p>
                        <a href="#" class="btn btn-primary">Read More</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Call to Action -->
    <div class="container-fluid bg-light py-5 mt-5">
        <div class="container text-center">
            <h2>Ready to take the next step in your career?</h2>
            <p class="lead">Create an account or login now to get started on your job search.</p>
            <button class="btn btn-primary btn-lg" onclick="location.href='views/auth.html'">Create an Account</button>
            <button class="btn btn-outline-primary btn-lg ml-2" onclick="location.href='views/auth.html'">Login</button>
        </div>
    </div>

    <!-- Footer -->
    <footer id="dynamic-footer"></footer>

    <!-- Firebase configuration/ Login& Out -->
    <script type="module" src="public/js/main.js"></script> 

    <script type="module">
    import { db, storage, analytics, app  } from './public/js/main.js'; // Adjust the path based on your structure
    import { query, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

        // Function to fetch job listings and sponsors
        async function fetchJobListings() {
            const jobListingsContainer = document.getElementById('jobListings');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const errorIndicator = document.getElementById('errorIndicator');
        
            loadingIndicator.style.display = 'block'; // Show loading indicator
            errorIndicator.style.display = 'none'; // Hide error indicator

            window.onscroll = function() {
    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
        fetchJobListings(nextPage); // Fetch next set of job listings when reaching the bottom
    }
};




let userInterest1, userInterest2, userInterest3; 

// Assume excludedIds is an array of IDs to exclude
const excludedIds = ['id1', 'id2', 'id3']; // Replace with your actual IDs

            try {
// Create the base query for Jobs
let jobsQuery = query(collection(db, 'Jobs'));
// Adding dynamic filters based on userINFO
if (userINFO.city) { 
    jobsQuery = query(jobsQuery, where('city', '==', userINFO.city));
}
if (userINFO.state) {
    jobsQuery = query(jobsQuery, where('state', '==', userINFO.state));
}
if (userInterests.length > 0) {
    jobsQuery = query(jobsQuery, where('tags', 'array-contains-any', userInterests));
}

// Exclude specified IDs
jobsQuery = query(jobsQuery, where('id', 'not-in', excludedIds));

// Common conditions
jobsQuery = query(jobsQuery, where('status', '==', 'active'));

// Sort by createdAt in descending order
jobsQuery = query(jobsQuery, orderBy('createdAt', 'desc'));

// Limit the results
jobsQuery = query(jobsQuery, limit(20));

        const jobListingsSnapshot = await getDocs(jobsQuery);

// Base query for Sponsors
let sponsorsQuery = query(collection(db, 'Jobs'));

// Adding dynamic filters based on userINFO
if (userINFO.state) {
    sponsorsQuery = query(sponsorsQuery, where('state', '==', userINFO.state));
}
if (userINFO.country) {
    sponsorsQuery = query(sponsorsQuery, where('country', '==', userINFO.country));
}
if (userInterests.length > 0) {
    sponsorsQuery = query(sponsorsQuery, where('tags', 'array-contains-any', userInterests));
}

// Exclude specified IDs (if necessary; adjust if IDs are applicable for Sponsors)
sponsorsQuery = query(sponsorsQuery, where('id', 'not-in', excludedIds));

// Common conditions
sponsorsQuery = query(sponsorsQuery, where('status', '==', 'active'), where('boosted', 'in', ['Yes', 'Active']));

// Sort by createdAt in descending order
sponsorsQuery = query(sponsorsQuery, orderBy('createdAt', 'desc'));

// Limit the results
sponsorsQuery = query(sponsorsQuery, limit(20));

// Fetch sponsors
const sponsorsSnapshot = await getDocs(sponsorsQuery);

        
                const sponsors = [];

                sponsorsSnapshot.forEach(doc => {

            if (jobListingsSnapshot.boosted === true) {
                sponsors.push({
                id: doc.id, // Include document ID
                title: data.title,
                description: data.description,
                datePosted: data.datePosted,
                organization: data.organization,
                location: data.location,
                employmentType: data.employmentType,
                baseSalary: data.baseSalary,
                validThrough: data.validThrough,
                url: data.url
            });

        }
           
    });


                jobListingsContainer.innerHTML = ''; // Clear previous listings
        
                jobListingsSnapshot.forEach(doc => {
                    const job = { id: doc.id, ...doc.data() };
                 

                    // Create job card
                    const jobCard = document.createElement('div');
jobCard.className = 'col-md-4 mb-4';
jobCard.innerHTML = `
    <div class="card h-100 shadow-sm">
        <div class="card-body">
            <h5 class="card-title">${job.title}</h5>
            <p class="card-text text-muted">${truncateText(job.description, 100)}</p>
            <p class="card-text"><strong>Company:</strong> ${job.company}</p>
            <p class="card-text"><strong>Location:</strong> ${job.location ? job.location : 'Not specified'}</p>
            <p class="card-text"><strong>Salary:</strong> $${job.salary}</p>
            <a href="views/job-detail.html?id=${job.id}" class="btn btn-primary w-100 mt-3">View Details</a>
        </div>
    </div>
`;
jobListingsContainer.appendChild(jobCard);


// Add sponsors to the bottom of the job listings
if (sponsors.length > 0) {
    if(!sponsor.logoUrl){let sponsorlogoUrl = "/ReelCareer/images/favicons/android-chrome-512x512.png"; 
    }else{sponsorlogoUrl = sponsor.logoUrl }
    const sponsorSection = document.createElement('div');
    sponsorSection.className = 'col-12 mt-4';
    sponsorSection.innerHTML = `
        <h5 class="text-center mb-4">Our Sponsors</h5>
        <div class="row">
            ${sponsors.map(sponsor => `
                <div class="col-md-4">
                    <div class="card h-100 shadow-sm">
                        <img class="card-img-top" src="${sponsorlogoUrl}" alt="${sponsor.name}">
                        <div class="card-body">
                            <h6 class="card-title">${sponsor.name}</h6>
                            <p class="card-text text-muted">${truncateText(sponsor.description, 80)}</p>
                            <a href="${sponsor.website}" class="btn btn-outline-primary w-100" target="_blank">Visit Website</a>
                        </div>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
    jobListingsContainer.appendChild(sponsorSection);
}

      
});

// Add "Load More" button for Pagination
const loadMoreButton = document.createElement('button');
        loadMoreButton.className = 'btn btn-primary w-100 mt-4';
        loadMoreButton.innerText = 'Load More Jobs';
        loadMoreButton.onclick = () => fetchJobListings(page + 1); // Fetch next page of jobs
        jobListingsContainer.appendChild(loadMoreButton);

    } catch (error) {
        console.error("Error fetching job listings: ", error);
        errorIndicator.style.display = 'block'; // Show error indicator
    } finally {
        loadingIndicator.style.display = 'none'; // Hide loading indicator
    }
}

// Truncate text function
function truncateText(text, maxLength) {
    return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
}
        
        // Load job listings on page load
        document.addEventListener('DOMContentLoaded', fetchJobListings);


        document.getElementById('jobSearchForm').addEventListener('submit', function(event) { 
        event.preventDefault(); // Prevent the default form submission

        // Get the values from the input fields
        const keywords = document.getElementById('keywordInput').value.trim();
        const location = document.getElementById('locationInput').value.trim();
        const jobType = document.getElementById('jobTypeInput').value;
        const salaryRange = document.getElementById('salaryInput').value.trim();

        // Check for required fields before constructing query
        if (!keywords || !location || !salaryRange) {
            alert('Please fill in all required fields.');
            return;
        }

        // Construct the query parameters
        const queryParams = new URLSearchParams({
            keywords: keywords,
            location: location,
            jobType: jobType,
            salaryRange: salaryRange
        }).toString();

        // Navigate to the job listings page with the search parameters
        window.location.href = `/views/job-listings?${queryParams}`;

    });



        </script>
        


    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>
