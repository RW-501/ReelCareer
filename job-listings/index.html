<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Search thousands of job listings, filter by location, job type, industry, and more. Discover remote, full-time, and part-time jobs that match your skills and start applying today.">
  <meta name="keywords" content="job search, job listings, career opportunities, remote jobs, full-time jobs, part-time jobs, job board, employment search, job openings, find jobs">
  <meta name="author" content="ReelCareer">
  <meta name="robots" content="index, follow">
  <meta name="language" content="en">
  <meta name="geo.region" content="US-TX">
  <meta name="geo.placename" content="Dallas, Texas">

  <!-- Title optimized for Job Listing Page -->
  <title>Job Listings | Find Your Next Job Opportunity on ReelCareer</title>

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Job Listings | Browse Career Opportunities on ReelCareer">
  <meta property="og:description" content="Explore thousands of job listings and career opportunities. Filter by industry, location, and job type to find the perfect fit.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.reelcareer.co/job-listings">
  <meta property="og:image" content="https://www.reelcareer.co/images/sq_logo_n_BG_tie_reelx.png"> <!-- Update image path accordingly -->
  <meta property="og:site_name" content="ReelCareer">
  <meta property="og:locale" content="en_US">

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@ReelCareer">
  <meta name="twitter:title" content="Job Listings | Discover Job Opportunities">
  <meta name="twitter:description" content="Search through job openings, filter results, and apply directly on ReelCareer.">
  <meta name="twitter:image" content="https://www.reelcareer.co/images/sq_logo_n_BG_tie_reelx.png"> <!-- Update image path accordingly -->

  <!-- Canonical Tag for SEO -->
  <link rel="canonical" href="https://www.reelcareer.co/job-listings">

  <!-- Standard Favicon -->
  <link rel="icon" type="image/x-icon" href="https://www.ReelCareer.co/images/favicons/favicon.ico">

  <!-- 32x32 Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://www.ReelCareer.co/images/favicons/favicon-32x32.png">

  <!-- 16x16 Favicon -->
  <link rel="icon" type="image/png" sizes="16x16" href="https://www.ReelCareer.co/images/favicons/favicon-16x16.png">

  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="https://www.ReelCareer.co/images/favicons/apple-touch-icon.png">

  <!-- Android Favicon (192x192) -->
  <link rel="icon" type="image/png" sizes="192x192" href="https://www.ReelCareer.co/images/favicons/android-chrome-192x192.png">

  <!-- Chrome Favicon (512x512) -->
  <link rel="icon" type="image/png" sizes="512x512" href="https://www.ReelCareer.co/images/favicons/android-chrome-512x512.png">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <!-- Bootstrap CSS -->
  <script src="https://reelcareer.co/public/js/scripts.js"></script>
  <script src="https://reelcareer.co/public/js/loadScripts.js"></script>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="https://reelcareer.co/public/css/styles.css">

<!-- Main Script Loader -->
    <script src="https://reelcareer.co/scripts/js/loader.js"></script>
</head>

<body>
  

  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="https://reelcareer.co">ReelCareer</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a class="nav-link" href="https://reelcareer.co">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="job-listings">Job Listings</a></li>
          <li class="nav-item"><a class="nav-link" href="company-pages">Company Pages</a></li>
          <li class="nav-item"><a class="nav-link" href="/u/seeker/">Job Seeker</a></li>
          <li class="nav-item"><a class="nav-link" href="recruiter">Recruiter Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="news">News</a></li>
        </ul>
      </div>
    </div>
  </nav>


  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li id="lastBreadcrumb_home" class="breadcrumb-item"><a href="https://reelcareer.co/">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">Job Listings</li>
    </ol>
  </nav>


  <!-- Job Search Section -->
  <searchArea>
    <div class="container mt-5">
      <div class="row">
        <div class="col-md-12 text-center">
          <h1 class="font-weight-bold">Find Your Next Opportunity</h1>
          <p class="lead text-muted">Search from thousands of jobs that fit your skills and preferences</p>
          <form id="jobSearchForm" class="form-inline justify-content-center mt-4">
            <div class="form-group position-relative" style="width: auto;">
              <input id="keywordInput" type="text" class="form-control form-control-lg mr-2 mb-2 keywordInput job-input" placeholder="Keywords (e.g., Developer)" aria-label="Keywords" id="keywordInput" required oninput="autoSuggest(this.value,'jobSuggestions')" autocomplete="off">
            </div>

            <input id="locationInput" type="text" oninput="autoSuggest(this.value,'locationSuggestions')" class="form-control form-control-lg mr-2 mb-2 keywordInput location-input" placeholder="Location (e.g., City)">
            <select id="jobTypeInput" class="form-control form-control-lg mb-2 mr-2 rounded-pill" style="padding: 0.75rem;">
              <option value="" disabled selected>Job Type</option>
              <option value="full-time">Full-time</option>
              <option value="part-time">Part-time</option>
              <option value="contract">Contract</option>
              <option value="remote">Remote</option>
              <option value="hybrid">Hybrid</option>
              <option value="freelance">Freelance</option>
              <option value="">All</option>

            </select>
            
            <div class="form-group">
              <input type="text" class="form-control form-control-lg mr-2 mb-2" placeholder="Salary Range (e.g., $50,000)" onkeydown="restrictKeys(event)" aria-label="Salary Range" id="salaryInput" oninput="updateCurrency(this)">
            </div>
            <button id="main-search-btn" type="button" class="btn btn-primary btn-lg mb-2 px-4" ">Search Jobs</button> <!-- //onclick="searchJobs();-->
          </form>
        </div>
      </div>
    </div>
  </searchArea>
  <div class="container mt-5">

    <!-- Toggle Button for Collapse -->
    <div class="d-flex justify-content-center mb-3">
      <button id="filter-btn" class="btn btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#filterSection" aria-expanded="false" aria-controls="filterSection">
        Show Filters
      </button>
    </div>

    <!-- Filter Section (Initially Collapsed) -->
    <div class="collapse" id="filterSection"  style="
    z-index: 200;
    position: absolute;
    margin: auto;
    left: 0;
    right: 0;
    width: 90%;
">
      <div class="card shadow-lg p-4" style="border-radius: 12px;">
        <div class="row">
          <!-- Filter Title -->
          <div class="col-12 text-center mb-3">
            <h4 class="fw-bold" style="color: #007bff;">Filter Jobs</h4>
          </div>

          <!-- Divider -->
          <div class="w-100">
            <hr class="my-3">
          </div>

          <!-- Location Inputs -->
          <div class="col-md-4 mb-4">
            <label for="jobLocation" class="form-label">Location <i class="fas fa-map-marker-alt"></i></label>
            <input type="text" oninput="autoSuggest(this.value, 'locationSuggestions')" class="form-control rounded-pill" id="jobLocation" placeholder="City, State or ZIP" title="Where do you want to work?">
            <small class="form-text text-muted">Specify a location or leave blank for remote jobs.</small>
          </div>

          <div class="col-md-4 mb-4">
            <label for="jobCity" class="form-label">City <i class="fas fa-city"></i></label>
            <input type="text" oninput="autoSuggest(this.value, 'citySuggestions')" class="form-control rounded-pill" id="jobCity" placeholder="City">
            <small class="form-text text-muted">Enter the city for job search.</small>
          </div>

          <div class="col-md-4 mb-4">
            <label for="jobState" class="form-label">State <i class="fas fa-flag-usa"></i></label>
            <input type="text" oninput="autoSuggest(this.value, 'stateSuggestions')" class="form-control rounded-pill" id="jobState" placeholder="State">
            <small class="form-text text-muted">Use state abbreviation (e.g., TX for Texas).</small>
          </div>

          <div class="w-100">
            <hr class="my-3">
          </div>

          <!-- Zip Code & Salary Range -->
          <div class="col-md-4 mb-4">
            <label for="jobZip" class="form-label">Zip Code <i class="fas fa-map-pin"></i></label>
            <input type="text" class="form-control rounded-pill" id="jobZip" placeholder="Zip Code">
            <small class="form-text text-muted">For precise location filtering.</small>
          </div>

          <div class="col-md-4 mb-4">
            <label for="salaryMin" class="form-label">Minimum Salary <i class="fas fa-dollar-sign"></i></label>
            <input type="text" onkeydown="restrictKeys(event)" oninput="updateCurrency(this)" class="form-control rounded-pill" id="salaryMin" placeholder="Minimum Salary">
            <small class="form-text text-muted">Leave blank for no minimum salary.</small>
          </div>

          <div class="col-md-4 mb-4">
            <label for="salaryMax" class="form-label">Maximum Salary <i class="fas fa-dollar-sign"></i></label>
            <input type="text" onkeydown="restrictKeys(event)" oninput="updateCurrency(this)" class="form-control rounded-pill" id="salaryMax" placeholder="Maximum Salary">
            <small class="form-text text-muted">Leave blank for no maximum salary.</small>
          </div>

          <div class="w-100">
            <hr class="my-3">
          </div>

          <!-- Contract Type & Industry -->
          <div class="col-md-4 mb-4">
            <label for="contractType" class="form-label">Contract Type <i class="fas fa-briefcase"></i></label>
            <select class="form-select rounded-pill" id="contractType" >
              <option value="">Job Type</option>
              <option value="full-time">Full-time</option>
              <option value="part-time">Part-time</option>
              <option value="contract">Contract</option>
              <option value="remote">Remote</option>
              <option value="hybrid">Hybrid</option>
              <option value="freelance">Freelance</option>
              <option value="">All</option>

            </select>
          </div>

          <div class="col-md-4 mb-4">
            <label for="industry" class="form-label">Industry <i class="fas fa-industry"></i></label>
            <select class="form-select rounded-pill" id="industry" > 
              <option value="">Select an Industry</option>
              <option value="Technology">Technology</option>
              <option value="Healthcare">Healthcare</option>
              <option value="Finance">Finance</option>
              <option value="Education">Education</option>
              <option value="Retail">Retail</option>
              <option value="Manufacturing">Manufacturing</option>
              <option value="Hospitality">Hospitality</option>
              <option value="Construction">Construction</option>
              <option value="Transportation">Transportation</option>
              <option value="Telecommunications">Telecommunications</option>
              <option value="Non-Profit">Non-Profit</option>
              <option value="Real Estate">Real Estate</option>
              <option value="Energy">Energy</option>
              <option value="Automotive">Automotive</option>
              <option value="Pharmaceuticals">Pharmaceuticals</option>
              <option value="Information Technology">Information Technology</option>
              <option value="Agriculture">Agriculture</option>
              <option value="Media">Media</option>
              <option value="Legal">Legal</option>
              <option value="Insurance">Insurance</option>
              <option value="Arts & Entertainment">Arts & Entertainment</option>
              <option value="Travel & Tourism">Travel & Tourism</option>
              <option value="Food & Beverage">Food & Beverage</option>
              <option value="Aerospace">Aerospace</option>
              <option value="Mining">Mining</option>
              <option value="Fashion">Fashion</option>
              <option value="Cybersecurity">Cybersecurity</option>
              <option value="Blockchain">Blockchain</option>
              <option value="Startups">Startups</option>
              <option value="Social Media">Social Media</option>
            </select>
          </div>
          

          <div class="col-md-4 mb-4">
            <label for="jobPreferences" class="form-label">Job Preferences <i class="fas fa-cogs"></i></label>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="immediateHire">
              <label class="form-check-label" for="immediateHire">Immediate Hire</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="contractToHire">
              <label class="form-check-label" for="contractToHire">Contract to Hire</label>
            </div>
          </div>

          <div class="w-100">
            <hr class="my-3">
          </div>

          <!-- Job Posting Date & Education Level -->
          <div class="col-md-4 mb-4">
            <label for="postingDate" class="form-label">Posting Date <i class="fas fa-calendar-alt"></i></label>
            <select class="form-select rounded-pill" id="postingDate">
              <option value="">Any Date</option>
              <option value="24h">Last 24 Hours</option>
              <option value="week">Last Week</option>
              <option value="month">Last Month</option>
            </select>
          </div>

          <div class="col-md-4 mb-4">
            <label for="education" class="form-label">Education Level <i class="fas fa-graduation-cap"></i></label>
            <select class="form-select rounded-pill" id="education">
              <option value="">Select Education Level</option>
              <option value="highSchool">High School</option>
              <option value="associateDegree">Associate's Degree</option>
              <option value="bachelorDegree">Bachelor's Degree</option>
              <option value="mastersDegree">Master's Degree</option>
              <option value="doctorateDegree">Doctorate (PhD)</option>
              <option value="other">Other</option>
              <option value="">Any</option>

            </select>
          </div>
          
          <div class="col-md-4 mb-4">
            <label for="experience" class="form-label">Years of Experience <i class="fas fa-briefcase"></i></label>
            <select class="form-select rounded-pill" id="experience">
              <option value="">Select Experience Level</option>
              <option value="0-1">0-1 years</option>
              <option value="2-5">2-5 years</option>
              <option value="6-10">6-10+ years</option>
              <option value="">Any</option>

            </select>
          </div>
          

          <div class="w-100">
            <hr class="my-3">
          </div>

          <!-- Job Requirements -->
          <div class="col-12 mb-4">
            <label for="jobRequirements" class="form-label">Job Requirements <i class="fas fa-tools"></i></label>
            <textarea oninput="autoSuggest(this.value, 'RequirementsSuggestions')" class="form-control rounded-3" id="jobRequirements" rows="2" placeholder="e.g., Java, Python, leadership"></textarea>
            <small class="form-text text-muted">Enter skills or technologies separated by commas.</small>
          </div>

          <div class="col-12 text-end">
            <div style="
    display: inline;
">
            <button class="btn btn-secondary rounded-pill me-2 reset_filter" type="reset">Clear Filters</button>
            <button class="btn btn-primary rounded-pill" type="button" onclick="mainFilterJobCards();" id="searchButton">Search Jobs</button>
          </div>
          
            <button class="close btn btn-secondary rounded-pill p-2 close" type="button" data-bs-toggle="collapse" data-bs-target="#filterSection" aria-expanded="true" aria-controls="filterSection">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script>// Function to move focus to the next input
        function moveToNextInput(e) {
            const form = e.target.div;
            const inputs = Array.from(form.querySelectorAll('input, select, textarea'));
        
            // If the Enter key was pressed and the target isn't the tags input
            if (e.key === 'Enter') {
                e.preventDefault();
                
                const index = inputs.indexOf(e.target); // Get the index of the current input
                const nextInput = inputs[index + 1]; // Get the next input
        
                if (nextInput) {
                    nextInput.focus(); // Move focus to the next input
                }
            }
        }
        
        // Add the event listener to all input elements except the tags input
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.querySelector('#filterSection');
            
            // Add keydown event listener for Enter key to all inputs, selects, and textareas
            form.querySelectorAll('input, select, textarea').forEach(input => {
                input.addEventListener('keydown', moveToNextInput);
            });
     
        });
        

      /*
    // Enable Bootstrap tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    });
*/
      // Function to set up the collapse button
      function setupCollapseButton() {
        const toggleButton = document.querySelector('[data-bs-toggle="collapse"]');
        const targetSection = document.querySelector('#filterSection');
//        const closeButton = targetSection.querySelector('.close');

        if (toggleButton && targetSection) {
          toggleButton.addEventListener('click', function() {
            // Get the current state
            const isExpanded = toggleButton.getAttribute('aria-expanded') === 'true';
            // Toggle the expanded state
            toggleButton.setAttribute('aria-expanded', !isExpanded);
            targetSection.classList.toggle('show', !isExpanded);
            // Update button text based on the state
            toggleButton.textContent = isExpanded ? 'Show Filters' : 'Hide Filters';
          });
        } 

      }


      // Run setup on DOMContentLoaded
      document.addEventListener('DOMContentLoaded', setupCollapseButton);
      // Toggle button text change
      document.querySelector('[data-bs-toggle="collapse"]').addEventListener('click', function() {
        const button = this;
        const isCollapsed = button.getAttribute('aria-expanded') === 'true';
        button.textContent = isCollapsed ? 'Show Filters' : 'Hide Filters';
      });


      document.querySelector('.close').addEventListener('click', function() {
         document.getElementById('filter-btn').click();
       });





      document.querySelector('.reset_filter').addEventListener('click', function() {
        const form = document.querySelector('#filterSection');
            
            // Add keydown event listener for Enter key to all inputs, selects, and textareas
            form.querySelectorAll('input, select, textarea').forEach(input => {
                input.value = '';
            });



      });
      // Save filters to local storage
      document.getElementById('searchButton').addEventListener('click', function() {
        const filters = {
          jobRequirements: document.getElementById('jobRequirements').value,
          jobLocation: document.getElementById('jobLocation').value,
          jobCity: document.getElementById('jobCity').value,
          jobState: document.getElementById('jobState').value,
          jobZip: document.getElementById('jobZip').value,
          salaryMin: document.getElementById('salaryMin').value,
          salaryMax: document.getElementById('salaryMax').value,
          contractType: document.getElementById('contractType').value,
          immediateHire: document.getElementById('immediateHire').checked,
          contractToHire: document.getElementById('contractToHire').checked,
          postingDate: document.getElementById('postingDate').value,
          education: Array.from(document.getElementById('education').selectedOptions).map(option => option.value),
          experience: Array.from(document.getElementById('experience').selectedOptions).map(option => option.value),
          industry: document.getElementById('industry').value,
        };
        localStorage.setItem('jobSearchFilters', JSON.stringify(filters));
          showToast("Filters saved!", 'success');

          mainFilterJobCards();



      });
      // Load saved filters on page load
       function loadSavedFilers() {
        const savedFilters = JSON.parse(localStorage.getItem('jobSearchFilters'));
        if (savedFilters) {
          document.getElementById('jobRequirements').value = savedFilters.jobRequirements || '';
          document.getElementById('jobLocation').value = savedFilters.jobLocation || '';
          document.getElementById('jobCity').value = savedFilters.jobCity || '';
          document.getElementById('jobState').value = savedFilters.jobState || '';
          document.getElementById('jobZip').value = savedFilters.jobZip || '';
          document.getElementById('salaryMin').value = savedFilters.salaryMin || '';
          document.getElementById('salaryMax').value = savedFilters.salaryMax || '';
          document.getElementById('contractType').value = savedFilters.contractType || '';
          document.getElementById('immediateHire').checked = savedFilters.immediateHire || false;
          document.getElementById('contractToHire').checked = savedFilters.contractToHire || false;
          document.getElementById('postingDate').value = savedFilters.postingDate || '';
          if (savedFilters.education) {
            Array.from(document.getElementById('education').options).forEach(option => {
              option.selected = savedFilters.education.includes(option.value);
            });
          }
          if (savedFilters.experience) {
            Array.from(document.getElementById('experience').options).forEach(option => {
              option.selected = savedFilters.experience.includes(option.value);
            });
          }
          document.getElementById('industry').value = savedFilters.industry || '';
        }
      };
    </script>


    <!-- Featured Jobs Section -->
    <div id="featuredJobsTop"  class="container mt-5">
      <h2 class="text-center font-weight-bold">Featured Jobs</h2>
      <p class="text-center text-muted">Handpicked job opportunities from top companies</p>

      <div id="noResultsMessage" style="display: none; text-align: center; margin-top: 20px;">
        <div class="alert alert-warning" role="alert" style="
border-radius: 12px;
            padding: 20px;
            background-color: #e3ebf1;
            border: 1px solid #83bad9;
            color: #2b70c3;
            ">
            <h2 style="margin: 0; font-size: 24px; font-weight: bold;">No Results Found</h2>
            <p style="font-size: 18px; margin: 5px 0;">
                Sorry, we couldn't find any jobs matching your search.
            </p>
            <p style="font-size: 16px; margin: 5px 0;">
                Please try different keywords or adjust your filters.
            </p>
        </div>
      </div>
    </div>
  </div>




  <main id="main-content">

      <div class="row" id="featuredJobListings">
        <!-- Featured jobs dynamically inserted here -->
           
        <!-- Message when no featured jobs are available -->
        <div class="col-12 text-center mt-4" id="noFeaturedJobs" style="display: none;">
          <div class="alert alert-warning" role="alert">
            <h4 class="alert-heading">No Featured Jobs Available</h4>
            <p>Currently, there are no featured job opportunities. However, you can still explore other available positions and enhance your visibility!</p>
            <p>We recommend considering a boosted job post to attract more candidates.</p>
            <hr>
            <p class="mb-0">Looking for ideas? Here are some suggested job titles you might consider:</p>
            <ul class="list-unstyled mt-3">
              <li>Data Analyst</li>
              <li>Software Developer</li>
              <li>UI/UX Designer</li>
              <li>Project Manager</li>
              <li>Marketing Specialist</li>
            </ul>
            <a href="/u/recuiter/" class="btn btn-primary mt-3">Create a Boosted Job</a>
          </div>
        </div>
      </div>

      <!-- Imprint  -->


<div class="text-center m-auto">
  <h3 class="font-weight-bold embedded-Logo">ReelCareer.co</h3>
</div>

    <!-- All Job Listings Section -->
    <div class="container mt-5 check-cap">
      <h2 class="text-center font-weight-bold">All Jobs</h2>


 

      <div class="row" id="jobListings">
        <!-- Job listings dynamically inserted here -->
      </div>
      <div id="loadingIndicator" class="text-center mt-4" style="display:none;">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div class="container text-center mt-5">
      <nav>
        <ul class="pagination justify-content-center" id="pagination">
          <!-- Pagination dynamically generated -->
        </ul>
      </nav>
    </div>
  
    <button id="quickPostJobButton" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#jobPostPopup">Quick Post Job</button>



    <div id="jobPostPopup" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="jobPostPopupLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content shadow-lg">
          <div class="modal-header bg-light border-0">
            <h5 class="modal-title fw-bold" id="jobPostPopupLabel">
              <i class="bi bi-briefcase me-2"></i>Quick Job Post
            </h5>
            <button id="jobPostPopupCloseBtn" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">X</button>
          </div>
          <form id="jobForm" onsubmit="handleJobPostSubmission(event)">
            <div class="modal-body">
              <!-- Job Details Section -->
              <section class="mb-4">
                <h6 class="text-secondary">Basic Details</h6><hr>
                <div class="row g-3">
                  <div class="col-md-6">
                    <div class="form-floating">
                      <input type="text" id="jobTitle" class="form-control" placeholder="Enter Job Title" required />
                      <label for="jobTitle">Job Title</label>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-floating">
                      <input type="text" id="company" class="form-control" placeholder="Enter Company Name" required />
                      <label for="company">Company Name</label>
                    </div>
                  </div>
                </div>
              </section>
    
              <!-- Location Details Section -->
              <section class="mb-4"><hr>
                <h6 class="text-secondary">Location</h6>
                <div class="row g-3">
                  <div class="col-md-4">
                    <div class="form-floating">
                      <input type="text" id="city" class="form-control" placeholder="Enter City" required />
                      <label for="city">City</label>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-floating">
                      <input type="text" id="state" class="form-control" placeholder="Enter State" required />
                      <label for="state">State</label>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="form-floating">
                      <input type="text" id="zip" class="form-control" placeholder="Enter Zip Code" required />
                      <label for="zip">Zip Code</label>
                    </div>
                  </div>
                </div>
              </section>
    
              <!-- Job Type and Category Section -->
              <section class="mb-4"><hr>
                <h6 class="text-secondary">Job Preferences</h6>

                <div class="row g-3">
                <div class="col-md-4">
                  <div class="form-floating">
                    <input type="text" id="jobSalary" class="form-control" placeholder="$56,000" required />
                    <label for="jobSalary">Salary</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <select id="jobIndustry" class="form-select" required>
                      <option value="" disabled selected>Select Industry</option>
                      <option value="Information Technology">Information Technology</option>
                      <option value="Healthcare">Healthcare</option>
                      <option value="Education">Education</option>
                      <option value="Finance">Finance</option>
                      <option value="Construction">Construction</option>
                      <option value="Manufacturing">Manufacturing</option>
                      <option value="Transportation & Logistics">Transportation & Logistics</option>
                      <option value="Hospitality">Hospitality</option>
                      <option value="Retail">Retail</option>
                      <option value="Real Estate">Real Estate</option>
                      <option value="Energy & Utilities">Energy & Utilities</option>
                      <option value="Entertainment & Media">Entertainment & Media</option>
                      <option value="Telecommunications">Telecommunications</option>
                      <option value="Consulting">Consulting</option>
                      <option value="Other">Other</option>
                    </select>
                    <label for="jobIndustry">Industry</label>
                  </div>
                </div>
              </div>


                <div class="row g-3">
                  <div class="col-md-6">
                    <div class="form-floating">
                      <select id="jobType" class="form-select" required>
                        <option value="" disabled selected>Select Job Type</option>
                        <option value="Full-Time">Full-Time</option>
                        <option value="Part-Time">Part-Time</option>
                        <option value="Contract">Contract</option>
                        <option value="Temporary">Temporary</option>
                        <option value="Internship">Internship</option>
                        <option value="Freelance">Freelance</option>
                      </select>
                      <label for="jobType">Job Type</label>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-floating">
                      <select id="jobCategory" class="form-select" required>
                        <option value="" disabled selected>Select Category</option>
                        <option value="IT & Software">IT & Software</option>
                        <option value="Healthcare">Healthcare</option>
                        <option value="Education">Education</option>
                        <option value="Finance">Finance</option>
                        <option value="Construction">Construction</option>
                        <option value="Retail">Retail</option>
                        <option value="Other">Other</option>
                      </select>
                      <label for="jobCategory">Job Category</label>
                    </div>
                  </div>




                </div>
              </section>
    
              <!-- Description and Tags -->
              <section class="mb-4"><hr>
                <h6 class="text-secondary">Additional Information</h6>
                <div class="row g-3">
                  <div class="col-12">
                    <div class="form-floating">
                      <textarea id="jobDescription" class="form-control" placeholder="Enter Job Description" style="height: 150px;" required></textarea>
                      <label for="jobDescription">Job Description</label>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="form-floating">
                      <label for="tagsSET-tag">Tags</label>
                      <div id="tagsContainertagsSET-tag">
                        <input type="text" class="form-control" id="tagsSET-tag" placeholder="(e.g., JavaScript, Management)">
                       </div>


                    </div>
                  </div>




                  <div class="modal-footer border-0 d-flex flex-column align-items-start">
                    <div class="mb-2 w-100 d-flex justify-content-between">
                      <button type="button" class="btn btn-outline-primary me-2" onclick="previewJobPost()">Preview</button>
                      <button type="submit" class="btn btn-primary">Submit Job</button>
                    </div>
                  </div>
                  <div class="col-12">

                    <div class="d-flex align-items-center justify-content-between mt-3">
                      <small class="text-muted">
                        By submitting this post, you acknowledge that you have read and agree to our
                        <a href="https://reelcareer.co/views/terms" target="_blank" class="text-primary">Terms and Conditions</a>.
                      </small>
                      <div class="form-check ms-2">
                        <input class="form-check-input" type="checkbox" id="complianceCheck" />
                        <label class="form-check-label" for="complianceCheck">
                          I Agree
                        </label>
                      </div>
                    </div>
                    
                          <!-- Job Preview Section (hidden initially) -->
    <div id="previewSection" style="display: none;">
      <h5>Preview Your Job Post</h5>
      <hr>
      <p><strong>Title:</strong> <span id="previewTitle"></span></p>
      <p><strong>Company:</strong> <span id="previewCompany"></span></p>
      <p><strong>Location:</strong> <span id="previewLocation"></span></p>
      <p><strong>Industry:</strong> <span id="previewJobIndustry"></span></p>
      <p><strong>Category:</strong> <span id="previewJobCategory"></span></p>
      <p><strong>Job Type:</strong> <span id="previewJobType"></span></p>
      <p><strong>Salary:</strong> <span id="previewSalary"></span></p>
      <p><strong>Description:</strong> <span id="previewDescription"></span></p>
      <p><strong>Tags:</strong> <span id="previewTags"></span></p>

      <div class="mb-2 w-100 d-flex justify-content-between">
        <button type="button" class="btn btn-outline-secondary" onclick="goBackToForm()">Back to Edit</button>
        <button type="submit" class="btn btn-primary">Submit Job</button>
      </div>
    </div>
                </div>


                </div>
              </section>
            </div>
    

          </form>
        </div>
      </div>
    </div>
        


    <style>
      .modal-content {
        border-radius: 12px;
        overflow: hidden;
        background: #ffffff;
      }
    
      .modal-header, .modal-footer {
        background-color: #f8f9fa;
      }
    
      .btn-close {
        outline: none;
    box-shadow: none;
    width: 50px;
    height: 50px;
    color: white;
      }
      .modal-body {
    position: relative;
    -ms-flex: 1 1 auto;
    flex: 1 1 auto;
    padding: 1rem;
    overflow-y: scroll;
    padding-bottom: 500px;
    height: 600px;
}

.modal {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1050;
    display: none;
    width: 100%;
    height: 100%;
    overflow: hidden;
    outline: 0;
    background-color: #f0f8ffc2;
}
      .form-floating .form-control {
        border-radius: 8px;
      }
    
      .form-floating label {
        color: #6c757d;
      }
    
      .form-floating .form-control:focus,
      .form-floating .form-select:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 5px rgba(13, 110, 253, 0.5);
      }
    
      .btn-primary {
        background: #0d6efd;
        border: none;
        transition: background 0.3s ease;
      }
    
      .btn-primary:hover {
        background: #004b9d;
      }
    
      .btn-light {
        color: #212529;
        background-color: #e9ecef;
        border: none;
      }
    
      .btn-light:hover {
        background-color: #d6d8db;
      }
    
      .modal-dialog {
        animation: fadeIn 0.3s ease;
      }
    
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
    </style>
    
    









  <div class="container mt-5"> 
    <!-- Use a container for consistent padding -->
 

  <!-- Dynamic News Section -->
  <div class="related-blogs">
    <h3 class="font-weight-bold">Related Articles</h3>
    <hr class="my-2" />
    <div id="blogContainer" class="row p-4 noCopy">
        <!-- Blog links will be dynamically inserted here -->
    </div>
</div>


</div>



</main>



  <style>
    searchArea .form-control {
      border-radius: 50px;
      padding: 15px 20px;
    }

    searchArea .btn-primary {
      border-radius: 50px;
      padding: 12px 30px;
      font-size: 1rem;
    }

    .pagination .page-item.active .page-link {
      background-color: #2980b9;
      border-color: #2980b9;
    }
  </style>

  <script>

function previewJobPost() {
  // Hide the form section
  // Show the preview section
  document.getElementById("previewSection").style.display = "block";

  // Get values from the form
  const title = document.getElementById('jobTitle').value;
  const company = document.getElementById('company').value;
  const city = document.getElementById('city').value;
  const state = document.getElementById('state').value;
  const zip = document.getElementById('zip').value;
  const jobIndustry = document.getElementById('jobIndustry').value;
  const jobCategory = document.getElementById('jobCategory').value;
  const jobType = document.getElementById('jobType').value;
  const salary = document.getElementById('jobSalary').value;
  const description = document.getElementById('jobDescription').value;
  const tags = document.getElementById('tagsSET-tag').value;

  // Set preview content
  document.getElementById('previewTitle').textContent = title;
  document.getElementById('previewCompany').textContent = company;
  document.getElementById('previewLocation').textContent = `${city}, ${state} ${zip}`;
  document.getElementById('previewJobType').textContent = jobType;
  document.getElementById('previewJobIndustry').textContent = jobIndustry;
  document.getElementById('previewJobCategory').textContent = jobCategory;
  document.getElementById('previewSalary').textContent = salary;
  document.getElementById('previewDescription').textContent = description;
  document.getElementById('previewTags').textContent = tags;
}

function goBackToForm() {
  // Show the form section again
  // Hide the preview section
  document.getElementById("previewSection").style.display = "none";
}




// Function to open the modal
function openJobPostModal() {
  // Get the modal element
  //var modal = new bootstrap.Modal(document.getElementById('jobPostPopup'));
  
  // Show the modal
  //modal.show();

showModal("jobPostPopup");
}



function closeJobPostModal() {
  // Get the modal element
  //var modal = new bootstrap.Modal(document.getElementById('jobPostPopup'));
  
  // Show the modal
  //modal.show();

hideModal("jobPostPopup");
}


    // Function to redirect user to the job details page with job ID in the URL
    function showJobDetailsFunc(jobId) {
      // Construct the URL with the job ID as a query parameter
      const jobDetailsUrl = `https://reelcareer.co/jobs/job-details?id=${jobId}`;
      // Redirect to the job details page
      window.location.href = jobDetailsUrl;
    }
  </script>

  <!-- Footer -->
  <footer id="dynamic-footer">
<div class="footerMainContainer text-center">
<p class="footerSocialMedia"></p>
<nav class="footerNavContainer">

<div class="footerNavItems">
<h5>General</h5>
<a href="/" title="ReelCareer - #1 Job Board - Find a job today">ReelCareer</a><a href="/views/about" title="About ReelCareer - Who We Are and Our Mission">About ReelCareer</a><a href="/views/contact" title="Contact ReelCareer - Get in Touch for Support and Inquiries">Contact Us</a><a href="/job-listings" title="Job Listings - Search and Apply for Job Openings">Job Listings</a><a href="/membership" title="Membership - Unlock Premium Features and Job Opportunities">Membership</a>
</div>

<div class="footerNavItems">
<h5>Legal</h5>
<a href="/views/privacy" title="Privacy Policy - How We Protect Your Data">Privacy Policy</a><a href="/views/terms" title="Terms of Use - Website User Agreement and Guidelines">Terms of Use</a>
</div>

<div class="footerNavItems">
<h5>Content</h5>
<a href="/views/blogs" title="ReelCareer Blog - Career Advice, News, and Insights">Blogs</a><a href="/views/news" title="ReelCareer News - Latest Updates and Industry Trends">News</a><a href="/views/Personality-&-Trait-Tests" title="Personality & Trait Tests - Discover Your Strengths and Work Style">Personality & Trait Tests</a><a href="/reels" title="Video Reels - Showcase Your Resume with a Personal Touch">Video Reels</a>
</div>

<div class="footerNavItems">
<h5>Support</h5>
<a href="/views/faq" title="Frequently Asked Questions - Get Answers to Common Queries">FAQs</a><a href="/bot" title="Chat Bot - Get Instant Assistance with Your Job Search">Chat Bot</a><a href="/support" title="Support - Get Help with Your Job Search and Account">Support</a>
</div>

<div class="footerNavItems">
<h5>Marketing</h5>
<a href="/views/referral" title="Join the ReelCareer Affiliate Program and Earn Rewards">Affiliate Program</a>
</div>

<div class="footerNavItems">
<h5>Admin</h5>
<a href="/backend/dashboard" title="Admin Dashboard - Manage Users, Jobs, and Content">Admin</a>
</div>

<div class="footerNavItems">
<h5>Features</h5>
<a href="/jobs/city" title="City Jobs - Find Career Opportunities by Location">City Jobs</a><a href="/jobs/state" title="State Jobs - Explore Job Listings by State">State Jobs</a><a href="/jobs/locations" title="Job Locations - Browse Jobs in Your Area">Job Locations</a>
</div>
</nav>
<p class="footerCopyWrite">© 2024 ReelCareer</p>

</div>
<button id="backToTop" title="Go to top">↑</button>

</footer>


  <!-- Firebase configuration/ Login& Out -->
  

  
    <!-- Firebase JS SDK and Custom Scripts -->

    <script type="module">
  import {
      db, doc, getDoc, query, updateDoc,
      setDoc, ref, signInWithPopup, orderBy, limit, 
      uploadBytes, OAuthProvider, arrayUnion, getStorage,
      signOut, addDoc, increment, onAuthStateChanged, signInAnonymously,
      createUserWithEmailAndPassword, signInWithEmailAndPassword,
      where, getDocs, storage, collection, deleteObject, 
      auth, analytics, deleteDoc, getDownloadURL
  } from 'https://reelcareer.co/scripts/js/load/module.js';

  
      let lastVisible = null; // To store the last document loaded 

const userJobInterest = getUserJobInterest();
const userlocationData = prepareLocationForFirebase();


function resetForm() {
  // Get all input elements within the form
  const form = document.getElementById("jobPostForm"); // Replace with your form ID
  if (form) {
    form.reset(); // This clears all input values in the form
  }

  // Optionally, clear custom fields that are not part of standard form inputs
  clearCustomFields();

  // Close the job post modal
  closeJobPostModal();
}

// Helper function to clear custom fields, such as dynamic tag inputs
function clearCustomFields() {
  const tagInput = document.querySelector("#tagsSET-tag"); // Adjust selector as needed
  if (tagInput) tagInput.value = "";

  // If you have dynamically generated fields or a tag container
  const tagContainer = document.querySelector(".tags-container"); // Adjust selector
  if (tagContainer) tagContainer.innerHTML = ""; // Clear tag list
}

// Get values and split into arrays while sanitizing them
const searchableTitle = [
  ...sanitizeInput(getInputValue("jobTitle")).split(",").map((item) => item.toLowerCase().trim()),
  ...sanitizeInput(getInputValue("tagInput")).split(",").map((item) => item.toLowerCase().trim()),
  ...sanitizeInput(getInputValue("company")).split(",").map((item) => item.toLowerCase().trim())
];

async function handleJobPostSubmission(event) {
  event.preventDefault(); // Prevent form refresh

  


  const complianceCheck = document.getElementById("complianceCheck");

if (!complianceCheck || !complianceCheck.checked) {
  // Show error toast if the checkbox is not checked
  showToast(
    "Please agree to our Terms and Conditions before proceeding.",
    "error"
  );

  // Optionally focus the checkbox for accessibility
  complianceCheck?.focus();
  return false;
}




  try {
    // Check if the user is authenticated
    if (!auth.currentUser) {
      // Log in anonymously if the user is not authenticated
      await signInAnonymously(auth);
      console.log("User signed in anonymously");
    }

    const jobDetails = collectJobDetails(auth.currentUser.uid); // Collect form data


    // Add to Applications collection
    const applicationsRef = collection(db, "Jobs");

// Add the job to the Jobs collection
const jobDocRef = await addDoc(applicationsRef, {
  ...jobDetails,
  createdAt: new Date(),
  recruiterID: auth.currentUser?.uid || "Anonymous",
});
console.log("Document written with ID:", jobDocRef.id);

const jobId = jobDocRef.id; // Job ID generated from Firestore

// If the user is logged in, add to their Users collection
if (auth.currentUser && !auth.currentUser.isAnonymous) {
  const userRef = doc(db, "Users", auth.currentUser.uid);
  await updateDoc(userRef, {
    recruiterID: auth.currentUser.uid, // Ensures recruiterID is up-to-date
    timestamp: new Date(),
    jobPosts: arrayUnion({
      jobID: jobId, // Add the generated job ID here
      jobTitle: jobDetails.title || "Untitled Job",
      status: jobDetails.status || "draft",
      createdAt: new Date(),
      location: jobDetails.location || "Unknown Location",
      boosted: jobDetails.boosted || false,
      boostDuration: jobDetails.boostDuration || new Date(new Date().setDate(new Date().getDate() + 30)), // Default 30 days
      companyName: jobDetails.company || "Unknown Company",
      companyId: jobDetails.companyId || "No Company ID",
      salary: jobDetails.salary || 0,
      applicationDeadline: jobDetails.applicationDeadline || new Date(new Date().setDate(new Date().getDate() + 30)) // Default 30 days
    }),
  });
}

   // showSuccessModal(jobId, jobDetails); // Display success message
    if (auth.currentUser.isAnonymous) {
      showToast(
  "You're posting this job anonymously. @[Sign up to manage your job posts] more effectively!",
  "info",
  10000,
  "https://reelcareer.co/views/auth"
);

}else{
  showToast(
  "Your job is under review, manage your job post on you @[Recruiter Dashboard]",
  "success",
  10000,
  "https://reelcareer.co/u/recuiter/"
);

}

    resetForm(); // Clear the form
  } catch (error) {
    console.error("Error posting job:", error);
    showToast("Error posting job. Please try again.", "error");
  }
}

const generalTags = createTagInputSystem({
        tagsContainerId: "tagsContainertagsSET-tag",
        badgeClass: "tag-primary" // Custom badge class for general tags
    });

function collectJobDetails(uid) {
  return {
    recruiterID: uid,
    title: getInputValue("jobTitle"),
  company: getInputValue("company"),
  description: getInputValue("jobDescription"),
  searchableTitle: [
    ...new Set(
      sanitizeInput(getInputValue("jobTitle"))
        .split(",")
        .map(title => title.toLowerCase().trim())
    )
  ].join(","),
  location: `${sanitizeInput(getInputValue("city"))}, ${sanitizeInput(getInputValue("state"))} ${sanitizeInput(getInputValue("zip"))}`,
  city: sanitizeInput(getInputValue("city")),
  state: sanitizeInput(getInputValue("state")),
  zipCode: sanitizeInput(getInputValue("zip")),
  type: getInputValue("jobType"),
  jobCategory: getInputValue("jobCategory"),
  industry: getInputValue("jobIndustry"),
  salary: getInputValue("jobSalary"),
  salaryPayTime: getInputValue("salaryPayTime"),
  tags: sanitizeInput(getInputValue("tagsSET-tag"))
    .split(",")
    .map(tag => tag.trim()),
      boostDuration: new Date(new Date().setDate(new Date().getDate() + 30)), // 30-day boost duration
    applicationDeadline: new Date(new Date().setDate(new Date().getDate() + 30)), // 30-day deadline
    benefits: [], // Add benefits collection logic here if needed
    customQuestions: [], // Add custom questions logic here if needed
    createdAt: new Date(),
    boosted: false, // Default boost status
    status: "draft", // Default status
    complianceCheck: document.getElementById("complianceCheck")?.checked || false,
  };
}

function getInputValue(id) {
  return document.getElementById(id)?.value || "";
}



window.handleJobPostSubmission = handleJobPostSubmission;


// Function to fetch job listings from Firestore
async function fetchJobListings() {
  // Create the base query for Jobs
  let jobsQuery = query(collection(db, 'Jobs'));

  let locationSource = ''; // Variable to track the location-based source

  if (userlocationData.city) {
    jobsQuery = query(jobsQuery, where('Location', 'array-contains-any', userlocationData.city));
    locationSource += ' City Location, ';
  }

  if (userlocationData.state) {
    jobsQuery = query(jobsQuery, where('Location', 'array-contains-any', userlocationData.state));
    locationSource +=' State Location, ';
  }
  if (userJobInterest.length > 0) {
    jobsQuery = query(jobsQuery, where('searchableTitle', 'array-contains-any', userJobInterest));
    locationSource +=' Job Interest, ';

  }

 // console.log("userlocationData:state ", userlocationData.state);
  //console.log("userlocationData:city ", userlocationData.city);

  
  // Common conditions
  jobsQuery = query(jobsQuery, where('status', '==', 'active'));
  jobsQuery = query(jobsQuery, orderBy('createdAt', 'desc'));
  jobsQuery = query(jobsQuery, limit(50)); // Limit the results

  // Base query for Sponsors
  let sponsorsQuery = query(collection(db, 'Jobs'));
  
  let sponsorLocationSource = ''; // Variable to track the sponsor's location-based source

  // Adding dynamic filters based on userINFO for sponsors
  if (userlocationData.city) {
    sponsorsQuery = query(sponsorsQuery, where('Location', 'array-contains-any', userlocationData.city));
    sponsorLocationSource += 'City Location, ';
  }
  if (userlocationData.state) {
    sponsorsQuery = query(sponsorsQuery, where('Location', 'array-contains-any', userlocationData.state));
    sponsorLocationSource += ' State Location, ';
  }
  if (userJobInterest.length > 0) {
    sponsorsQuery = query(sponsorsQuery, where('searchableTitle', 'array-contains-any', userJobInterest));
    locationSource +=' Job Interest, ';

  }

  // Common conditions for sponsors
  sponsorsQuery = query(sponsorsQuery, where('status', '==', 'active'), where('boosted', 'in', ['Yes', 'Active']));
  sponsorsQuery = query(sponsorsQuery, orderBy('createdAt', 'desc'));
  sponsorsQuery = query(sponsorsQuery, limit(50)); // Limit the results

  try {
    // Fetch job listings and sponsors
    const jobListingsSnapshot = await getDocs(jobsQuery);
    const sponsorsSnapshot = await getDocs(sponsorsQuery);

    // Extract jobs from the snapshot
    const jobs = jobListingsSnapshot.docs.map(doc => ({
      id: doc.id, // Get the document ID
      ...doc.data(), // Spread the rest of the document data
      source: locationSource || 'General Query' // Add source based on location query or default to 'General Query'
    }));

    // Create a new array to store unique jobs
    const jobListings = [];
    // Use a Set to track job titles we've already seen
    const seenTitles = new Set();

    // Filter the jobs to ensure no duplicate titles
    jobs.forEach(job => {
      if (!seenTitles.has(job.title)) {
        jobListings.push({
          id: job.id, // Job document ID
          title: job.title,
          description: job.description,
          datePosted: job.createdAt,
          company: job.company,
          location: job.location,
          city: job.city,
          state: job.state,
          country: job.country,
          county: job.county,
          type: job.type,
          industry: job.industry,
          category: job.category,
          salary: job.salary,
          salaryMin: job.salaryMin,
          salaryMax: job.salaryMax,
          salaryPayTime: job.salaryPayTime,
          validThrough: job.boostExpiresAt,
          status: job.status,
          applicationAvailableBool: job.applicationAvailableBool,
          applicantsViewed: job.applicantsViewed,
          applicationWebsite: job.applicationWebsite,
          benefits: job.benefits || [], // Default to empty array if undefined
          boostExpiration: job.boostExpiration,
          boostExpiresAt: job.boostExpiresAt,
          boosted: job.boosted,
          boostedByID: job.boostedByID,
          contractToHire: job.contractToHire,
          immediateHire: job.immediateHire,
          savedForLater: job.savedForLater,
          searchableRequirements: job.searchableRequirements || '', // Default to empty string if undefined
          submittedBy: job.submittedBy,
          tags: job.tags || [], // Default to empty array if undefined
          source: job.source // Include the source from the general query
        });

        seenTitles.add(job.title); // Mark title as seen
      }
    });

    // Display sponsored jobs if any
    const featuredJobContainer = document.getElementById('featuredJobListings');
    featuredJobContainer.innerHTML = ''; // Clear existing featured jobs

    // Check if we have any results
    if (!jobListingsSnapshot.empty) {
      // Update the last visible document for pagination
      lastVisible = jobListingsSnapshot.docs[jobListingsSnapshot.docs.length - 1];

      // Handle unique job listings and render them
      jobListings.forEach(job => createJobCard(job, featuredJobContainer));
      //console.log("Filtered Job Listings:", jobListings);
    } else {
      console.log("No jobs found or no more jobs to load.");
    }

    // Process sponsored jobs
 

    return {
      jobListings    }; // Return both job listings and sponsored jobs
  } catch (error) {
    console.error("Error fetching job listings: ", error);
    return {
      jobListings: []    }; // Return empty arrays in case of an error
  }
}


function displayJobListings(jobListings) {
  const jobContainer = document.getElementById('featuredJobListings');
  jobContainer.innerHTML = ''; // Clear existing listings
  
 // console.log("displayJobListings:", jobListings);

  // Ensure jobListings is an array
  if (!Array.isArray(jobListings)) {
   // console.error('Error: jobListings is not defined or not an array:', jobListings);
    return;
  }

  // Iterate over jobListings and create a card for each
  jobListings.forEach(job => {
   // console.log("Displaying job:", job);
    createJobCard(job ,jobContainer); // Assuming createJobCard returns an HTML element or string
   // jobContainer.innerHTML += jobCard; // Append job card to container
  });
} 


  




    // Function to collect job requirements
    function collectJobRequirements() {
      return document.getElementById("jobRequirements").value.split(',').map(req => req.trim());
    }

    

// Function to handle keyup events on the inputs and toggle the featured jobs
function handleInputChange() {
    const noResultsMessage = document.getElementById('featuredJobsTop'); // Element to toggle visibility

    // Check if the featured jobs section is hidden
    if (noResultsMessage.style.display === "none") {
        noResultsMessage.style.display = "block";  // Show the featured jobs top section
    }
}

// Attach event listeners to the input fields for keyup event
document.getElementById('keywordInput').addEventListener('keyup', handleInputChange);
document.getElementById('locationInput').addEventListener('keyup', handleInputChange);
document.getElementById('jobTypeInput').addEventListener('keyup', handleInputChange);
document.getElementById('salaryInput').addEventListener('keyup', handleInputChange);

// Function to search for jobs
async function fetchFilteredJobListings({ 
  requirements, keyword, locationInput, jobTypeInput, salaryInput 
}) {
  try {
    // Ensure the Firestore DB instance is defined
    if (!db) {
      console.error("Firestore is not initialized. 'db' is undefined.");
      showToast("Error: Database is unavailable. Please try again later.", "error");
      return;
    }

    let jobsQuery = collection(db, "Jobs"); // Default query starts with the collection

    // Prepare search terms if keyword or location is provided
    const searchTerms = [];
    if (keyword) searchTerms.push(keyword.trim().toLowerCase());
    if (locationInput) searchTerms.push(locationInput.trim().toLowerCase());

    // Build dynamic query filters
    const filters = [];
    if (jobTypeInput) filters.push(where('type', '==', jobTypeInput.trim().toLowerCase()));
    if (salaryInput && salaryInput > 0) {
      const { lowerSalary, higherSalary } = adjustSalary(salaryInput);
      filters.push(where('salary', '>=', lowerSalary), where('salary', '<=', higherSalary));
    }
    if (searchTerms.length > 0) {
      filters.push(where('searchableTitle', 'array-contains-any', searchTerms));
    }
    filters.push(where('status', '==', 'active'));

    // Apply filters to the query
    jobsQuery = query(jobsQuery, ...filters, orderBy('createdAt', 'desc'), limit(20));

    // Execute the query
    const jobListingsSnapshot = await getDocs(jobsQuery);

    
    // Map and display results
    const jobListings = jobListingsSnapshot.docs.map(job => {
    const data = job.data(); // Access document data
    return {
        id: job.id, // Job document ID
        title: data.title,
        description: data.description,
        datePosted: data.createdAt,
        company: data.company,
        location: data.location,
        city: data.city,
        state: data.state,
        country: data.country,
        county: data.county,
        type: data.type,
        industry: data.industry,
        category: data.category,
        salary: data.salary,
        salaryMin: data.salaryMin,
        salaryMax: data.salaryMax,
        salaryPayTime: data.salaryPayTime,
        validThrough: data.boostExpiresAt,
        status: data.status,
        applicationAvailableBool: data.applicationAvailableBool,
        applicantsViewed: data.applicantsViewed,
        applicationWebsite: data.applicationWebsite,
        benefits: data.benefits || [], // Default to empty array if undefined
        boostExpiration: data.boostExpiration,
        boostExpiresAt: data.boostExpiresAt,
        boosted: data.boosted,
        boostedByID: data.boostedByID,
        contractToHire: data.contractToHire,
        immediateHire: data.immediateHire,
        savedForLater: data.savedForLater,
        searchableRequirements: data.searchableRequirements || '', // Default to empty string if undefined
        submittedBy: data.submittedBy,
        tags: data.tags || [], // Default to empty array if undefined
        source: data.source, // Include the source from the general query
    };
});
   console.log("search Fetched Job Listings:", jobListings);
    displayJobListings(jobListings);

    if (jobListings.length === 0) {
      showToast("No jobs found matching your criteria. Try adjusting filters.");
    }
  } catch (error) {
    console.error("Error fetching job listings:", error.message, error.stack);
    showToast("An error occurred while fetching jobs. Please try again later.", "error");
  }
}

// Utility function to adjust salary range
function adjustSalary(salaryInput) {
  return {
    lowerSalary: salaryInput * 0.95, // 5% lower
    higherSalary: salaryInput * 1.05 // 5% higher
  };
}

// Call the search function
function searchJobs() {
  const noResultsMessage = document.getElementById('featuredJobsTop');
  featuredJobsTop.style.display = "none";

  
  const requirements = collectJobRequirements();
// Get values from the inputs and sanitize them
const keyword = sanitizeInput(document.getElementById('keywordInput').value);
const locationInput = sanitizeInput(document.getElementById('locationInput').value);
const jobTypeInput = sanitizeInput(document.getElementById('jobTypeInput').value);
const salaryInput = parseInt(document.getElementById("salaryInput").value) || 0;  // Converts salary input to an integer


  fetchFilteredJobListings({
    requirements,
    keyword,
    locationInput,
    jobTypeInput,
    salaryInput
  });
}

window.searchJobs = searchJobs;

// Function to sanitize input to prevent issues (basic implementation)
function sanitizeInput(input) {
  return input ? input.replace(/[<>]/g, '') : '';
}

// Function to get URL parameters
function getUrlParameters() {
  const params = new URLSearchParams(window.location.search);

  // Extract and sanitize values
  const tag = sanitizeInput(params.get('tag'));
  const keywords = sanitizeInput(params.get('keywords'));
  const location = sanitizeInput(params.get('location'));
  const jobType = sanitizeInput(params.get('jobType'));
  const salaryRange = sanitizeInput(params.get('salaryRange'));

  return {
    tag: tag || '',
    keywords: keywords || '',
    location: location || '',
    jobType: jobType || '',
    salaryRange: salaryRange || ''
  };
}

// Populate the search bar with URL parameters
function populateSearchBar() {
  const { tag, keywords, location, jobType, salaryRange } = getUrlParameters();

  // Set values only if they exist
  if (tag) document.getElementById('keywordInput').value = tag;
  if (keywords) document.getElementById('keywordInput').value = keywords;
  if (location) document.getElementById('locationInput').value = location;
  if (jobType) document.getElementById('jobTypeInput').value = jobType;
  if (salaryRange) document.getElementById('salaryInput').value = salaryRange;


  // Return true if at least one value is populated
  return  tag || keywords || location || jobType || salaryRange ;
}
// On window load, populate search bar and fetch job listings
window.onload = async function () {
  const hasSearchParams = populateSearchBar();
 // console.log("hasSearchParams  ", hasSearchParams);

  if (hasSearchParams) {

   // console.log("hasSearchParams  TRUE");

    // If there are search parameters, fetch based on them
    if (typeof searchJobs === 'function') {
      await searchJobs(); // Assumes this function exists
    } else {
      console.warn('searchJobs function not defined.');
    }
  } else {
    // No search params, fetch general listings
    if (typeof fetchJobListings === 'function' && typeof displayJobListings === 'function') {
      const jobListings = await fetchJobListings();
      displayJobListings(jobListings);

    } else {
      console.warn('fetchJobListings or displayJobListings function not defined.');
    }
  }

  // Optionally load saved filters
  if (typeof loadSavedFilers === 'function') {
    loadSavedFilers();
  } else {
    console.warn('loadSavedFilers function not defined.');
  }
};


    
   // Function to fetch similar jobs based on tags

document.addEventListener("DOMContentLoaded", () => {
  setTimeout(() => {
    document.getElementById('main-search-btn').addEventListener('click', searchJobs);
    document.getElementById('jobPostPopupCloseBtn').addEventListener('click', closeJobPostModal);
    document.getElementById('quickPostJobButton').addEventListener('click', openJobPostModal);

loadRelatedBlogs();

}, 500);
});



  </script>
  <!-- jQuery (Must be included before Bootstrap JS) -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <!-- Popper.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>

  <!-- Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>


  <script>

    
// Function to normalize job type input
function normalizeJobType(jobType) {
    if (!jobType) return "";
    const lowerCaseType = jobType.toLowerCase().trim();
    return lowerCaseType.includes("full-time") ? "full-time" : 
           lowerCaseType.includes("part-time") ? "part-time" : jobType;
}

// Main function to retrieve and filter job cards based on input values
function filterJobCards() {
    // Retrieve all filter input values once

    
// Function to retrieve and sanitize input values from form fields
const values = {
  keyword: sanitizeInput(document.getElementById('keywordInput').value.toLowerCase()),
  location: sanitizeInput(document.getElementById('locationInput').value.toLowerCase()),
  jobType: sanitizeInput(document.getElementById('jobTypeInput').value.toLowerCase()),
  salary: sanitizeInput(document.getElementById('salaryInput').value),
  jobLocation: sanitizeInput(document.getElementById('jobLocation').value.toLowerCase()),
  city: sanitizeInput(document.getElementById('jobCity').value.toLowerCase()),
  state: sanitizeInput(document.getElementById('jobState').value.toLowerCase()),
  zipCode: sanitizeInput(document.getElementById('jobZip').value),
  salaryMin: parseInt(document.getElementById('salaryMin').value) || 0,
  salaryMax: parseInt(document.getElementById('salaryMax').value) || Infinity,
  contractType: sanitizeInput(document.getElementById('contractType').value.toLowerCase()),
  industry: sanitizeInput(document.getElementById('industry').value.toLowerCase()),
  immediateHire: document.getElementById('immediateHire').checked,
  contractToHire: document.getElementById('contractToHire').checked,
  postingDate: sanitizeInput(document.getElementById('postingDate').value),
  education: sanitizeInput(document.getElementById('education').value.toLowerCase()),
  experience: parseInt(document.getElementById('experience').value) || 0,
  requirements: document.getElementById('jobRequirements')
    .value.toLowerCase()
    .split(',')
    .map(item => sanitizeInput(item))
};



    // Select all job cards
    const jobCards = document.querySelectorAll('.JOB_CARD');
    let hasMatches = false; // Initialize match flag

    jobCards.forEach(card => {
        const matches = 
            (!values.keyword || card.dataset.title.toLowerCase().includes(values.keyword)) &&
            (!values.location || card.dataset.location.toLowerCase().includes(values.location)) &&
            (!values.city || card.dataset.city.toLowerCase().includes(values.city)) &&
            (!values.state || card.dataset.state.toLowerCase().includes(values.state)) &&
            (!values.zipCode || card.dataset.zipCode === values.zipCode) &&
            (!values.contractType || card.dataset.jobType.toLowerCase().includes(values.contractType)) &&
            (!values.industry || card.dataset.industry.toLowerCase().includes(values.industry)) &&
            (!values.immediateHire || card.dataset.immediateHire === 'true') &&
            (!values.contractToHire || card.dataset.contractToHire === 'true') &&
            (!values.postingDate || card.dataset.postingDate === values.postingDate) &&
            (!values.education || card.dataset.education.toLowerCase() === values.education) &&
            (!values.experience || parseInt(card.dataset.experience) >= values.experience) &&
            (values.salaryMin <= parseInt(card.dataset.salary || "0") && parseInt(card.dataset.salary || "0") <= values.salaryMax) &&
            (values.requirements.length === 0 || values.requirements.some(req => card.dataset.requirements.includes(req)));

        card.style.transition = 'opacity 0.5s ease';
        card.style.opacity = 0;

        // Show or hide the card based on whether it matches the search criteria
        setTimeout(() => {
            card.style.display = matches ? 'block' : 'none';
            card.style.opacity = 1;

            if (matches) hasMatches = true;
            toggleNoResultsMessage(hasMatches);
        }, 300);
    });
}

// Function to toggle "no results" message
function toggleNoResultsMessage(hasMatches) {
    const noResultsMessage = document.getElementById("noResultsMessage");
    noResultsMessage.style.transition = 'opacity 0.5s ease';
    noResultsMessage.style.display = hasMatches ? 'none' : 'block';
}

// Add event listeners for filter inputs
const filterInputs = [
    "keywordInput", "locationInput", "jobTypeInput", "salaryInput", 
    "jobLocation", "jobCity", "jobState", "jobZip", "salaryMin", 
    "salaryMax", "contractType", "industry", "immediateHire", 
    "contractToHire", "postingDate", "education", "experience", 
    "jobRequirements"
];
filterInputs.forEach(id => {
    const input = document.getElementById(id);
    input.addEventListener(input.tagName === "SELECT" || input.type === "checkbox" ? "change" : "keyup", filterJobCards);
});

  </script>

  
</body>

</html>
