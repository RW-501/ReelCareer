<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Your Obituary Account">
    <meta property="og:description" content="Fill in the details to create your obituary page. Leave a legacy that people will cherish.">
    <meta property="og:image" content="https://reelcareer.co/images/8pic_rc.png">
    <meta property="og:url" content="https://reelcareer.co/obituaries/account">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Create Your Obituary">
    <meta name="twitter:description" content="Fill in the details to create your obituary page. Leave a legacy that people will cherish.">
    <meta name="twitter:image" content="https://reelcareer.co/images/8pic_rc.png">
    <meta name="twitter:url" content="https://reelcareer.co/obituaries/account">
    
    <!-- General Meta Tags -->
    <meta name="description" content="Create your personalized obituary page. Add details, photos, and memories to leave a lasting legacy.">
    <meta name="keywords" content="obituary, create obituary, legacy, remembrance, celebration of life">
    <meta name="author" content="ReelCareer">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#ffffff">
          <!-- Canonical Tag for SEO -->
  <link rel="canonical" href="https://reelcareer.co/obituaries/account"> <!-- Ensures search engines index the preferred URL -->

  <!-- Standard Favicon -->
  <link rel="icon" type="image/x-icon" href="https://reelcareer.co/images/favicons/favicon.ico">

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "url": "https://reelcareer.co/obituaries/create",
      "name": "Create Your Obituary",
      "description": "Create your personalized obituary page. Add details, photos, and memories to leave a lasting legacy.",
      "author": {
        "@type": "Organization",
        "name": "ReelCareer",
        "url": "https://reelcareer.co/"
      },
      "publisher": {
        "@type": "Organization",
        "name": "ReelCareer",
        "url": "https://reelcareer.co/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://reelcareer.co/images/8pic_rc.png",
          "width": 200,
          "height": 60
        }
      },
      "image": {
        "@type": "ImageObject",
        "url": "https://reelcareer.co/images/8pic_rc.png",
        "width": 1200,
        "height": 630
      }
    }
    </script>

    <title>Your Obituary Account | ReelCareer</title>

<!-- Main Script Loader -->
<script src="https://reelcareer.co/scripts/js/loader.js"></script>

<style>
  main {


    
    .content-card {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
  }


  h3 {
    font-size: 1.75rem;
    color: #83bad9;
    text-shadow: -1px 1px 0px #9e9a9a;
    font-weight: 800;
}

#guestbook-list {
    overflow-y: auto;
    max-height: 500px;
}

#processPayoutArea {
    padding: 20px;

}


.action-btn {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin: auto;
  }
  .action-btn:hover {
    background-color: #0056b3;
  }

  .popup {
   
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1050;
    display: none;
    width: 100%;
    height: 100%;
    overflow: hidden;
    outline: 0;
    background-color: #9e9a9a82;
  }

.open {
  display: block;
}

.popup-content {
    position: absolute;
    display: grid;
    width: 90%;
    pointer-events: auto;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid rgba(0,0,0,.2);
    border-radius: .3rem;
    outline: 0;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 2rem auto;
    max-height: 500px;
    padding: 1rem;
    overflow-y: scroll;
    align-content: stretch;
    justify-content: center;
    align-items: center;
    justify-items: stretch;
    gap: .5rem;
}

.popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.highlighted-amount {
  color: #28a745;
  font-weight: bold;
}
.button-group {
  display: flex;
  gap: 10px;
}

.btn {
  flex: 1;
  padding: 10px;
  cursor: pointer;
  border-radius: 4px;
}
.confirm-btn {
  color: white;
  border: none;
}
.cancel-btn {
  background: #dc3545;
  color: white;
  border: none;
}




.totalPayout {
    margin: 1rem auto;
}


.transaction-entry {
    background-color: #f3f3f3;
    padding: .5rem;
    border-radius: 10px;
    margin: 1.5rem;
}
.transaction-details p {

  margin-top: 0;
  margin-bottom: 0;
}
}    
  </style>
  
</head>
<body>

  <!-- Navigation Bar -->
  <nav id="Main-Nav_bar" class="navbar navbar-expand-lg main-navbar-light shadow-sm sticky-top" role="navigation">
    <div class="container d-flex align-items-center justify-content-between">
      <!-- Logo -->
      <a class="navbar-brand embossed" id="MAIN-LOGO-Reel-Career" href="https://reelcareer.co/" aria-label="Go to home page">
        ReelCareer
      </a>

      <!-- Always-visible Icons -->
      <ul class="navbar-nav d-flex flex-row justify-content-center flex-grow-1" id="iconBar">
        
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/job-listings" aria-label="Go to job listings page">
          <i class="fa fa-briefcase"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/reels" aria-label="Go to reels page">
          <i class="fa fa-video"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/views/membership" aria-label="Go to membership page">
          <i class="fa fa-user"></i>
        </a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link" href="https://reelcareer.co/views/blogs" aria-label="Go to blogs page">
          <i class="fa fa-pencil-alt"></i>
        </a>
      </li>
      </ul>

      <!-- Auth Section -->
      <div id="authSection" class="d-flex align-items-center"><button class="btn btn-primary" id="loginButton">Login / Create Account</button></div>
    </div>
  </nav>


<header>
    <h1 id="breadcrumbText">Edit Obituaries</h1>
</header>

   <!-- Breadcrumb Section -->
<div id="main-breadcrumb" class="breadcrumb">
    <a href="https://reelcareer.co/">Home</a> | <a href="https://reelcareer.co/obituaries">Obituaries</a> 
    | <a href="https://reelcareer.co/obituaries/create">Create</a>| <a href="https://reelcareer.co/obituaries/about">About</a>
</div>


    <!-- Main Content Section -->
    <main id="main-content">
        <section id="user-header">
            <div class="profile-card">
              <img id="profile-image" src="" alt="User Image" class="profile-img">
              <h2 id="user-name">User Name</h2>
              <p id="join-date">Join Date: MM/DD/YYYY</p>
            </div>
          </section>
          
        
        <section id="guestbook-section" class="content-card">
          <h3>Guestbook Moderation</h3>
          <div id="guestbook-list"></div>

          <div id="processPayoutArea">

          <button class="action-btn" onclick="processPayout()">Process Payout</button>
        </div>
        </section>
        
        <section id="payout-modal" class="popup">
          <div class="popup-content">
            <div class="popup-header">
              <h3>Process Payout</h3>
              <button onclick="closeModal()" class="close-btn">&times;</button>
            </div>
            <div class="totalPayout">
              <strong>Total Available for Payout:</strong> 
              <span id="total-payout" class="highlighted-amount">$0.00</span>
            </div>
            <div id="transactions-log" class="transaction-log"></div>
        
            <div id="last-request-date" class="info-text"></div>
            <div id="request-note" class="info-text"></div>
        
            <label for="requested-amount" class="input-label">Enter Amount to Request:</label>
            <input type="number" id="requested-amount" placeholder="Enter amount" class="input-box">
            
            <div class="button-group">
              <button onclick="confirmPayout()" class="btn confirm-btn">Confirm</button>
              <button onclick="closeModal()" class="btn cancel-btn">Close</button>
            </div>
          </div>
        </section>
        


        <div id="user-toolbar" class="toolbar">
            <!-- Toolbar buttons will be injected here -->
        </div>
        
      </main>
      
      


    <footer class="site-footer">
        <div class="footer-content">
            <p>Leave a lasting legacy. Share your story with the world.</p>
            <nav class="footer-nav">
                <a href="https://reelcareer.co/obituaries/">Obituaries</a> | 
                <a href="https://reelcareer.co/obituaries/create">Create an Obituary</a> | 
                <a href="https://reelcareer.co/obituaries/about">About Career Obituaries</a> | 
                <a href="https://reelcareer.co/">ReelCareer</a>
            </nav>
            <p>&copy; <span id="currentYear"></span> ReelCareer.co. All rights reserved.</p>
        </div>
    </footer>
    
    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"></script> <!-- For fetching IP -->


    

        <!-- Include Firebase SDK as a module -->
<script type="module">
    import {
        db, getStorage, ref, uploadBytes, getDownloadURL, limit,
  doc, arrayUnion, RecaptchaVerifier, increment, getDoc, arrayRemove, signInWithPhoneNumber,
  query, updateDoc, setDoc, addDoc, signInAnonymously, orderBy, onAuthStateChanged,
  uploadBytesResumable, signInWithPopup, FacebookAuthProvider, GoogleAuthProvider, startAfter,
  OAuthProvider, signOut, deleteDoc, getFirestore, serverTimestamp,
  createUserWithEmailAndPassword, signInWithEmailAndPassword, deleteObject,
  where, getDocs, storage, getAuth, collection, auth, analytics,
  googleProvider,onSnapshot , linkWithCredential, EmailAuthProvider ,
  getUserId // Export the function
    } from 'https://reelcareer.co/scripts/js/load/module.js';

    
        // Listen for authentication state changes to get the user ID
        let userID = '';
        let pageID = '';
        let pageName = '';
        document.addEventListener('DOMContentLoaded', () => {






          onAuthStateChanged(auth, async (user) => {
  if (user) {
    try {
       userID = user.uid;
      console.log("User ID:", userID);

      // Extract pageName and pageID from URL query parameters
      const urlParams = new URLSearchParams(window.location.search);
       pageName = urlParams.get("pageName");
       pageID = urlParams.get("pageID");

      if (!pageID) {
        console.warn("Missing pageID in URL parameters.");
        return;
      }

      const ownerRef = collection(db, `A_Obituaries`);
      const ownerQuery = query(ownerRef, where('userID', '==', userID), where('__name__', '==', pageID));
      const ownerSnapshot = await getDocs(ownerQuery);

      if (ownerSnapshot.empty) {
        console.log("You do not have ownership of this page.");
        return;  // Stop execution if the user does not own the page
      }

      console.log(`Welcome! You are the owner of the page: ${pageName}`);

     console.log("pageName:", pageName);
     console.log("pageID:", pageID);
     loadGuestbookPosts(pageID);

    if (pageName) {
        createToolbar(pageID, pageName);

    }

// Get user data from localStorage or initialize as an empty array
const userDataSaved = getUserData() || [];  // Assume getUserData() fetches stored user data
if (userDataSaved.length > 0) {
  // Assuming userDataSaved[0] contains user object details
  const user = userDataSaved[0];
  
  // Update user header section
  const profileImageElement = document.getElementById('profile-image');
  const userNameElement = document.getElementById('user-name');
  const joinDateElement = document.getElementById('join-date');
  
  profileImageElement.src = user.profilePicture || 'default-user-image.jpg';  // Fallback image
  profileImageElement.alt = `${user.name}'s Profile Image`;  // Set descriptive alt text
  
  userNameElement.textContent = user.displayName || 'User Name';  // Fallback name
  joinDateElement.textContent = `Join Date: ${user.joinDate || 'MM/DD/YYYY'}`;  // Fallback date
} else {
  console.warn('No user data found in storage.');
}

// Mock getUserData function (replace with actual implementation)
function getUserData() {
  return JSON.parse(localStorage.getItem('userData')) || [];
}


} catch (error) {
      console.error("Error checking page ownership:", error);
    }

  } else {
    console.log("No user signed in ...");
    
  }

    
});

    
});

        // Fetch user's IP address using an external service
        async function getUserIP() {
            try {
                const response = await axios.get('https://api.ipify.org?format=json');
                return response.data.ip;
            } catch (error) {
                console.error('Error fetching IP address:', error);
                return 'Unknown IP';
            }
        }

// Function to fetch user IP and location details
async function getUserDetails() {
  try {
    const response = await fetch("https://ipapi.co/json/");
    const data = await response.json();

    return {
      ip: data.ip,
      city: data.city,
      state: data.region,
      country: data.country_name,
      location: {
        latitude: data.latitude,
        longitude: data.longitude,
      },
    };
  } catch (error) {
    console.error("Error fetching user details:", error);
    return null;
  }
}

// Utility: Format Timestamp
function formatTimestamp(timestamp) {
  // Convert Firebase Timestamp to milliseconds
  const date = new Date(timestamp.seconds * 1000 + Math.floor(timestamp.nanoseconds / 1e6));

  // Format the date as MM/DD/YYYY
  return `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`;
}

// Function to load and display guestbook posts
async function loadGuestbookPosts(pageID) {
    try {
        const guestbookRef = collection(db, `A_Obituaries/${pageID}/Guestbook`);
        const guestbookQuery = query(guestbookRef, orderBy('timestamp', 'desc')); // Order by timestamp descending
        const guestbookSnapshot = await getDocs(guestbookQuery);
        const guestbookList = document.getElementById("guestbook-list");
        guestbookList.innerHTML = "";  // Clear previous list

        guestbookSnapshot.forEach(doc => {
            const postData = doc.data();
            const postID = doc.id;

            const postElement = document.createElement("div");
            postElement.classList.add("guestbook-post");
            postElement.innerHTML = `
                <p><strong>From:</strong> ${(postData.name)}
                  <br><strong>Message:</strong> ${(postData.message)}</p>
                <p><strong>Date:</strong> ${formatTimestamp(postData.timestamp)}</p>
                <p><strong>Status:</strong> ${postData.status || "Pending"}</p>
                ${postData.giftType ? `
                <div class='gifts'>
                  <p><strong>Gift:</strong> ${(postData.gift)}</p>
                </div>
                ` : ""}
                <div class="controls">
                    <button onclick="privatePost('${postID}')">Private</button>
                    <button onclick="deletePost('${postID}')">Delete</button>
                </div><hr>
            `;
            guestbookList.appendChild(postElement);
        });
    } catch (error) {
        console.error("Error loading guestbook posts:", error);
    }
}


window.loadGuestbookPosts = loadGuestbookPosts;






// Function to approve a guestbook post
async function privatePost(postID) {
    const postRef = doc(db, "Guestbook", postID);
    await updateDoc(postRef, { status: "private" });
    loadGuestbookPosts(pageID);
}

// Function to reject a guestbook post
async function rejectPost(postID) {
    const postRef = doc(db, "Guestbook", postID);
    await updateDoc(postRef, { status: "Rejected" });
    loadGuestbookPosts(pageID);
}

// Function to delete a guestbook post
async function deletePost(postID) {
    const postRef = doc(db, "Guestbook", postID);
    await deleteDoc(postRef);
    loadGuestbookPosts(pageID);

}





function createTransactionElement(doc, transactionData, isWithdraw) {
    const transactionElement = document.createElement("div");
    transactionElement.classList.add("transaction-entry");
    const timestamp = transactionData.timestamp 
        ? new Date(transactionData.timestamp.seconds * 1000).toLocaleString() 
        : 'No date';
    const fee = transactionData.amount ? transactionData.amount * 0.10 : 0;
    const netAmount = transactionData.amount - fee;

    transactionElement.innerHTML = `
      <div class="transaction-details">
        <p><strong>Transaction ID:</strong> ${doc.id}</p>
        <p><strong>Note:</strong> ${transactionData.note}</p>
        <p><strong>Date:</strong> ${timestamp}</p>
        ${isWithdraw ? `
        <p><strong>Withdraw Amount:</strong> $${transactionData.withdraw_amount.toFixed(2)}</p>
        <p><strong>Available Amount:</strong> $${transactionData.availableAmount.toFixed(2)}</p>` : `
        <p><strong>Gift Type:</strong> ${transactionData.giftType || 'N/A'}</p>
        <p><strong>Amount:</strong> $${transactionData.amount.toFixed(2)}</p>
        <p><strong>Fee (10%):</strong> $${fee.toFixed(2)}</p>
        <p><strong>Net Amount:</strong> $${netAmount.toFixed(2)}</p>
        `}
      </div>
      <hr>
      <p><strong>Status:</strong> ${transactionData.status || 'Active'}</p>
    `;
    return transactionElement;
}





let requestPayoutBool = false;

async function calculateTotalPayout() {
  try {
    const transactionsRef = collection(db, 'A_Transactions');
    const transactionsQuery = query(transactionsRef, where('pageID', '==', pageID));
    const transactionSnapshot = await getDocs(transactionsQuery);

    let totalGifts = 0;
    let withdrawnPayouts = 0;
    const transactionsLog = document.getElementById("transactions-log");
    transactionsLog.innerHTML = '';  // Clear previous logs

    transactionSnapshot.forEach(doc => {
      const transactionData = doc.data();
      const payPalPayStatus = transactionData.paymentDetails?.purchase_units?.[0]?.payments?.captures?.[0]?.status || 'Unknown';
      const isWithdraw = transactionData.transactionType === "withdraw";

      if (payPalPayStatus === "COMPLETED" && !isWithdraw) {
        const fee = transactionData.amount * 0.10;
        const netAmount = transactionData.amount - fee;
        totalGifts += netAmount;
      } else if (isWithdraw) {
        withdrawnPayouts += transactionData.withdraw_amount || 0;
      }

      const transactionElement = createTransactionElement(doc.id, transactionData, isWithdraw, payPalPayStatus);
      transactionsLog.appendChild(transactionElement);
    });

    const availablePayout = totalGifts - withdrawnPayouts;
    handleRequestCooldown(transactionData);
    return availablePayout;
  } catch (error) {
    console.error("Error calculating total payout:", error);
    return 0;
  }
}
window.calculateTotalPayout = calculateTotalPayout;

function handleRequestCooldown(transactionData) {
  const lastRequestDate = new Date(transactionData.requestDate || 0);
  const sevenDaysLater = new Date(lastRequestDate.getTime() + 7 * 24 * 60 * 60 * 1000);
  const now = new Date();

  if (now >= sevenDaysLater) {
    requestPayoutBool = true;
    document.getElementById("request-note").textContent = "You can request funds.";
  } else {
    requestPayoutBool = false;
    document.getElementById("request-note").textContent = `You can request funds on ${sevenDaysLater.toLocaleDateString()}.`;
  }
  document.getElementById("last-request-date").textContent = `Last Request: ${lastRequestDate.toLocaleDateString()}`;
}

async function processPayout() {
  const availableAmount = await calculateTotalPayout();
  document.getElementById("total-payout").textContent = availableAmount.toFixed(2);

  if (!requestPayoutBool) {
    showToast("Request can only be made once every 7 days", 'error');
    return;
  }

  showToast(`Total available payout: $${availableAmount.toFixed(2)}`, 'success');
  document.getElementById("payout-modal").classList.add('open');
}





window.processPayout = processPayout;

// Function to confirm payout and process the transaction
async function confirmPayout() {




    const requestedAmount = parseFloat(document.getElementById("requested-amount").value) || 0;
    const availableAmount = await calculateTotalPayout();

    if (requestedAmount > availableAmount) {
        showToast("Requested amount exceeds the available balance.", 'error');
    } else if (requestedAmount <= 0) {
        showToast("Please enter a valid payout amount.", 'error');
    } else {
        await createPayoutTransaction(requestedAmount, availableAmount);
        showToast("Payout request confirmed. Your payout is being processed.", 'success');
        closeModal();
    }
}


window.confirmPayout = confirmPayout;

// Function to create a new payout transaction
async function createPayoutTransaction(amount, availableAmount) {
    const transactionsRef = collection(db, 'A_Transactions');
    
    // Query transactions for the specified pageID
    const transactionsQuery = query(transactionsRef, where('pageID', '==', pageID));


    const transactionData = {
        pageID,
        availableAmount,
        withdraw_amount: amount,
        note:  `Withdraw Request: ${pageID}`,
        transactionType: `Withdraw`,
        status: "Pending",  // Mark as pending until processed
        timestamp: serverTimestamp(),
    };

    // Add the transaction to the database
    await addDoc(transactionsQuery, transactionData);
    getUserContactDetails(transactionData);

    console.log("Payout transaction created:", transactionData);
}




// Function to get user's email and phone number
async function getUserContactDetails(transactionData) {
    const userRef = doc(db, "Users", userID);
    const userDoc = await getDoc(userRef);
    const userData = userDoc.data();

    // Check for email and phone number
    const userEmail = userData.email || "N/A";
    const userPhone = userData.phone || "N/A";

    const confirmationText = `Would you like to send the payout details to this contact information?\nEmail: ${userEmail}\nPhone: ${userPhone}`;

    // Prompt user with the option to send payment info to this email/phone
    const sendToContact = confirm(confirmationText);
    if (sendToContact) {
      processPayoutTransaction(userEmail, userPhone, transactionData);
    } else {
        const alternativeContact = prompt("Please enter an alternative email or phone number:");
        processPayoutTransaction(alternativeContact, '',transactionData);
    }
}



// Function to process the payout transaction
async function processPayoutTransaction(contact, contact2, transactionData) {
    const payoutRef = collection(db, "Payouts");
    const payoutDoc = await addDoc(payoutRef, {
        pageID,
        url: `https://reelcareer.co/obituaries/celebrating/${pageName}`,
        transactionData: transactionData,
        contact,
        contact2,
        pageName: pageName,
        status: "Pending",
        userID: userID,
            userIP: userIP,
            timestamp: serverTimestamp(),
            requestDate: new Date(),
    });

    console.log("Payout initiated:", payoutDoc.id);
}

// Function to close the payout modal
function closeModal() {
  document.getElementById("payout-modal").classList.remove('open');
}

window.closeModal = closeModal;




function createToolbar(pageID, pageName) {
    const toolbar = document.createElement('div');
    toolbar.className = 'controls';
    toolbar.innerHTML = `
        <button id="edit_${pageID}">Edit</button>
        <button id="analytics_${pageID}">Analytics</button>
        <button id="view_${pageID}">View</button>
        <button id="userAccount_${pageID}">Account</button>
    `;

    // Append the toolbar to the desired container
    document.getElementById('user-toolbar').appendChild(toolbar);

    // Add event listeners for the buttons
    toolbar.querySelector(`#edit_${pageID}`).addEventListener("click", () => goToEditPage(pageID, pageName));
    toolbar.querySelector(`#analytics_${pageID}`).addEventListener("click", () => goToAnalyticsPage(pageID, pageName));
    toolbar.querySelector(`#view_${pageID}`).addEventListener("click", () => goToViewPage(pageID, pageName));
    toolbar.querySelector(`#userAccount_${pageID}`).addEventListener("click", () => loadUserAccount(pageID, pageName));
}


// Functions to handle button actions
function goToEditPage(pageID, pageName) {
    window.location.href = `https://reelcareer.co/obituaries/edit.html?pageID=${encodeURIComponent(pageID)}&pageName=${encodeURIComponent(pageName)}`;
}
window.goToEditPage = goToEditPage;

function goToAnalyticsPage(pageID, pageName) {
    window.location.href = `https://reelcareer.co/obituaries/analytics.html?pageID=${encodeURIComponent(pageID)}&pageName=${encodeURIComponent(pageName)}`;
}
window.goToAnalyticsPage = goToAnalyticsPage;

function goToViewPage(pageID, pageName) {
    window.location.href = `https://reelcareer.co/obituaries/celebrating/${encodeURIComponent(pageName)}`;
}
window.goToViewPage = goToViewPage;

function loadUserAccount(pageID, pageName) {
    window.location.href = `https://reelcareer.co/obituaries/account.html?pageID=${encodeURIComponent(pageID)}&pageName=${encodeURIComponent(pageName)}`;
}
window.loadUserAccount = loadUserAccount;


</script>

    <script>
        // Dynamically set the current year
        document.getElementById("currentYear").textContent = new Date().getFullYear();
    </script>
    <script src="https://reelcareer.co/obituaries/setup/analytics.js" type="module"></script>
    
    </body>
    
    
    
    </html>
      